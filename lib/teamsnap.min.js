!function(){var window,global={};!function(){"use strict";var t="undefined"==typeof window?global:window;if("function"!=typeof t.require){var e={},n={},r={},i={}.hasOwnProperty,o="components/",s=function(t,e){var n=0;e&&(0===e.indexOf(o)&&(n=o.length),e.indexOf("/",n)>0&&(e=e.substring(n,e.indexOf("/",n))));var i=r[t+"/index.js"]||r[e+"/deps/"+t+"/index.js"];return i?o+i.substring(0,i.length-".js".length):t},a=/^\.\.?(\/|$)/,u=function(t,e){for(var n,r=[],i=(a.test(e)?t+"/"+e:e).split("/"),o=0,s=i.length;s>o;o++)n=i[o],".."===n?r.pop():"."!==n&&""!==n&&r.push(n);return r.join("/")},c=function(t){return t.split("/").slice(0,-1).join("/")},l=function(e){return function(n){var r=u(c(e),n);return t.require(r,e)}},f=function(t,e){var r={id:t,exports:{}};return n[t]=r,e(r.exports,l(t),r),r.exports},m=function(t,r){var o=u(t,".");if(null==r&&(r="/"),o=s(t,r),i.call(n,o))return n[o].exports;if(i.call(e,o))return f(o,e[o]);var a=u(o,"./index");if(i.call(n,a))return n[a].exports;if(i.call(e,a))return f(a,e[a]);throw new Error('Cannot find module "'+t+'" from "'+r+'"')};m.alias=function(t,e){r[e]=t},m.register=m.define=function(t,n){if("object"==typeof t)for(var r in t)i.call(t,r)&&(e[r]=t[r]);else e[t]=n},m.list=function(){var t=[];for(var n in e)i.call(e,n)&&t.push(n);return t},m.brunch=!0,m._cache=n,t.require=m}}();var t=global.require;global=this,global.window&&(window=this),t.register("auth",function(t,e,n){var r,i,o,s,a,u,c,l,f,m,h;r=e("./teamsnap").TeamSnap,f=e("./promises"),m=e("./request"),c="application/json",a="application/vnd.collection+json",l="multipart/form-data",o="teamsnap.authToken",i=m.create().hook(function(t,e){return t.setRequestHeader("Accept",c),e&&t.setRequestHeader("Content-Type",c),t.withCredentials=!0}),h=m.create().hook(function(t,e){return t.setRequestHeader("Accept",a),!e||e instanceof FormData||t.setRequestHeader("Content-Type",a),t.withCredentials=!0}),r.prototype.auth=function(t){var e,n;if("function"==typeof t?(n=t,t=null):"object"==typeof t&&(n=e,e=t,t=null),"function"==typeof e&&(n=e,e=null),this.request=h.clone(),"number"==typeof t&&-1!==teamsnap.apiUrl.indexOf(":3000"))return this.request.hook(function(e){return e.setRequestHeader("X-Teamsnap-User-ID",t)}),this;if(t||(t=s()),!t)throw new TSArgsError("teamsnap.auth","A token is required to auth unless in the browser it has been cached");return this.request.hook(function(e){return e.setRequestHeader("Authorization","Bearer "+t)}),this},r.prototype.deleteAuth=function(){return this.request=null},r.prototype.isAuthed=function(){return!!this.request},r.prototype.hasSession=function(){return!!s()},r.prototype.init=function(t,e){var n,r,o,a;return a=function(t,e){var n,r,i,o;r=[];for(n in e)o=e[n],o&&r.push(n+"="+encodeURIComponent(o));return i=teamsnap.authUrl+"/oauth/"+t+"?"+r.join("&"),i.replace(/%20/g,"+")},n=function(e,n,r){return r=Array.isArray(r)?r.join(" "):r,a("authorize",{response_type:e,client_id:t,redirect_uri:n,scope:r})},o=function(n){return a("token",{grant_type:"authorization_code",code:n,client_id:t,client_secret:e})},r=function(n,r){return a("token",{grant_type:"password",username:n,password:r,client_id:t,client_secret:e})},this.getServerAuthUrl=function(t,e){return n("code",t,e)},this.getServerTokenUrl=function(t){return o(t)},this.getBrowserAuthUrl=function(t,e){return n("token",t,e)},this.getPasswordAuthUrl=function(t,e){return r(t,e)},this.createDialog=function(t,e){return u(t,e)},this.finishServerAuth=function(t,e){return i.post(this.getServerTokenUrl(t),e)},this.startBrowserAuth=function(t,e,n){if("file:"===location.protocol)throw new TSError("TeamSnap.js cannot auth from the file system");return this.createDialog(this.getBrowserAuthUrl(t,e)).then(function(t){return function(e){var n;return n=e.access_token,s(n),t.auth(n)}}(this)).callback(n)},this.startPasswordAuth=function(t,e,n){return i.post(this.getPasswordAuthUrl(t,e),n)}},s=function(t){return global.sessionStorage?0===arguments.length?sessionStorage.getItem(o):void sessionStorage.setItem(o,t):void 0},u=function(t,e){var n,r,i,o,s,a,u,c,l,m,h;return u=860,i=720,n=f.defer(),m=window.screenLeft||window.screenX,h=window.screenTop||window.screenY,l=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,c=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,s=m+(l-u)/2,a=h+(c-i)/2,r=window.open(t,"oauth","menubar=no,scrollbars=no,status=no,toolbar=no,width="+u+",height="+i+",left="+s+",top="+a),o=setInterval(function(){var t,e,i,s;try{if(r.closed&&(clearInterval(o),n.reject({error:"access_denied",error_description:"The resource owner denied the request."})),r.location.host!==location.host)return;i=r.location.hash.replace(/^#/,"")||r.location.search.replace(/^\?/,"")}catch(e){return void(t=e)}return clearInterval(o),r.close(),s={},i.split("&").forEach(function(t){var e,n,r;return n=t.split("="),e=n[0],r=n[1],s[decodeURIComponent(e)]=decodeURIComponent(r.replace(/\+/g," "))}),s.error?n.reject(s):n.resolve(s)},50),n.promise.callback(e)}}),t.register("errors",function(t,e,n){var r,i,o,s,a=function(t,e){function n(){this.constructor=t}for(var r in e)u.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},u={}.hasOwnProperty;i=function(t){function e(t){e.__super__.constructor.call(this),this.name="TeamSnapError",this.message=t}return a(e,t),e}(Error),r=function(t){function e(t,n){e.__super__.constructor.call(this),this.name="TeamSnapArgumentError",this.message="Failed to execute `"+t+"`: "+n+"."}return a(e,t),e}(TypeError),s=function(t){function e(t,n){e.__super__.constructor.call(this),this.name="TeamSnapValidationError",this.message=t,this.field=n}return a(e,t),e}(RangeError),o=function(t){function e(t){e.__super__.constructor.call(this),this.name="TeamSnapServerError",this.message=t||"An unknown error occurred on TeamSnap's server."}return a(e,t),e.create=function(t,n){return new e(t,n)},e}(Error),global.TSError=i,global.TSArgsError=r,global.TSValidationError=s,global.TSServerError=o}),t.register("linking",function(t,e,n){var r,i,o,s,a,u,c,l;s=e("./types"),o=function(t,e){return null==e&&(e={}),t?(Array.isArray(t)?(t.forEach(function(t){return t.href?e[t.href]=t:void 0}),t.forEach(function(t){return r(t,e)})):(t.href&&(e[t.href]=t),r(t,e)),t):void 0},c=function(t,e){return null==e&&(e={}),t?(Array.isArray(t)?t.forEach(function(t){return a(t,e)}):a(t,e),t):void 0},r=function(t,e){if(!e)throw new TSArgsError("linkItem","lookup must be provided");return t.href&&(e[t.href]=t),t.links.each(function(n,r){var o;if(!s.isPluralType(n)){if(!(o=e[r]))return;return t[n]=o,i(t,o)}return t[n]?void 0:t[n]=[]})},i=function(t,e){var n;return n=s.getPluralType(t.type),n&&e.links.has(n)?(e[n]||(e[n]=[]),-1===e[n].indexOf(t)?e[n].push(t):void 0):e.links.each(function(n,r){return r===t.href?e[n]=t:void 0})},a=function(t,e){return t.href?(e[t.href]===t&&delete e[t.href],t.links.each(function(e,n){return t[e]?(s.isPluralType(e)?l(t[e],t):u(t,t[e]),delete t[e]):void 0})):void 0},u=function(t,e){var n,r;return r=s.getPluralType(t.type),r&&e.links.has(r)&&e[r]?(n=e[r].indexOf(t),-1!==n?e[r].splice(n,1):void 0):e.links.each(function(n,r){return e[n]===t?delete e[n]:void 0})},l=function(t,e){return t.forEach(function(t){return t.links.each(function(n,r){return t[n]===e?delete t[n]:void 0})})},t.linkItems=o,t.unlinkItems=c,t.linkItem=r,t.linkItemWith=i,t.unlinkItem=a,t.unlinkItemFrom=u,t.unlinkItemsFrom=l}),t.register("loadCollections",function(t,e,n){var r,i,o,s,a={}.hasOwnProperty;o=e("./promises"),s=e("./types"),r=e("./model").Collection,i=null,n.exports=function(t,e){return i&&"reject"!==i.getStatus()||(i=t.get(teamsnap.apiUrl).then(function(n){var u,c,l,f,m,h,p,d,y,v;if(u={},u.root=d=r.fromData(n.data),e&&e.root.version===d.version){u={};for(c in e)v=e[c],u[c]=new r(v);return i=o.resolve(u)}y={},l=[],f=u.root.links;for(c in f)a.call(f,c)&&(v=f[c],y[v.href]=c);return(null!=(m=u.root)&&null!=(h=m.links)&&null!=(p=h.schemas)?p.href:void 0)?l.push(t.get(u.root.links.schemas.href).then(function(t){return t.data.forEach(function(t){var e;return e=y[t.collection.href],e&&"root"!==e?u[e]=r.fromData(t):void 0})})):s.getTypes().forEach(function(e){var n;return n=s.getPluralType(e),d.links.has(n)?l.push(t.get(d.links.href(n)).then(function(t){return u[n]=r.fromData(t.data)})):void 0}),o.when.apply(o,l).then(function(){return u})})),i},n.exports.clear=function(){return i=null}}),t.register("model",function(t,e,n){var r,i,o,s,a,u,c,l,f,m,h,p=function(t,e){function n(){this.constructor=t}for(var r in e)d.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},d={}.hasOwnProperty;m=e("./promises"),i=global.File||function(){},r=function(){function t(t){null==t&&(t={}),this.href=t.href,this.links=new s(t.links),this.queries=new s(t.queries),this.commands=new s(t.commands),this.template=t.template||[],t.version&&(this.version=t.version),t.items&&(this.items=t.items)}return t.fromData=function(e){return(new t).deserialize(e)},t.prototype.deserialize=function(t){var e,n;return t.collection&&(t=t.collection),t?(this.href=t.href,this.links.deserialize(t.links),this.queries.deserialize(t.queries),this.commands.deserialize(t.commands),t.version&&(this.version=t.version),this.template=(null!=(e=t.template)?e.data:void 0)||[],(null!=(n=t.items)?n.length:void 0)&&(this.items=t.items),this):void 0},t}(),a=function(t){function e(t,e){this._request=t,this.href=e.href,this.links=e.links,this.queries=e.queries,this.commands=e.commands,this.template=e.template,this.version=e.version,e.items&&(this.items=o.fromArray(this._request,e.items))}return p(e,t),e.fromData=function(t,n){return new e(t,(new r).deserialize(n))},e.prototype.save=function(t,e){var n,r;return t instanceof o||(t=o.create(this._request,t)),r=t.href?"put":"post",n=t.serialize(this.template),0===n.template.data.length?m.resolve(t).callback(e):this._request(r,t.href||this.href,n).then(function(e){return function(n){var r,i,s,a;if(i=null!=(s=n.data)&&null!=(a=s.collection)?a.items:void 0){if(i.length>1)return t.deserialize(i.shift()),r=o.fromArray(e._request,i),r.unshift(t),r;if(i.length)return t.deserialize(n.data)}}}(this)).callback(e)},e.prototype.loadItems=function(t,e){return this.links.loadItems(this._request,t,e)},e.prototype.loadItem=function(t,e){return this.links.loadItem(this._request,t,e)},e.prototype.queryItems=function(t,e,n){return this.queries.loadItems(this._request,t,e,n)},e.prototype.queryItem=function(t,e,n){return this.queries.loadItem(this._request,t,e,n)},e.prototype.exec=function(t,e,n){return this.commands.exec(this._request,t,e,n)},e.prototype.file=function(t,e,n,r){return this.commands.fileExec(this._request,t,e,n,r)},e}(r),o=function(){function t(t,e){this._request=t,"string"==typeof e?this.href=e:e&&"object"==typeof e&&c(e,this),this.links instanceof s||(this.links=new s(null!=e?e.links:void 0))}return t.create=function(e,n){return new t(e,n)},t.fromArray=function(e,n){return Array.isArray(n)?n.map(function(n){return t.fromData(e,n)}):n},t.fromData=function(t,e){return e.collection||e.data?this.create(t).deserialize(e):this.create(t,e)},t.prototype.deserialize=function(t){var e,n,r,i,o,s;if((null!=t?t.collection:void 0)&&(t=null!=(i=t.collection.items)?i[0]:void 0),t){for(this.href=t.href,this.links.deserialize(t.links),o=t.data,e=0,n=o.length;n>e;e++)r=o[e],s=r.value,"DateTime"===r.type&&s&&(s=new Date(s)),"type"===r.name&&(s=u(s)),this[u(r.name)]=s;return this}},t.prototype.serialize=function(t){var e,n;if(!(null!=t?t.length:void 0))throw new TSError("You must provide the collection's template");return e=[],n=this,t.forEach(function(t){var r;return r=n[u(t.name)],"type"===t.name&&(r=h(r)),void 0!==r?e.push({name:t.name,value:r}):void 0}),{template:{data:e}}},t.prototype.loadItems=function(t,e){return this.links.loadItems(this._request,t,e)},t.prototype.loadItem=function(t,e){return this.links.loadItem(this._request,t,e)},t.prototype["delete"]=function(t,e){var n,r,i,o;if("function"==typeof t&&(e=t,t=null),t){r=[];for(i in t)d.call(t,i)&&(o=t[i],r.push({name:h(i),value:o}));n={template:{data:r}}}return this._request["delete"](this.href,n).callback(e)},t.prototype.copy=function(e){var n;return n={},e?e.forEach(function(t){return function(e){var r;return r=u(e.name),n[r]=t[r]}}(this)):c(this,n),delete n.id,delete n.href,n.type=this.type,n.links=this.links.cloneEmpty(),new t(this._request,n)},t.prototype.toJSON=function(){var t;return t={},Object.keys(this).forEach(function(e){return function(n){var r;return r=e[n],"function"==typeof r||"_"===n.charAt(0)||e.links.has(n)?void 0:t[n]=e[n]}}(this)),t},t}(),s=function(){function t(t){t&&c(t,this)}return t.prototype.deserialize=function(t){var e,n,r,i,o,s,a,c,l,f,m,h;if(Array.isArray(t)){for(a={},Object.keys(this).forEach(function(t){return a[t]=!0}),n=0,i=t.length;i>n;n++){if(e=t[n],l={},Array.isArray(e.data))for(m=e.data,r=0,o=m.length;o>r;r++)c=m[r],l[u(c.name)]=c.value;f=u(e.rel),this[f]={href:e.href,params:l},delete a[f]}h=[];for(s in a)h.push(delete this[s]);return h}},t.prototype.has=function(t){return this.hasOwnProperty(t)},t.prototype.href=function(t){var e;return null!=(e=this[t])?e.href:void 0},t.prototype.each=function(t){var e,n,r;r=[];for(n in this)d.call(this,n)&&(e=this[n],r.push(t(n,e.href,e.params)));return r},t.prototype.loadItems=function(t,e,n,r){return"function"==typeof n&&(r=n,n=void 0),this._request(t,"get",e,n,"items").callback(r)},t.prototype.loadItem=function(t,e,n,r){return"function"==typeof n&&(r=n,n=void 0),this._request(t,"get",e,n,"item").callback(r)},t.prototype["delete"]=function(t,e,n){return this._request(t,"delete",e,void 0,"item").callback(n)},t.prototype.exec=function(t,e,n,r){return"function"==typeof n&&(r=n,n=void 0),this._request(t,"post",e,n,"items").callback(r)},t.prototype.fileExec=function(t,e,n,r,i){var o;return"function"==typeof n&&(i=r,r=n,n=void 0),o=function(t,e){return e instanceof FormData?t.upload.onprogress=function(t){return t.lengthComputable?r({loaded:t.loaded,total:t.total}):void 0}:void 0},t.hook(o),this._request(t,"post",e,n,"items").callback(i)},t.prototype.cloneEmpty=function(){var e,n,r;e=new t;for(r in this)d.call(this,r)&&(n=this[r],n.href&&(e[r]={href:""}));return e},t.prototype._request=function(t,e,n,r,s){var a,u,c,l,f,m;if(!(u=this[n]))throw new TSError("Unable to find rel '"+n+"'");if(r){a={};for(f in r)if(d.call(r,f)){if(m=r[f],m instanceof i){a=new FormData;for(f in r)d.call(r,f)&&(m=r[f],a.append(h(f),m));break}u.params.hasOwnProperty(f)?a[h(f)]=m:-1!==f.indexOf("__")&&(c=f.split("__"),l=teamsnap.getCollectionForItem(c[0]),l.queries.search.params.hasOwnProperty(c[1])&&(a[h(f)]=m))}}return t(e,u.href,a).then(function(e){var n,r,i;return n=(null!=(r=e.data)&&null!=(i=r.collection)?i.items:void 0)?o.fromArray(t,e.data.collection.items):[],"item"===s?n.pop():n})},t}(),l=/(At|Date)$/,f=/^\d{4}-/,c=function(t,e){return Object.keys(t).forEach(function(n){var r;return r=t[n],"function"!=typeof r&&"_"!==n.charAt(0)?(l.test(n)&&f.test(r)&&(r=new Date(r)),e[n]=r):void 0}),e},u=function(t){return t.replace(/[-_]+(\w)/g,function(t,e){return e.toUpperCase()})},h=function(t){return t.replace(/[A-Z]/g,function(t){return"_"+t.toLowerCase()})},t.Collection=r,t.ScopedCollection=a,t.Item=o,t.MetaList=s}),t.register("persistence",function(t,e,n){var r,i,o,s,a,u,c,l,f,m,h,p,d,y,v,g,b,I=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};m=e("./promises"),u=e("./linking"),v=e("./types"),r=e("./model").Item,h=e("./model"),o=h.ScopedCollection,r=h.Item,i=h.MetaList,c=null,t.enablePersistence=function(t){var e;if(!c){if(!this.collections)throw new TSError("You must auth() and loadCollections() before enabling persistence.");return this.persistenceEnabled=!0,c={},l(),f(this),e=[],e.push.apply(e,this.plans),e.push.apply(e,this.smsGateways),e.push.apply(e,this.sports),e.push.apply(e,this.timeZones),u.linkItems(this.plans.concat(this.sports),c),t?r.fromArray(this.request,t):void 0}},t.disablePersistence=function(){return c?(this.persistenceEnabled=!1,u.unlinkItems(Object.keys(c).map(function(t){return c[t]}),c),c=null,p(),d(this),this):void 0},t.findItem=function(t){return null!=c?c[t]:void 0},t.getAllItems=function(){return Object.keys(c).map(function(t){return c[t]})},t.unlinkTeam=function(t){var e,n,r,i,o,s,a,u,c;for(n=[t],u=null!=(o=t.members)?o.filter(function(t){return t.user}).map(function(t){return t.user}):void 0,s=this.getTeamTypes(),e=0,r=s.length;r>e;e++)a=s[e],i=this.getPluralType(a),(c=t[i])&&c.length?n.push.apply(n,c):(c=t[a])&&n.push(c);return unlinkItems(n)},l=function(){return g(r,"fromArray",function(t){return function(e,n){var r;return r=t.call(this,e,n),u.linkItems(r,c).map(function(t){return t.saveState()})}}),g(o.prototype,"save",function(t){return function(e,n){return t.call(this,e).then(function(t){return Array.isArray(t)?t.map(function(t){return u.linkItem(t,c),t.saveState()}):(u.linkItem(t,c),t.saveState())}).callback(n)}}),g(r.prototype,"delete",function(t){return function(e,n){var r;return r=this,u.unlinkItem(r,c),t.call(this,e).fail(function(t){return u.linkItem(r,c),t}).callback(n)}}),g(r,"create",function(t){return function(e,n){var r;return r=t.call(this,e,n),u.linkItem(r,c),r}}),g(r.prototype,"deserialize",function(t){return function(e){var n,r;return(null!=e?e.collection:void 0)&&(e=null!=(r=e.collection.items)?r[0]:void 0),n=c[e.href]||this,t.call(n,e)}}),g(r.prototype,"serialize",function(t){return function(e){var n,r;return n=t.call(this,e),(r=this._state)&&(n.template.data=n.template.data.filter(function(t){var e,n,i;return n=r[s(t.name)],i=t.value,"type"===t.name&&(i=s(i)),e=i===n||i&&n&&i.valueOf()===n.valueOf(),!e})),n}}),r.prototype.saveState=function(){return this._state={_undos:[]},this.href&&a(this,this._state),this},r.prototype.rollback=function(){return this._state._undos.reverse().forEach(function(t){return t()}),this._state._undos.length=0,a(this._state,this)},r.prototype.link=function(t,e){var n,r;return this._state||this.saveState(),r=this._state._undos,this[t]&&(n=this[t],u.unlinkItemFrom(this,this[t]),r.push(function(e){return function(){return e[t]=n,e.links[t].href=n.href,e[t+"Id"]=n.id,u.linkItemWith(e,n)}}(this))),this[t]=e,e&&(this[t+"Id"]=e.id,this.links[t].href=e.href,u.linkItemWith(this,e),r.push(function(n){return function(){return delete n[t],delete n[t+"Id"],u.unlinkItemFrom(n,e)}}(this))),this}},p=function(){return y(i.prototype,"_request"),y(o.prototype,"save"),y(r.prototype,"delete"),y(r,"create"),y(r.prototype,"deserialize"),y(r.prototype,"serialize"),delete r.prototype.saveState,delete r.prototype.rollback,delete r.prototype.link},f=function(t){return b(t,"saveMember",function(e){return m.when(t.loadAvailabilities({memberId:e.id}),t.loadTrackedItemStatuses({memberId:e.id}),t.loadCustomData({memberId:e.id}),t.loadLeagueCustomData({memberId:e.id}),t.loadMemberPayments({memberId:e.id}),t.loadMemberBalances({memberId:e.id}),t.loadTeamFees({teamId:e.teamId}))}),g(t,"deleteMember",function(e){return function(n,r){var i;return i=[],i.push.apply(i,n.assignments),i.push.apply(i,n.availabilities),n.contacts.forEach(function(t){return i.push.apply(i,t.contactEmailAddresses),i.push.apply(i,t.contactPhoneNumbers),i.push(t)}),i.push.apply(i,n.trackedItemStatuses),i.push.apply(i,n.memberPayments),i.push.apply(i,n.memberStatistics),i.push.apply(i,n.statisticData),i.push.apply(i,n.memberAssignments),u.unlinkItems(i,c),e.call(this,n,r).then(function(e){return t.loadTeamFees(n.teamId),t.loadStatisticAggregates(n.teamId),e}).fail(function(t){return u.linkItems(i,c),t}).callback(r)}}),g(t,"deleteContact",function(e){return function(n,r){var i;return i=[],i.push.apply(i,n.contactEmailAddresses),i.push.apply(i,n.contactPhoneNumbers),u.unlinkItems(i,c),e.call(this,n,r).then(function(e){return t.loadMembers({memberId:n.memberId}).then(function(){return e})}).fail(function(t){return u.linkItems(i,c),t}).callback(r)}}),g(t,"saveMemberEmailAddress",function(e){return function(n,r){return e.call(this,n,r).then(function(e){return t.loadMembers({id:n.memberId}).then(function(){return e})}).callback(r)}}),g(t,"deleteMemberEmailAddress",function(e){return function(n,r){return e.call(this,n,r).then(function(e){return t.loadMembers({id:n.memberId}).then(function(){return e})}).callback(r)}}),g(t,"saveMemberPhoneNumber",function(e){return function(n,r){return e.call(this,n,r).then(function(e){return t.loadMembers({id:n.memberId}).then(function(){return e})}).callback(r)}}),g(t,"deleteMemberPhoneNumber",function(e){return function(n,r){return e.call(this,n,r).then(function(e){return t.loadMembers({id:n.memberId}).then(function(){return e})}).callback(r)}}),g(t,"saveContactEmailAddress",function(e){return function(n,r){return e.call(this,n,r).then(function(e){return t.loadMembers({id:n.memberId}).then(function(){return e})}).callback(r)}}),g(t,"deleteContactEmailAddress",function(e){return function(n,r){return e.call(this,n,r).then(function(e){return t.loadMembers({id:n.memberId}).then(function(){return e})}).callback(r)}}),g(t,"saveContactPhoneNumber",function(e){return function(n,r){return e.call(this,n,r).then(function(e){return t.loadMembers({id:n.memberId}).then(function(){return e})}).callback(r)}}),g(t,"deleteContactPhoneNumber",function(e){return function(n,r){return e.call(this,n,r).then(function(e){return t.loadMembers({id:n.memberId}).then(function(){return e})}).callback(r)}}),b(t,"saveEvent",function(e){var n;return n=Array.isArray(e)?e.map(function(t){return t.id}).join(","):e.id,t.loadAvailabilities({eventId:n})},function(e){var n,r,i,o,s,a;return e.isGame?m.when(t.loadTeamResults(e.teamId),t.loadOpponentResults(e.opponentId),t.loadEventStatistics({eventId:e.id})):Array.isArray(e)?(s=function(){var t,r,i;for(i=[],t=0,r=e.length;r>t;t++)n=e[t],i.push(n.id);return i}(),r=e.shift(),a=[],null!=(i=r.team)&&null!=(o=i.events)&&o.forEach(function(t){return t.repeatingUuid===r.repeatingUuid?a.push(t):void 0}),a=a.filter(function(t){var e;return e=t.id,I.call(s,e)<0}),u.unlinkItems(a,c)):void 0}),g(t,"deleteEvent",function(e){return function(n,r,i,o,s){var a,l,f,h,p,d;return a=[],"string"==typeof r&&r!==t.EVENTS.NONE?(d=n.repeatingUuid,h=n.startDate,null!=(l=n.team)&&null!=(f=l.events)&&f.forEach(function(t){return t.repeatingUuid===d?a.push(t):void 0}),r===t.EVENTS.FUTURE&&(a=a.filter(function(t){return t.startDate>=h}))):a.push(n),p=a.slice(),a.forEach(function(t){return p.push.apply(p,t.assignments),p.push.apply(p,t.availabilities),p.push.apply(p,t.eventStatistics)}),n.assignments.forEach(function(t){return t.memberAssignments.length?t.memberAssignments.forEach(function(t){return p.push.apply(p,t)}):void 0}),u.unlinkItems(p,c),e.call(this,n,r,i,o,s).then(function(e){return n.isGame?m.when(t.loadTeamResults(n.teamId),t.loadOpponentResults(n.opponentId)).then(function(){return e}):e},function(t){return u.linkItems(p,c),t}).callback(s)}}),b(t,"saveTrackedItem",function(e){return t.loadTrackedItemStatuses({trackedItemId:e.id})}),g(t,"deleteTrackedItem",function(t){return function(e,n){var r;return r=e.trackedItemStatuses.slice(),u.unlinkItems(r,c),t.call(this,e).fail(function(t){return u.linkItems(r,c),t}).callback(n)}}),g(t,"deleteStatistic",function(e){return function(n,r){var i;return i=n.statisticData.slice(),i.push.apply(i,n.eventStatistics),i.push.apply(i,n.memberStatistics),i.push.apply(i,n.teamStatistics),i.push.apply(i,n.statisticAggregates),u.unlinkItems(i,c),e.call(this,n).then(function(e){var r,i,o;return o=n.teamId,i=e.id,r=["memberStatistic","teamStatistic","statisticAggregate","eventStatistic"],t.bulkLoad(o,r).then(function(){return e})}).fail(function(t){return u.linkItems(i,c),t}).callback(r)}}),g(t,"saveStatistic",function(e){return function(n,r){return null==n.statisticGroupId&&null!=n.statisticGroup&&u.unlinkItems(n.statisticGroup,n),e.call(this,n,r).then(function(e){var r,i,o;return o=n.teamId,i=e.id,r=["memberStatistic","teamStatistic","statisticAggregate","statistic","statisticGroup","eventStatistic"],t.bulkLoad(o,r).then(function(){return e})}).callback(r)}}),g(t,"bulkSaveStatisticData",function(e){return function(n,r){return e.call(this,n,r).then(function(e){var n,r;return null!=e[0]&&null!=e[0].teamId?(r=e[0].teamId,n=["memberStatistic","statisticAggregate","eventStatistic"],t.bulkLoad(r,n).then(function(){return e})):void 0}).callback(r)}}),g(t,"saveStatisticDatum",function(e){return function(n,r){return e.call(this,n,r).then(function(e){var n,r,i;return i=e.teamId,r=e.statisticId,n=["memberStatistic","statisticAggregate","eventStatistic"],t.bulkLoad(i,n).then(function(){return e})}).callback(r)}}),g(t,"bulkDeleteStatisticData",function(e){return function(n,r,i){var o,s;return s=[],s.push(r.eventStatistics),null!=(o=n.statisticData)&&o.forEach(function(t){return t.event===r?s.push(t):void 0}),u.unlinkItems(s,c),e.call(this,n,r).then(function(e){var r,i;return i=n.teamId,r=["memberStatistic","statisticAggregate","eventStatistic"],t.bulkLoad(i,r).then(function(){return e})}).fail(function(t){return u.linkItems(s,c),t}).callback(i)}}),g(t,"saveMemberPayment",function(e){return function(n,r){return e.call(this,n).then(function(e){var r,i;return r=e.memberId,i=e.teamFeeId,m.when(t.loadMemberBalances({memberId:r}),t.loadTeamFees({id:i}),t.loadPaymentNotes({memberPaymentId:n.id})).then(function(){return e})}).callback(r)}}),g(t,"saveTeamFee",function(e){return function(n,r){return e.call(this,n).then(function(e){var n;return n=e.teamId,t.loadMemberBalances({teamId:n}).then(function(){return e})}).callback(r)}}),g(t,"deleteTeamFee",function(e){return function(n,r){return e.call(this,n).then(function(e){var r;return r=n.teamId,t.loadMemberBalances({teamId:r}).then(function(){return e})}).callback(r)}}),g(t,"assignMediaToGroup",function(e){return function(n,r,i){return e.call(this,n,r).then(function(e){var n,r;return r=e[0].teamId,n=["teamMediaGroup","teamMedium"],t.bulkLoad(r,n).then(function(){return e})}).callback(i)}}),g(t,"setMediumAsTeamPhoto",function(e){return function(n,r){return e.call(this,n).then(function(e){var n;return n=e.teamId,t.loadTeamPreferences(n).then(function(){return e})}).callback(r)}}),g(t,"setMediumAsMemberPhoto",function(e){return function(n,r,i){return e.call(this,n,r).then(function(e){return null!=r.id?t.loadMembers({id:r.id}).then(function(){return e}):void 0}).callback(i)}}),g(t,"uploadTeamMedium",function(e){return function(n,r,i){return e.call(this,n,r).then(function(e){return m.when(t.loadTeam(n.teamId),t.loadTeamMediaGroups({id:n.teamMediaGroupId})).then(function(){return e})}).callback(i)}}),g(t,"saveTeamMedium",function(e){return function(n,r){var i,o;return o=[n.teamMediaGroupId],null!=(null!=(i=n._state)?i.teamMediaGroupId:void 0)!==n.teamMediaGroupId&&o.push(n._state.teamMediaGroupId),e.call(this,n).then(function(e){var r;return r=n.teamId,t.loadTeamMediaGroups({id:o})}).callback(r)}}),g(t,"saveTeamVideoLink",function(e){return function(n,r){return e.call(this,n).then(function(e){return t.loadTeamMediaGroups({id:n.teamMediaGroupId})}).callback(r)}}),g(t,"deleteTeamMedium",function(e){return function(n,r){var i;return i=n.teamMediumComments.slice(),u.unlinkItems(i,c),e.call(this,n).then(function(e){return m.when(t.loadTeam(n.teamId),t.loadTeamMediaGroups({id:n.teamMediaGroupId})).then(function(){return e})},function(t){return u.linkItems(i,c),t}).callback(r)}}),g(t,"bulkDeleteTeamMedia",function(e){return function(n,r,i){return"function"==typeof r&&(i=r),e.call(this,n,i).then(function(e){return"string"==typeof r||"number"==typeof r?m.when(t.loadTeam(r),t.loadTeamMediaGroups({teamId:r})).then(function(){return e}):e}).callback(i)}}),g(t,"reorderTeamMedia",function(e){return function(n,r,i,o){var s;return s={teamId:n},"function"==typeof i&&(o=i),("string"==typeof i||"number"==typeof i)&&(s={id:i}),e.call(this,n,r).then(function(e){return t.loadTeamMediaGroups(s).then(function(){return e})}).callback(o)}}),g(t,"deleteTeam",function(t){return function(e,n){var r;return r=[],e.links.each(function(t){var n;return n=e[name],v.getType(t)&&"sport"!==t&&"plan"!==t?Array.isArray(n)?r.push.apply(r,n):r.push(n):void 0}),t.call(this,e).then(function(t){return u.unlinkItems(r,c),t}).callback(n)}}),g(t,"deleteForumTopic",function(t){return function(e,n){var r;return r=[],r.push.apply(r,e.forumPosts),u.unlinkItems(r,c),t.call(this,e,n).fail(function(t){return u.linkItems(r,c),t}).callback(n)}}),g(t,"invite",function(e){return function(n,r){return e.call(this,n).then(function(e){var r,i;return n.hasOwnProperty("memberId")?(i=n.memberId,t.loadMemberEmailAddresses({memberId:i}).then(function(){return e})):n.hasOwnProperty("contactId")?(r=n.contactId,t.loadContactEmailAddresses({contactId:r}).then(function(){return e})):void 0}).callback(r)}}),g(t,"memberPaymentTransaction",function(e){return function(n,r,i,o){return e.call(this,n,r,i).then(function(e){var r,i;return r=e.memberId,i=e.teamFeeId,m.when(t.loadMemberBalances({memberId:r}),t.loadTeamFees({id:i}),t.loadPaymentNotes({memberPaymentId:n})).then(function(){return e})}).callback(o)}}),g(t,"importMembersFromTeam",function(e){return function(n,r,i){return e.call(this,n,r).then(function(e){return n=e.map(function(t){return t.id}),m.when(t.loadMembers({id:n}),t.loadContacts({memberId:n}),t.loadMemberEmailAddresses({memberId:n}),t.loadContactEmailAddresses({memberId:n}),t.loadMemberPhoneNumbers({memberId:n}),t.loadContactPhoneNumbers({memberId:n})).then(function(){return e})}).callback(i)}}),g(t,"saveBroadcastAlert",function(e){return function(n,r){return e.call(this,n).then(function(e){var n;return n=null!=e.member||null!=e.divisionMember?{memberId:e.memberId}:{contactId:e.contactId},t.loadMessageData(n),t.loadMessages({messageSourceId:e.id})}).callback(r)}}),g(t,"saveBroadcastEmail",function(e){return function(n,r){return e.call(this,n).then(function(e){var n;return n=null!=e.member||null!=e.divisionMember?{memberId:e.memberId}:{contactId:e.contactId},t.loadMessageData(n),t.loadMessages({messageSourceId:e.id})}).callback(r)}}),g(t,"saveAssignment",function(e){return function(n,r){return e.call(this,n,r).then(function(e){return t.loadMemberAssignments({assignmentId:e.id})}).callback(r)}}),g(t,"deleteAssignment",function(e){return function(n,r){var i;return n.memberAssignments.length&&(i=n.memberAssignments,u.unlinkItems(i,c)),e.call(this,n).then(function(e){return t.loadEvents({eventId:n.eventId}).then(function(){return e})}).callback(r)}}),g(t,"saveMemberAssignment",function(e){return function(n,r){return e.call(this,n).then(function(e){return t.loadAssignments({id:e.assignmentId})}).callback(r)}}),g(t,"deleteMemberAssignment",function(e){return function(n,r){return e.call(this,n,r).then(function(e){return t.loadAssignments({id:n.assignmentId}).then(function(t){return t[0].member=null,e})}).callback(r)}})},d=function(t){return y(t,"saveMember"),y(t,"deleteMember"),y(t,"deleteContact"),y(t,"saveEvent"),y(t,"deleteEvent"),y(t,"saveTrackedItem"),y(t,"deleteTrackedItem"),y(t,"deleteTeam")},g=function(t,e,n){var r;return r=t[e],t[e]=n(r),t[e].oldMethod=r,t},y=function(t,e){var n;return n=t[e].oldMethod,t[e]=n},b=function(t,e,n,r){return g(t,e,function(t){return function(e,i){var o;return e.id&&r?(o=null,t.call(this,e).then(function(t){return o=t}).then(r).then(function(){return o}).callback(i)):!e.id&&n?(o=null,t.call(this,e).then(function(t){return o=t}).then(n).then(function(){return o}).callback(i)):t.call(this,e,i)}})},a=function(t,e){return Object.keys(t).forEach(function(n){return"function"!=typeof value&&"_"!==n.charAt(0)?e[n]=t[n]:void 0}),e},s=function(t){return t.replace(/[-_]+(\w)/g,function(t,e){return e.toUpperCase()})}}),t.register("promises",function(t,e,n){var r,i,o,s,a=function(t,e){return function(){return t.apply(e,arguments)}},u=[].slice,c={}.hasOwnProperty;s="undefined"!=typeof t?t:this,i=function(){function t(){this.call=a(this.call,this)}return t.prototype.then=function(t,e,n,r){
throw new TypeError("The Promise base class is abstract, this function is overwritten by the promise's deferred object")},t.prototype.callback=function(t){return t&&"function"==typeof t&&this.then(function(){var e;return e=1<=arguments.length?u.call(arguments,0):[],t.apply(null,[null].concat(u.call(e)))},function(e){return t(e)}),this},t.prototype.resolved=function(t){return this.then(t)},t.prototype.done=function(t){return this.then(t)},t.prototype.rejected=function(t){return this.then(null,t)},t.prototype.fail=function(t){return this.then(null,t)},t.prototype.always=function(t){var e,n;return n=function(e){return t(null,e)},e=function(e){return t(e)},this.then(n,e)},t.prototype.progress=function(t){return this.then(null,null,t)},t.prototype.canceled=function(t){return this.then(null,null,null,t)},t.prototype.apply=function(t,e){return this.then(function(n){return(n instanceof Array)(t.apply(e||this,n))?void 0:t.call(e||this,n)})},t.prototype.cancel=function(){throw new TypeError("The Promise base class is abstract, this function is overwritten by the promise's deferred object")},t.prototype.get=function(t){return this.then(function(e){return null!=e?e[t]:void 0})},t.prototype.set=function(t,e){return this.then(function(n){return null!=n&&(n[t]=e),n})},t.prototype.put=function(t,e){return this.then(function(n){return null!=n?n[t]=e:void 0})},t.prototype.run=function(){var t,e;return t=arguments[0],e=2<=arguments.length?u.call(arguments,1):[],this.then(function(n){return null!=n&&n[t].apply(n,e),n})},t.prototype.call=function(){var t,e;return t=arguments[0],e=2<=arguments.length?u.call(arguments,1):[],this.then(function(n){return n[t].apply(n,e)})},t}(),["pop","shift","splice","filter","every","map","some"].forEach(function(t){return i.prototype[t]=function(){var e;return e=1<=arguments.length?u.call(arguments,0):[],this.then(function(n){return null!=n&&"function"==typeof n[t]?n[t].apply(n,e):void 0})}}),["push","reverse","sort","unshift","forEach"].forEach(function(t){return i.prototype[t]=function(){var e;return e=1<=arguments.length?u.call(arguments,0):[],this.then(function(n){return n instanceof Array&&n[t].apply(n,e),n})}}),i.extend=function(t){var e,n,r;if(e=function(){},e.extend=this.extend,e.prototype=new this,t)for(n in t)c.call(t,n)&&(r=t[n],e.prototype[n]=r);return e},s.when=function(){var t,e,n,r,i,o,a,c,l,f,m,h;for(l=1<=arguments.length?u.call(arguments,0):[],r=s.defer(),e=l.length,f=!1,h=function(){},m=function(t){return f=!0,t},n=function(t){return function(){var n;return n=1<=arguments.length?u.call(arguments,0):[],l[t]=n.length>1?n:n[0],0===--e?f?r.reject.apply(r,l):r.resolve.apply(r,l):void 0}},a=i=0,o=l.length;o>i;a=++i)c=l[a],c&&"function"==typeof c.then?(t=n(a),c.then(h,m),c.then(t,t)):--e;return 0===e&&r.resolve.apply(r,l),r.promise},o=function(){var t;return t=1<=arguments.length?u.call(arguments,0):[],t.isArgs=!0,t},r=function(){function t(t){null==t&&(t=new s.Promise),this.progress=a(this.progress,this),this.cancel=a(this.cancel,this),this.reject=a(this.reject,this),this.resolve=a(this.resolve,this),this.finished=a(this.finished,this),this.then=a(this.then,this),this.promise=t,this.status="pending",this.progressHandlers=[],this.handlers=[],t.then=this.then,t.cancel=this.cancel,t.getStatus=function(t){return function(){return t.status}}(this)}return t.prototype.then=function(t,e,n,r){var i,o,a,u,c,l,f;for(a=0,u=arguments.length;u>a;a++)if(o=arguments[a],null!=o&&"function"!=typeof o)throw new Error("Promise handlers must be functions");return n&&this.progressHandlers.push(n),l=s.defer(),l.promise.prev=this.promise,this._addHandler(t,e,r).nextDeferred=l,this.finished()&&(o=this.handlers.pop(),c=o[this.status],i=o.nextDeferred,c?(f=c.apply(null,this.results),f&&"function"==typeof f.then?f.then(i.resolve,i.reject):i[this.status](f)):i[this.status].apply(i,this.results)),l.promise},t.prototype.finished=function(){return"pending"!==this.status},t.prototype.resolve=function(){var t,e,n,r,i,o;if(o=1<=arguments.length?u.call(arguments,0):[],"pending"===this.status)for((null!=(i=o[0])?i.isArgs:void 0)&&(o=o[0]),clearTimeout(this._timeout),this.status="resolve",this.results=o;e=this.handlers.shift();)n=e[this.status],t=e.nextDeferred,n?(r=n.apply(null,this.results),r&&"function"==typeof r.then?r.then(t.resolve,t.reject):t[this.status](r)):t[this.status].apply(t,this.results)},t.prototype.reject=function(){var t,e,n,r,i,o;if(o=1<=arguments.length?u.call(arguments,0):[],"pending"===this.status)for((null!=(i=o[0])?i.isArgs:void 0)&&(o=o[0]),clearTimeout(this._timeout),this.status="reject",this.results=o;e=this.handlers.shift();)n=e[this.status],t=e.nextDeferred,n?(r=n.apply(null,this.results),r&&"function"==typeof r.then?r.then(t.resolve,t.reject):t[this.status](r)):t[this.status].apply(t,this.results)},t.prototype.cancel=function(){var t,e,n,r,i,o,s;if(s=1<=arguments.length?u.call(arguments,0):[],"pending"===this.status){for((null!=(i=s[0])?i.isArgs:void 0)&&(s=s[0]),clearTimeout(this._timeout),this.status="cancel",this.results=s;e=this.handlers.shift();)n=e[this.status],t=e.nextDeferred,n?(r=n.apply(null,this.results),r&&"function"==typeof r.then?r.then(t.resolve,t.reject):t[this.status](r)):t[this.status].apply(t,this.results);null!=(o=this.promise.prev)&&o.cancel()}},t.prototype.progress=function(){var t,e,n,r,i,o;for(n=1<=arguments.length?u.call(arguments,0):[],i=this.progressHandlers,o=[],t=0,e=i.length;e>t;t++)r=i[t],o.push(r.apply(null,n));return o},t.prototype.timeout=function(t,e){return clearTimeout(this._timeout),this._timeout=setTimeout(function(t){return function(){return t.reject(null!=e?e:new Error("Operation timed out"))}}(this),t)},t.prototype.reset=function(){return this.status="pending",this.progressHandlers=[],this.handlers=[]},t.prototype._addHandler=function(t,e,n){var r;return r={resolve:t,reject:e,cancel:n},this.handlers.push(r),r},t}(),s.Deferred=r,s.Promise=i,s.args=o,s.defer=function(t){return new s.Deferred(t)},s.wrap=function(t,e){return function(){var n,r,i,o;return n=1<=arguments.length?u.call(arguments,0):[],o=e?new e:void 0,i=s.defer(o),"function"==typeof n[n.length-1]&&(r=n.pop()),n.push(function(t,e){var n;return n=Array.prototype.slice.call(arguments,2),r&&r.apply(null,[t,e].concat(u.call(n))),t?i.reject(t):i.resolve.apply(i,[e].concat(u.call(n)))}),t.apply(this,n),i.promise}},s.resolve=function(){var t,e;return t=1<=arguments.length?u.call(arguments,0):[],e=s.defer(),e.resolve.apply(e,t),e.promise},s.reject=function(){var t,e;return t=1<=arguments.length?u.call(arguments,0):[],e=s.defer(),e.reject.apply(e,t),e.promise}}),t.register("request",function(t,e,n){var r,i,o,s,a,u,c=function(t,e){function n(){this.constructor=t}for(var r in e)l.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},l={}.hasOwnProperty;"undefined"==typeof XMLHttpRequest&&(global.XMLHttpRequest=e("xmlhttprequest").XMLHttpRequest),r=global.FormData||function(){},s=e("./promises"),a=function(t,e,n,o,a){var c,l,f,m,h,p,d,y;if(n&&"GET"===t.toUpperCase()){p=[];for(m in n)d=n[m],p.push(encodeURIComponent(m)+"="+encodeURIComponent(d));p.length&&(e+=-1===e.indexOf("?")?"?":"&",e+=p.join("&"))}else"object"!=typeof n||n instanceof r||(n=JSON.stringify(n));if(y=new XMLHttpRequest,y.open(t.toUpperCase(),e),o)for(f=0,h=o.length;h>f;f++)(l=o[f])(y,n);return c=s.defer(),y.onreadystatechange=function(){var t,e,n,r;switch(y.readyState){case 3:return c.progress(y);case 4:try{y.data=JSON.parse(y.responseText)}catch(o){y.data=null}return y.status>=400&&(t=(null!=(e=y.data)&&null!=(n=e.collection)&&null!=(r=n.error)?r.message:void 0)||""),0===y.status?u?s.defer().promise:c.reject(new i(i.CONNECTION_ERROR,"Could not connect to the server"),y,t):y.status>=500?(global.console&&console.error("TeamSnap API error: "+t),c.reject(new i(i.SERVER_ERROR,"Error with the server"),y,t)):y.status>400?c.reject(new i(i.CLIENT_ERROR,"There was an error with the request"),y,t):400===y.status?c.reject(new i(i.VALIDATION_ERROR,t||"The data was invalid"),y):c.resolve(y)}},y.send(n||null),c.promise.callback(a)},o=function(t){var e;return null==t&&(t=[]),e=function(e,n,r,i){return"function"==typeof r&&(i=r,r=null),a(e,n,r,t,i)},e.get=function(t,n,r){return e("get",t,n,r)},e.post=function(t,n,r){return e("post",t,n,r)},e.put=function(t,n,r){return e("put",t,n,r)},e["delete"]=function(t,n,r){return e("delete",t,n,r)},e.create=function(){return o()},e.clone=function(){return o(t.slice())},e.reset=function(){return t=[],this},e.hook=function(e){return t.push(e),this},e.removeHook=function(e){var n;return n=t.indexOf(e),-1!==n&&t.splice(n,1),this},e},n.exports=o(),i=function(t){function e(t,n){this.code=t,this.message=n,e.__super__.constructor.call(this),this.name="RequestError"}return c(e,t),e.CONNECTION_ERROR=1,e.SERVER_ERROR=2,e.CLIENT_ERROR=3,e.VALIDATION_ERROR=4,e}(Error),"undefined"!=typeof window&&(u=!1,window.addEventListener("beforeunload",function(){u=!0}))}),t.register("sdk",function(t,e,n){var r,i,o,s,a,u,c,l,f,m,h={}.hasOwnProperty;o=e("./teamsnap").TeamSnap,l=e("./promises"),u=e("./loadCollections"),f=e("./model"),r=f.Item,i=f.ScopedCollection,m=/^https?:\/\//,o.prototype.loadCollections=function(t,e){return"function"==typeof t&&(e=t,t=null),u(this.request,t).then(function(t){return function(e){var n,o,s,a;return t.collections={},Object.keys(e).forEach(function(n){return t.collections[n]=new i(t.request,e[n])}),t.apiVersion=e.root.version,t.plans=r.fromArray(t.request,(null!=(n=e.plans.items)?n.slice():void 0)||[]),t.smsGateways=r.fromArray(t.request,(null!=(o=e.smsGateways.items)?o.slice():void 0)||[]),t.sports=r.fromArray(t.request,(null!=(s=e.sports.items)?s.slice():void 0)||[]),t.timeZones=r.fromArray(t.request,(null!=(a=e.timeZones.items)?a.slice():void 0)||[]),t}}(this)).callback(e)},o.prototype.reloadCollections=function(t){return u.clear(),this.loadCollections(t)},o.prototype.loadItems=function(t,e,n){var r;if(!this.hasType(t))throw new TSArgsError("teamsnap.load*","must provide a valid `type`");return r=this.getCollectionForItem(t),r.queryItems("search",e,n)},o.prototype.loadItem=function(t,e,n){var r;if(!this.hasType(t))throw new TSArgsError("teamsnap.load*","must provide a valid `type`");return r=this.getCollectionForItem(t),r.queryItem("search",e,n)},o.prototype.createItem=function(t,e){var n;if(t||(t=e,e=null),e&&(t=c(t,e)),!this.isItem(t))throw new TSArgsError("teamsnap.create*","must include a valid `type`");return t.links||(n=this.getCollectionForItem(t.type),t.links=n.links.cloneEmpty()),r.create(this.request,t)},o.prototype.saveItem=function(t,e){var n;if(!this.isItem(t))throw new TSArgsError("teamsnap.save*","must include a valid `type`");return n=this.getCollectionForItem(t),n.save(t,e)},o.prototype.deleteItem=function(t,e,n){if("string"==typeof t&&m.test(t)&&(t={href:t}),"string"!=typeof(null!=t?t.href:void 0)||!m.test(t.href))throw new TSArgsError("teamsnap.delete*","item must have a valid href to delete");return t instanceof r||(t=r.create(this.request,t)),t["delete"](e,n)},o.prototype.copyItem=function(t){var e;return e=this.getCollectionForItem(t),t.copy(e.template)},o.prototype.getNameSort=function(){return function(t,e){var n,r;return t.type!==e.type?(n=t.type,r=e.type):"string"==typeof t.name&&"string"==typeof e.name?(n=t.name.toLowerCase(),r=e.name.toLowerCase()):t.createdAt&&e.createdAt?(n=t.createdAt,r=e.createdAt):(n=t.id,r=e.id),"function"==typeof(null!=n?n.localeCompare:void 0)?n.localeCompare(r):n===r?0:!n&&r?1:n&&!r?-1:n>r?1:r>n?-1:0}},o.prototype.getDefaultSort=function(){return function(t,e){var n,r;return t.type!==e.type?(n=t.type,r=e.type):t.createdAt&&e.createdAt?(n=t.createdAt,r=e.createdAt):(n=t.id,r=e.id),"function"==typeof(null!=n?n.localeCompare:void 0)?n.localeCompare(r):n===r?0:!n&&r?1:n&&!r?-1:n>r?1:r>n?-1:0}},o.prototype.getCollectionForItem=function(t){var e,n;if(!this.collections)throw new TSError("You must auth() and loadCollections() before using any load*, save*, create*, or delete* methods.");return n="string"==typeof t?t:t.type,e=this.getPluralType(n),this.collections[e]},o.prototype.isId=function(t){return"string"==typeof t||"number"==typeof t},o.prototype.isItem=function(t,e){return this.hasType(null!=t?t.type:void 0)&&(!e||t.type===e)},o.prototype.reject=function(t,e,n){return l.reject(new TSValidationError(t,e)).callback(n)},s=function(t){var e,n,r;n=[];for(e in t)r=t[e],n.push(o.prototype[e]=r);return n},s(e("./types")),a=e("./linking"),o.prototype.linkItems=a.linkItems,o.prototype.unlinkItems=a.unlinkItems,s(e("./persistence")),s(e("./collections/teams")),s(e("./collections/assignments")),s(e("./collections/availabilities")),s(e("./collections/broadcastAlerts")),s(e("./collections/broadcastEmails")),s(e("./collections/broadcastEmailAttachments")),s(e("./collections/contactEmailAddresses")),s(e("./collections/contactPhoneNumbers")),s(e("./collections/contacts")),s(e("./collections/customData")),s(e("./collections/customFields")),s(e("./collections/leagueCustomData")),s(e("./collections/leagueCustomFields")),s(e("./collections/divisionLocations")),s(e("./collections/divisionMembers")),s(e("./collections/divisionMembersPreferences")),s(e("./collections/divisionTeamStandings")),s(e("./collections/events")),s(e("./collections/eventStatistics")),s(e("./collections/facebookPages")),s(e("./collections/forumPosts")),s(e("./collections/forumSubscriptions")),s(e("./collections/forumTopics")),s(e("./collections/leagueRegistrantDocuments")),s(e("./collections/locations")),s(e("./collections/memberAssignments")),s(e("./collections/memberBalances")),s(e("./collections/memberEmailAddresses")),s(e("./collections/memberFiles")),s(e("./collections/memberLinks")),s(e("./collections/memberPayments")),s(e("./collections/memberPhoneNumbers")),s(e("./collections/memberPhotos")),s(e("./collections/membersPreferences")),s(e("./collections/memberStatistics")),s(e("./collections/members")),s(e("./collections/messageData")),s(e("./collections/messages")),s(e("./collections/opponents")),s(e("./collections/opponentsResults")),s(e("./collections/paymentNotes")),s(e("./collections/plans")),s(e("./collections/sponsors")),s(e("./collections/sports")),s(e("./collections/statisticAggregates")),s(e("./collections/statistics")),s(e("./collections/statisticData")),s(e("./collections/statisticGroups")),s(e("./collections/teamFees")),s(e("./collections/teamMedia")),s(e("./collections/teamMediumComments")),s(e("./collections/teamMediaGroups")),s(e("./collections/teamPublicSites")),s(e("./collections/teamsPaypalPreferences")),s(e("./collections/teamPhotos")),s(e("./collections/teamsPreferences")),s(e("./collections/teamsResults")),s(e("./collections/teamStatistics")),s(e("./collections/trackedItems")),s(e("./collections/trackedItemStatuses")),s(e("./collections/users")),c=function(t,e){var n,r,i;r={};for(n in t)h.call(t,n)&&(i=t[n],"function"!=typeof i&&"_"!==n.charAt(0)&&(r[n]=i));for(n in e)h.call(e,n)&&(i=e[n],"function"==typeof i||t.hasOwnProperty(n)||(r[n]=i));return r}}),t.register("teamsnap",function(t,e,n){var r,i,o,s,a;s=e("./promises"),a=e("./model"),r=a.Collection,i=a.Item,e("./errors"),o=function(){function t(t,e){this.apiUrl=null!=t?t:"https://apiv3.teamsnap.com",this.authUrl=null!=e?e:"https://auth.teamsnap.com"}return t.prototype.version="1.15.4",t.prototype.promises=s,t.prototype.when=s.when,t.prototype.TeamSnap=t,t.prototype.Collection=r,t.prototype.Item=i,t}(),n.exports=new o,e("./auth"),e("./sdk"),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")})}),t.register("types",function(t,e,n){var r,i,o,s,a,u,c,l,f,m;for(c=t,m=["user","assignment","availability","broadcastAlert","broadcastEmail","broadcastEmailAttachment","contact","contactEmailAddress","contactPhoneNumber","customDatum","customField","leagueCustomDatum","leagueCustomField","divisionContact","divisionContactEmailAddress","divisionContactPhoneNumber","divisionLocation","divisionMember","divisionMemberEmailAddress","divisionMemberPhoneNumber","divisionMemberPreferences","divisionTeamStanding","event","eventStatistic","facebookPage","forumPost","forumSubscription","forumTopic","leagueRegistrantDocument","location","member","memberAssignment","memberBalance","memberEmailAddress","memberFile","memberLink","memberPayment","memberPhoneNumber","memberPhoto","memberPreferences","memberStatistic","message","messageDatum","opponent","opponentResults","paymentNote","plan","smsGateway","sponsor","statistic","statisticAggregate","statisticDatum","statisticGroup","sport","team","teamFee","teamMedium","teamMediumComment","teamMediaGroup","teamPaypalPreferences","teamPhoto","teamPreferences","teamPublicSite","teamResults","teamStatistic","timeZone","trackedItem","trackedItemStatus"],u=m.slice(),u.remove=function(t){var e;return e=this.indexOf(t),-1!==e&&this.splice(e,1),this},u.remove("user").remove("plan").remove("smsGateway").remove("sport").remove("timeZone"),f={},a={},s={memberPreferences:"membersPreferences",divisionMemberPreferences:"divisionMembersPreferences",opponentResults:"opponentsResults",statisticDatum:"statisticData",messageDatum:"messageData",teamMedium:"teamMedia",teamPaypalPreferences:"teamsPaypalPreferences",teamPreferences:"teamsPreferences",teamResults:"teamsResults",customDatum:"customData",leagueCustomDatum:"leagueCustomData",smsGateway:"smsGateways"},r=0,i=m.length;i>r;r++)l=m[r],o=s[l]||function(){switch(l.slice(-1)){case"y":return l.slice(0,-1)+"ies";case"s":return l+"es";default:return l+"s"}}(),f[l]=l,f[o]=l,a[o]=l,s[l]=o;c.isPluralType=function(t){return a.hasOwnProperty(t)},c.isSingularType=function(t){return s.hasOwnProperty(t)},c.hasType=function(t){return void 0!==f[t]},c.getTypes=function(){return m.slice()},c.getTeamTypes=function(){return u.slice()},c.getPluralType=function(t){return s[t]},c.getSingularType=function(t){return a[t]},c.getType=function(t){return f[t]},c.camelcaseType=function(t){return t.replace(/[-_]+(\w)/g,function(t,e){return e.toUpperCase()})},c.underscoreType=function(t){return t.replace(/[A-Z]/g,function(t){return"_"+t.toLowerCase()})}}),global.teamsnap=t("teamsnap")}();