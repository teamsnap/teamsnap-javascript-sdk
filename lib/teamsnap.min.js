!function(){var window,global={};!function(){"use strict";var e="undefined"==typeof window?global:window;if("function"!=typeof e.require){var t={},r={},n={},s={}.hasOwnProperty,i=/^\.\.?(\/|$)/,o=function(e,t){for(var r,n=[],s=(i.test(t)?e+"/"+t:t).split("/"),o=0,a=s.length;o<a;o++)r=s[o],".."===r?n.pop():"."!==r&&""!==r&&n.push(r);return n.join("/")},a=function(e){return e.split("/").slice(0,-1).join("/")},m=function(t){return function(r){var n=o(a(t),r);return e.require(n,t)}},u=function(e,t){var n=null;n=v&&v.createHot(e);var s={id:e,exports:{},hot:n};return r[e]=s,t(s.exports,m(e),s),s.exports},c=function(e){return n[e]?c(n[e]):e},l=function(e,t){return c(o(a(e),t))},d=function(e,n){null==n&&(n="/");var i=c(e);if(s.call(r,i))return r[i].exports;if(s.call(t,i))return u(i,t[i]);throw new Error("Cannot find module '"+e+"' from '"+n+"'")};d.alias=function(e,t){n[t]=e};var f=/\.[^.\/]+$/,p=/\/index(\.[^\/]+)?$/,h=function(e){if(f.test(e)){var t=e.replace(f,"");s.call(n,t)&&n[t].replace(f,"")!==t+"/index"||(n[t]=e)}if(p.test(e)){var r=e.replace(p,"");s.call(n,r)||(n[r]=e)}};d.register=d.define=function(e,n){if("object"==typeof e)for(var i in e)s.call(e,i)&&d.register(i,e[i]);else t[e]=n,delete r[e],h(e)},d.list=function(){var e=[];for(var r in t)s.call(t,r)&&e.push(r);return e};var v=e._hmr&&new e._hmr(l,d,t,r);d._cache=r,d.hmr=v&&v.wrap,d.brunch=!0,e.require=d}}();var e=global.require;global=this,global.window&&(window=this),e.register("auth.coffee",function(e,t,r){var n,s,i,o,a,m,u,c,l,d,f,p;n=t("./teamsnap").TeamSnap,d=t("./promises"),f=t("./request"),c="application/json",a="application/vnd.collection+json",l="multipart/form-data",i="teamsnap.authToken",s=f.create().hook(function(e,t){return e.setRequestHeader("Accept",c),t&&e.setRequestHeader("Content-Type",c),e.withCredentials=!0}),p=f.create().hook(function(e,t){return e.setRequestHeader("Accept",a),!t||t instanceof FormData||e.setRequestHeader("Content-Type",a),e.withCredentials=!0}),u=function(e,t){var r,n,s,i;n=[];for(r in t)i=t[r],i&&n.push(r+"="+encodeURIComponent(i));return s=teamsnap.authUrl+"/oauth/"+e,n.length&&(s=s+"?"+n.join("&")),s.replace(/%20/g,"+")},n.prototype.auth=function(e,t){var r,n;if(this.features=(null!=t?t.features:void 0)||{},"function"==typeof e?(n=e,e=null):"object"==typeof e&&(n=r,r=e,e=null),"function"==typeof r&&(n=r,r=null),this.request=p.clone(),"number"==typeof e&&teamsnap.apiUrl.indexOf(":3000")!==-1)return this.request.hook(function(t){return t.setRequestHeader("X-Teamsnap-User-ID",e)}),this;if(e||(e=o()),!e)throw new TSArgsError("teamsnap.auth","A token is required to auth unless in the browser it has been cached");return this.request.hook(function(r){var n,s,i,o,a,m;if(r.setRequestHeader("Authorization","Bearer "+e),null!=t&&null!=(o=t.optionalRequestHeaders)?o.length:void 0){for(a=t.optionalRequestHeaders,m=[],n=0,s=a.length;n<s;n++)i=a[n],m.push(r.setRequestHeader(i.headerName,i.headerValue));return m}}),this},n.prototype.deleteAuth=function(){return this.request=null},n.prototype.isAuthed=function(){return!!this.request},n.prototype.hasSession=function(){return!!o()},n.prototype.browserLogout=function(){if(m(teamsnap.authUrl+"/logout"),this.isAuthed)return this.deleteAuth()},n.prototype.init=function(e,t){var r,n,i;return r=function(t,r,n){return n=Array.isArray(n)?n.join(" "):n,u("authorize",{response_type:t,client_id:e,redirect_uri:r,scope:n})},i=function(r){return u("token",{grant_type:"authorization_code",code:r,client_id:e,client_secret:t})},n=function(r,n){return u("token",{grant_type:"password",username:r,password:n,client_id:e,client_secret:t})},this.getServerAuthUrl=function(e,t){return r("code",e,t)},this.getServerTokenUrl=function(e){return i(e)},this.getBrowserAuthUrl=function(e,t){return r("token",e,t)},this.getPasswordAuthUrl=function(e,t){return n(e,t)},this.createDialog=function(e,t){return m(e,t)},this.finishServerAuth=function(e,t){return s.post(this.getServerTokenUrl(e),t)},this.startBrowserAuth=function(e,t,r){if("file:"===location.protocol)throw new TSError("TeamSnap.js cannot auth from the file system");return this.createDialog(this.getBrowserAuthUrl(e,t)).then(function(e){return function(t){var r;return r=t.access_token,o(r),e.auth(r)}}(this)).callback(r)},this.startPasswordAuth=function(e,t,r){return s.post(this.getPasswordAuthUrl(e,t),r)}},o=function(e){if(global.sessionStorage)return 0===arguments.length?sessionStorage.getItem(i):void sessionStorage.setItem(i,e)},m=function(e,t){var r,n,s,i,o,a,m,u,c,l,f;return m=860,s=720,r=d.defer(),l=window.screenLeft||window.screenX,f=window.screenTop||window.screenY,c=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,u=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,o=l+(c-m)/2,a=f+(u-s)/2,n=window.open(e,"oauth","menubar=no,scrollbars=no,status=no,toolbar=no,width="+m+",height="+s+",left="+o+",top="+a),i=setInterval(function(){var e,t,s;try{if(n.closed&&(clearInterval(i),r.reject({error:"access_denied",error_description:"The resource owner denied the request."})),n.location.host!==location.host)return;t=n.location.hash.replace(/^#/,"")||n.location.search.replace(/^\?/,"")}catch(o){return void(e=o)}return clearInterval(i),n.close(),s={},t.split("&").forEach(function(e){var t,r,n;return r=e.split("="),t=r[0],n=r[1],s[decodeURIComponent(t)]=decodeURIComponent(n.replace(/\+/g," "))}),s.error?r.reject(s):r.resolve(s)},50),r.promise.callback(t)}}),e.register("collections/advertisements.coffee",function(e,t,r){e.loadAdvertisements=function(e,t){if(this.isId(e))e={teamId:e};else if(!e||"object"!=typeof e)throw new TSArgsError("teamsnap.loadAdvertisements","must provide a teamId or query parameters");return this.loadItems("advertisement",e,t)}}),e.register("collections/assignments.coffee",function(e,t,r){e.EVENT_SETS=["future_games_and_events","future_games","future_events"],e.loadAssignments=function(e,t){if(this.isId(e))e={teamId:e};else if(!e||"object"!=typeof e)throw new TSArgsError("teamsnap.loadAssignments","must provide a teamId or query parameters");return this.loadItems("assignment",e,t)},e.createAssignment=function(e){return this.createItem(e,{type:"assignment",description:""})},e.saveAssignment=function(e,t){var r;if(!e)throw new TSArgsError("teamsnap.saveAssignment","`assignment` must be provided");if(!this.isItem(e,"assignment"))throw new TSArgsError("teamsnap.saveAssignment","`assignment.type` must be 'assignment'");return e.eventId?(null!=(r=e.description)?r.trim():void 0)?this.saveItem(e,t):this.reject("You must provide a description for the assignment.","name",t):this.reject("You must choose an event.","eventId",t)},e.deleteAssignment=function(e,t){if(!e)throw new TSArgsError("teamsnap.deleteAssignment","`assignment` must be provided");return this.deleteItem(e,t)},e.getAssignmentSort=function(e){return function(t){return function(r,n){var s,i;return t.isItem(r,"assignment")&&t.isItem(n,"assignment")?(s=t.memberName(r.member,e).toLowerCase(),i=t.memberName(n.member,e).toLowerCase()):(s=r.type,i=n.type),"function"==typeof(null!=s?s.localeCompare:void 0)?s.localeCompare(i):s===i?0:!s&&i?1:s&&!i?-1:s>i?1:s<i?-1:0}}(this)},e.sendAssignmentEmails=function(e,t,r,n,s){var i;if(!this.isId(e))throw new TSArgsError("teamsnap.sendAssignmentEmails","must provide a `teamId`");if(!t)throw new TSArgsError("teamsnap.sendAssignmentEmails","must provide `eventIds`");if(this.isItem(t)&&(t=t.id),!this.isId(n))throw new TSArgsError("teamsnap.sendAssignmentEmails","must provide a `sendingMemberId`");return i={teamId:e,eventIds:t,message:r,sendingMemberId:n},this.collections.assignments.exec("sendAssignmentEmails",i,s)},e.reorderAssignments=function(e,t,r){var n;if(!this.isId(e))throw new TSArgsError("teamsnap.reorderAssignments","`eventId` must be provided");if(!t||!Array.isArray(t))throw new TSArgsError("teamsnap.reorderAssignments","You must provide an array of ordered Assignments IDs");return n={eventId:e,sortedIds:t},this.collections.assignments.exec("reorderAssignments",n).callback(r)},e.createBulkAssignments=function(e,t,r,n,s){var i;if(!(this.EVENT_SETS.indexOf(e)>-1))throw new TSArgsError("teamsnap.createBulkAssignments"," `eventSet` must be one of the following: "+this.EVENT_SETS.toString()+".");if(!t.trim())return this.reject("You must provide a description for the assignments.","description",s);if(!r)throw new TSArgsError("teamsnap.createBulkAssignments","`teamId` must be provided.");if(this.isItem(r,"team")&&{teamId:r.id},!n)throw new TSArgsError("teamsnap.createBulkAssignments","`createAsMemberId` must be provided.");return this.isItem(n,"member")&&{createAsMemberId:n.id},i={eventSet:e,description:t,teamId:r,createAsMemberId:n},this.collections.assignments.exec("createBulkAssignments",i,s)}}),e.register("collections/availabilities.coffee",function(e,t,r){var n,s,i,o;e.AVAILABILITIES={NONE:null,NO:0,YES:1,MAYBE:2},i={},s=e.AVAILABILITIES;for(n in s)o=s[n],i[o]=!0;e.loadAvailabilities=function(e,t){if(this.isId(e))e={teamId:e};else if(!e||"object"!=typeof e)throw new TSArgsError("teamsnap.loadAvailabilities","must provide a teamId or query parameters");return this.loadItems("availability",e,t)},e.saveAvailability=function(e,t){if(!e)throw new TSArgsError("teamsnap.saveAvailability","`availability` must be provided");if(!this.isItem(e,"availability"))throw new TSArgsError("teamsnap.saveAvailability","`type` must be 'availability'");return null===e.statusCode||i[e.statusCode]?this.saveItem(e,t):this.reject("You must select a valid status or null","statusCode",t)},e.bulkMarkUnsetAvailabilities=function(e,t,r){var n;if(!this.isId(e))throw new TSArgsError("teamsnap.bulkMarkUnsetAvailabilities","must provide a `memberId`");return null!=t&&i[t]?(n={memberId:e,statusCode:t},this.collections.availabilities.exec("bulkMarkUnsetAvailabilities",n).pop().callback(r)):this.reject("You must select a valid status","statusCode",r)}}),e.register("collections/batchInvoiceLineItems.coffee",function(e,t,r){e.loadBatchInvoiceLineItems=function(e,t){if(!e||"object"!=typeof e)throw new TSArgsError("teamsnap.loadBatchInvoiceLineItems","must provide query parameters");return this.loadItems("batchInvoiceLineItem",e,t)},e.createBatchInvoiceLineItem=function(e){return this.createItem(e,{type:"batchInvoiceLineItem"})},e.saveBatchInvoiceLineItem=function(e,t){if(!e)throw new TSArgsError("teamsnap.saveBatchInvoiceLineItem","`batchInvoiceLineItem` must be provided");if(!this.isItem(e,"batchInvoiceLineItem"))throw new TSArgsError("teamsnap.saveBatchInvoiceLineItem","`batchInvoiceLineItem.type` must be 'batchInvoiceLineItem'");return e.batchInvoiceId?e.quantity?e.amount?this.saveItem(e,t):this.reject("You must provide an amount.","amount",t):this.reject("You must provide a quantity.","quantity",t):this.reject("You must choose a batchInvoiceId.","batchInvoiceId",t)},e.deleteBatchInvoiceLineItem=function(e,t){if(!e)throw new TSArgsError("teamsnap.deleteBatchInvoiceLineItem","`batchInvoiceLineItem` must be provided");return this.deleteItem(e,t)}}),e.register("collections/batchInvoices.coffee",function(e,t,r){e.loadBatchInvoices=function(e,t){if(!e||"object"!=typeof e)throw new TSArgsError("teamsnap.loadBatchInvoices","must provide a query parameters");return this.loadItems("batchInvoice",e,t)},e.createBatchInvoice=function(e){return this.createItem(e,{type:"batchInvoice"})},e.saveBatchInvoice=function(e,t){var r;if(!e)throw new TSArgsError("teamsnap.saveBatchInvoice","`batchInvoice` must be provided");if(!this.isItem(e,"batchInvoice"))throw new TSArgsError("teamsnap.saveBatchInvoice","`batchInvoice.type` must be 'batchInvoice'");return e.divisionId?(null!=(r=e.description)?r.trim():void 0)?this.saveItem(e,t):this.reject("You must provide a description for the batchInvoice.","description",t):this.reject("You must provide a division.","divisionId",t)},e.deleteBatchInvoice=function(e,t){if(!e)throw new TSArgsError("teamsnap.deleteBatchInvoice","`batchInvoice` must be provided");return this.deleteItem(e,t)}}),e.register("collections/broadcastAlerts.coffee",function(e,t,r){e.loadBroadcastAlerts=function(e,t){if(this.isId(e))e={teamId:e};else if(!e||"object"!=typeof e)throw new TSArgsError("teamsnap.loadBroadcastAlerts","must provide a teamId or query parameters");return this.loadItems("broadcastAlert",e,t)},e.createBroadcastAlert=function(e){return this.createItem(e,{type:"broadcastAlert"})},e.saveBroadcastAlert=function(e,t){var r;if(!e)throw new TSArgsError("teamsnap.saveBroadcastAlert","`broadcastAlert` must be provided");if(!this.isItem(e,"broadcastAlert"))throw new TSArgsError("teamsnap.saveBroadcastAlert","`type` must be 'broadcastAlert'");return e.teamId?e.memberId?(null!=(r=e.body)?r.trim():void 0)?this.saveItem(e,t):this.reject("You must provide the text alert body.","body",t):this.reject("You must provide a member id.","memberId",t):this.reject("You must provide a team id.","teamId",t)},e.deleteBroadcastAlert=function(e,t){if(!e)throw new TSArgsError("teamsnap.deleteBroadcastAlert","`broadcastAlert` must be provided");return this.deleteItem(e,t)}}),e.register("collections/broadcastEmailAttachments.coffee",function(e,t,r){e.loadBroadcastEmailAttachments=function(e,t){if(this.isId(e))e={teamId:e};else if(!e||"object"!=typeof e)throw new TSArgsError("teamsnap.loadBroadcastEmailAttachments","must provide a teamId or query parameters");return this.loadItems("broadcastEmailAttachment",e,t)},e.deleteBroadcastEmailAttachment=function(e,t){if(!e)throw new TSArgsError("teamsnap.deleteBroadcastEmailAttachment","`broadcastEmailAttachment` must be provided");return this.deleteItem(e,t)},e.uploadBroadcastEmailAttachment=function(e,t,r,n,s){var i;if("undefined"==typeof FormData&&this.reject("Your browser does not support the new file upload APIs.","file",s),!e)throw new TSArgsError("teamsnap.uploadBroadcastEmailAttachment","broadcastEmailId is required");if(!(r instanceof File))throw new TSArgsError("teamsnap.uploadBroadcastEmailAttachment","must include `file` as type File","file is required");if(!t)throw new TSArgsError("teamsnap.uploadBroadcastEmailAttachment","memberId is required");return i={broadcastEmailId:e,file:r,memberId:t},this.collections.broadcastEmailAttachments.file("uploadBroadcastEmailAttachment",i,n,s)}}),e.register("collections/broadcastEmails.coffee",function(e,t,r){e.loadBroadcastEmails=function(e,t){if(this.isId(e))e={teamId:e};else if(!e||"object"!=typeof e)throw new TSArgsError("teamsnap.loadBroadcastEmails","must provide a teamId or query parameters");return this.loadItems("broadcastEmail",e,t)},e.createBroadcastEmail=function(e){return this.createItem(e,{type:"broadcastEmail"})},e.saveBroadcastEmail=function(e,t){var r;if(!e)throw new TSArgsError("teamsnap.saveBroadcastEmail","`broadcastEmail` must be provided");if(!this.isItem(e,"broadcastEmail"))throw new TSArgsError("teamsnap.saveBroadcastEmail","`type` must be 'broadcastEmail'");if(e.isLeague){if(!e.divisionId)return reject("You must provide a division id.","divisionId",t)}else if(!e.teamId)return this.reject("You must provide a team id.","teamId",t);return e.memberId?(null!=(r=e.body)?r.trim():void 0)?e.isDraft||e.isLeague||Array.isArray(e.recipientIds)&&e.recipientIds.length>0?this.saveItem(e,t):this.reject("You must provide at least one recipient.","recipientIds"):this.reject("You must provide the text alert body.","body",t):this.reject("You must provide a member id.","memberId",t)},e.deleteBroadcastEmail=function(e,t){if(!e)throw new TSArgsError("teamsnap.deleteBroadcastEmail","`broadcastEmail` must be provided");return this.deleteItem(e,t)},e.bulkDeleteBroadcastEmails=function(e,t){if(!Array.isArray(e))throw new TSArgsError("teamsnap.broadcastEmailIds","You must provide an array of broadcastEmail IDs");return this.collections.broadcastEmails.exec("bulkDelete",{id:e},t)}}),e.register("collections/contactEmailAddresses.coffee",function(e,t,r){e.loadContactEmailAddresses=function(e,t){if(this.isId(e))e={teamId:e};else if(!e||"object"!=typeof e)throw new TSArgsError("teamsnap.loadContactEmailAddresses","must provide a teamId or query parameters");return this.loadItems("contactEmailAddress",e,t)},e.createContactEmailAddress=function(e){return this.createItem(e,{type:"contactEmailAddress",receivesTeamEmails:!0})},e.saveContactEmailAddress=function(e,t){if(!e)throw new TSArgsError("teamsnap.saveContactEmailAddress","`contactEmailAddress` must be provided");if(!this.isItem(e,"contactEmailAddress"))throw new TSArgsError("teamsnap.saveContactEmailAddress","`contactEmailAddress.type` must be 'contactEmailAddress'");return e.contactId?this.saveItem(e,t):this.reject("You must choose a contact.","contactId",t)},e.deleteContactEmailAddress=function(e,t){if(!e)throw new TSArgsError("teamsnap.deleteContactEmailAddress","`contactEmailAddress` must be provided");return this.deleteItem(e,t)},e.inviteContactEmailAddresses=function(e,t){if(!e||"object"!=typeof e)throw new TSArgsError("teamsnap.inviteContactEmailAddresses","must provide a params object");if(!e.teamId)throw new TSArgsError("teamsnap.inviteContactEmailAddresses","params.teamId is required.");if(!e.memberId)throw new TSArgsError("teamsnap.inviteContactEmailAddresses","params.memberId is required.");if(!e.contactEmailAddressIds)throw new TSArgsError("teamsnap.inviteContactEmailAddresses","params.contactEmailAddressIds is required.");return this.collections.contactEmailAddresses.exec("invite",e,t)}}),e.register("collections/contactPhoneNumbers.coffee",function(e,t,r){e.loadContactPhoneNumbers=function(e,t){if(this.isId(e))e={teamId:e};else if(!e||"object"!=typeof e)throw new TSArgsError("teamsnap.loadContactPhoneNumbers","must provide a teamId or query parameters");return this.loadItems("contactPhoneNumber",e,t)},e.createContactPhoneNumber=function(e){return this.createItem(e,{type:"contactPhoneNumber"})},e.saveContactPhoneNumber=function(e,t){if(!e)throw new TSArgsError("teamsnap.saveContactPhoneNumber","`contactPhoneNumber` must be provided");if(!this.isItem(e,"contactPhoneNumber"))throw new TSArgsError("teamsnap.saveContactPhoneNumber","`contactPhoneNumber.type` must be 'contactPhoneNumber'");return e.contactId?this.saveItem(e,t):this.reject("You must choose a contact.","contactId",t)},e.deleteContactPhoneNumber=function(e,t){if(!e)throw new TSArgsError("teamsnap.deleteContactPhoneNumber","`contactPhoneNumber` must be provided");return this.deleteItem(e,t)}}),e.register("collections/contacts.coffee",function(e,t,r){e.loadContacts=function(e,t){if(this.isId(e))e={teamId:e};else if(!e||"object"!=typeof e)throw new TSArgsError("teamsnap.loadContacts","must provide a teamId or query parameters");return this.loadItems("contact",e,t)},e.createContact=function(e){return this.createItem(e,{type:"contact"})},e.saveContact=function(e,t){var r;if(!e)throw new TSArgsError("teamsnap.saveContact","`contact` must be provided");if(!this.isItem(e,"contact"))throw new TSArgsError("teamsnap.saveContact","`contact.type` must be 'contact'");return e.memberId?(null!=(r=e.firstName)?r.trim():void 0)?this.saveItem(e,t):this.reject("You must provide a firstName for the contact.","name",t):this.reject("You must choose a member.","memberId",t)},e.deleteContact=function(e,t){if(!e)throw new TSArgsError("teamsnap.deleteContact","`contact` must be provided");return this.deleteItem(e,t)}}),e.register("collections/customData.coffee",function(e,t,r){e.loadCustomData=function(e,t){if(this.isId(e))e={teamId:e};else if(!e||"object"!=typeof e)throw new TSArgsError("teamsnap.loadCustomData","must provide a teamId or query parameters");return this.loadItems("customDatum",e,t)},e.createCustomDatum=function(e,t){return this.createItem(e,{type:"customDatum",customFieldId:t.id,kind:t.kind,name:t.name,isPrivate:!1,value:null})},e.saveCustomDatum=function(e,t){if(!e)throw new TSArgsError("teamsnap.saveCustomField","`customDatum` must be provided");if(!this.isItem(e,"customDatum"))throw new TSArgsError("teamsnap.saveCustomField","`customDatum.type` must be 'customDatum'");return this.saveItem(e,t)}}),e.register("collections/customFields.coffee",function(e,t,r){e.loadCustomFields=function(e,t){if(this.isId(e))e={teamId:e};else if(!e||"object"!=typeof e)throw new TSArgsError("teamsnap.loadCustomFields","must provide a teamId or query parameters");return this.loadItems("customField",e,t)},e.createCustomField=function(e){return this.createItem(e,{type:"customField"})},e.saveCustomField=function(e,t){if(!e)throw new TSArgsError("teamsnap.saveCustomField","`customField` must be provided");if(!this.isItem(e,"customField"))throw new TSArgsError("teamsnap.saveCustomField","`customField.type` must be 'customField'");return e.teamId?e.name?e.kind?this.saveItem(e,t):this.reject("You must choose a type.","kind",t):this.reject("You must enter a name.","name",t):this.reject("You must choose a team.","teamId",t)},e.deleteCustomField=function(e,t){if(!e)throw new TSArgsError("teamsnap.deleteCustomField","`customField` must be provided");return this.deleteItem(e,t)}}),e.register("collections/divisionAggregates.coffee",function(e,t,r){e.loadDivisionAggregates=function(e,t){if(this.isId(e)||Array.isArray(e))e={divisionId:e};else if(!e||"object"!=typeof e)throw new TSArgsError("teamsnap.loadDivisionAggregates","must provide divisionId or query parameters");return this.loadItems("divisionAggregate",e,t)}}),e.register("collections/divisionEvents.coffee",function(e,t,r){e.loadDivisionEvents=function(e,t){if(this.isId(e))e={divisionId:e};else if(!e||"object"!=typeof e)throw new TSArgsError("teamsnap.loadDivisionEvents","must provide a divisionId or query parameters");return this.loadItems("divisionEvent",e,t)}}),e.register("collections/divisionLocations.coffee",function(e,t,r){e.loadDivisionLocations=function(e,t){if(this.isId(e))e={teamId:e};else if(!e||"object"!=typeof e)throw new TSArgsError("teamsnap.loadDivisionLocations","must provide a teamId or query parameters");return this.loadItems("divisionLocation",e,t)}}),e.register("collections/divisionMembers.coffee",function(e,t,r){e.loadDivisionMembers=function(e,t){if(this.isId(e))e={teamId:e};else if(!e||"object"!=typeof e)throw new TSArgsError("teamsnap.loadDivisionMembers","must provide a teamId or query parameters");return this.loadItems("divisionMember",e,t)}}),e.register("collections/divisionMembersPreferences.coffee",function(e,t,r){e.PREFS={SCHEDULE_SHOW:{ALL:1,GAMES:2,EVENTS:3}},e.loadDivisionMembersPreferences=function(e,t){if(this.isId(e))e={teamId:e};else if(!e||"object"!=typeof e)throw new TSArgsError("teamsnap.loadDivisionMembersPreferences","must provide a teamId or query parameters");return this.loadItems("divisionMemberPreferences",e,t)},e.loadDivisionMemberPreferences=function(e,t){if(this.isId(e))e={teamId:e};else if(!e||"object"!=typeof e)throw new TSArgsError("teamsnap.loadDivisionMemberPreferences","must provide a teamId or query parameters");return this.loadItem("divisionMemberPreferences",e,t)},e.saveDivisionMemberPreferences=function(e,t){if(!e)throw new TSArgsError("teamsnap.saveDivisionMemberPreferences","`divisionMemberPreferences` must be provided");if(!this.isItem(e,"divisionMemberPreferences"))throw new TSArgsError("teamsnap.saveDivisionMemberPreferences","`divisionMemberPreferences.type` must be 'divisionMemberPreferences'");return this.saveItem(e,t)}}),e.register("collections/divisionTeamStandings.coffee",function(e,t,r){e.loadDivisionTeamStandings=function(e,t){var r;if(!this.isId(e))throw new TSArgsError("teamsnap.loadDivisionTeamStandings","must provide a teamId");return r={teamId:e},this.loadItems("divisionTeamStanding",r,t)}}),e.register("collections/divisions.coffee",function(e,t,r){e.loadDivisions=function(e,t){return null==e&&(e={}),"function"==typeof e&&(t=e,e={}),Object.keys(e).length?this.loadItems("division",e,t):this.loadMe().then(function(r){return function(n){return e.userId=n.id,r.loadItems("division",e,t)}}(this))},e.loadDivision=function(e,t){if(!this.isId(e))throw new TSArgsError("teamsnap.loadDivision","divisionId must be provided");return this.loadItem("division",{id:e},t)},e.createDivision=function(e){return this.createItem(e,{type:"division",name:""})},e.saveDivision=function(e,t){var r;if(!e)throw new TSArgsError("teamsnap.saveDivision","`division` must be provided");if(!this.isItem(e,"division"))throw new TSArgsError("teamsnap.saveDivision","`type` must be 'division'");return(null!=(r=e.name)?r.trim():void 0)?this.saveItem(e,t):this.reject("You must provide a name for the division.","name",t)},e.deleteDivision=function(e,t){if(!e)throw new TSArgsError("teamsnap.deleteDivision","`division` must be provided");return this.deleteItem(e,t)},e.loadAncestorDivisions=function(e,t){if(!this.isId(e))throw new TSArgsError("teamsnap.loadAncestorDivisions","divisionId must be provided");return this.collections.divisions.queryItems("ancestors",{id:e},t)},e.loadDescendantDivisions=function(e,t){if(!this.isId(e))throw new TSArgsError("teamsnap.loadDescendantDivisions","divisionId must be provided");return this.collections.divisions.queryItems("descendants",{id:e},t)},e.loadChildDivisions=function(e,t){if(!this.isId(e))throw new TSArgsError("teamsnap.loadChildDivisions","divisionId must be provided");return this.collections.divisions.queryItems("children",{id:e},t)},e.loadActiveTrialDivisions=function(e,t){if(!this.isId(e))throw new TSArgsError("teamsnap.loadActiveTrialsDivisions","userId must be provided");return this.collections.divisions.queryItems("activeTrials",{userId:e},t)}}),e.register("collections/divisionsPreferences.coffee",function(e,t,r){e.loadDivisionsPreferences=function(e,t){if(this.isId(e))e={divisionId:e};else if(!e||"object"!=typeof e)throw new TSArgsError("teamsnap.loadDivisionsPreferences","must provide a divisionId or query parameters");return this.loadItems("divisionPreferences",e,t)},e.loadDivisionPreferences=function(e,t){if(this.isId(e))e={divisionId:e};else if(!e||"object"!=typeof e)throw new TSArgsError("teamsnap.loadDivisionPreferences","must provide a divisionId or query parameters");return this.loadItem("divisionPreferences",e,t)},e.saveDivisionPreferences=function(e,t){if(!e)throw new TSArgsError("teamsnap.saveDivisionPreferences","`divisionPreferences` must be provided");if(!this.isItem(e,"divisionPreferences"))throw new TSArgsError("teamsnap.saveDivisionPreferences","`divisionPreferences.type` must be 'divisionPreferences'");return this.saveItem(e,t)}}),e.register("collections/eventStatistics.coffee",function(e,t,r){e.loadEventStatistics=function(e,t){if(this.isId(e))e={teamId:e};else if(!e||"object"!=typeof e)throw new TSArgsError("teamsnap.loadEventStatistics","must provide a teamId or query parameters");return this.loadItems("eventStatistic",e,t)}}),e.register("collections/events.coffee",function(e,t,r){var n,s,i,o;e.EVENTS={NONE:"none",FUTURE:"future",ALL:"all"},e.REMINDERS={ALL:"all",UNSET:"unset"},n={},i=e.EVENTS;for(s in i)o=i[s],n[o]=!0;e.loadEvents=function(e,t){if(this.isId(e))e={teamId:e};else if(!e||"object"!=typeof e)throw new TSArgsError("teamsnap.loadEvents","must provide a teamId or query parameters");return this.loadItems("event",e,t)},e.createEvent=function(e){return this.createItem(e,{type:"event",isGame:!1,tracksAvailability:!0})},e.saveEvent=function(e,t){var r,n;if(!e)throw new TSArgsError("teamsnap.saveEvent","`event` must be provided");if(!this.isItem(e,"event"))throw new TSArgsError("teamsnap.saveEvent","`event.type` must be 'event'");return e.isGame||(null!=(r=e.name)?r.trim():void 0)?e.teamId?e.locationId||e.divisionLocationId?e.isGame&&!e.opponentId?this.reject("You must choose an opponent.","opponentId",t):isNaN(null!=(n=e.startDate)?n.getTime():void 0)?this.reject("You must provide a valid start date.","startDate",t):e.notifyTeam&&!e.notifyTeamAsMemberId?this.reject("You must provide the current member's id.","notifyTeamAsMemberId",t):this.saveItem(e,t):this.reject("You must choose a location.","locationId",t):this.reject("You must choose a team.","teamId",t):this.reject("You must provide a name.","name",t)},e.deleteEvent=function(e,t,r,s,i){var o;if(o={},!e)throw new TSArgsError("teamsnap.deleteEvent","`event` must be provided");if("function"==typeof t&&(i=t,t=null),!t&&e.repeatingUuid&&(t=this.EVENTS.NONE),t){if(!n[t])throw new TSArgsError("teamsnap.deleteEvent","`include` must be one of "+Object.keys(n).join(", "));o.repeatingInclude=t}if(r){if(o.notifyTeam=r,!s)throw new TSArgsError("teamsnap.deleteEvent","`notifyTeamAsMemberId` must be provided");o.notifyTeamAsMemberId=s}return this.deleteItem(e,o,i)},e.sendAvailabilityReminders=function(e,t,r){var n;if(r||(r=[]),this.isItem(e,"event")&&(e=e.id),this.isItem(t,"member")?t=t.id:this.isItem(t,"divisionMember")&&(t=t.id),!this.isId(e))throw new TSArgsError("teamsnap.sendAvailabilityReminders","must include id `eventId`");if(!this.isId(t))throw new TSArgsError("teamsnap.sendAvailabilityReminders","must include id `sendingMemberId`");if(!Array.isArray(r))throw new TSArgsError("teamsnap.sendAvailabilityReminders","`include` must be an array of member ids");if(null==r||0===r.length)throw new TSArgsError("teamsnap.sendAvailabilityReminders","`include` must be an array of member ids");return n={id:e,membersToNotify:r,notifyTeamAsMemberId:t},this.collections.events.exec("sendAvailabilityReminders",n)},e.getEventSort=function(){return function(e){return function(t,r){var n,s;return e.isItem(t,"event")&&e.isItem(r,"event")?(n=t.startDate,s=r.startDate):(n=t.type,s=r.type),n>s?1:n<s?-1:0}}(this)},e.bulkCreateEvents=function(e,t){var r;if(!e.teamId)return this.reject("You must choose a team.","teamId",t);if(!Array.isArray(e.events))throw new TSArgsError("teamsnap.bulkCreateEvents","`events` must be an array of events");return r={templates:e.events,teamId:e.teamId,notifyTeamAsMemberId:e.sendingMemberId,notifyTeam:e.notifyTeam},this.collections.events.exec("bulkCreate",r,t)}}),e.register("collections/facebookPages.coffee",function(e,t,r){e.loadFacebookPages=function(e){var t;return t={},this.loadItems("facebookPage",t,e)}}),e.register("collections/forecasts.coffee",function(e,t,r){e.loadForecasts=function(e,t){if(this.isId(e))e={teamId:e};else if(!e||"object"!=typeof e)throw new TSArgsError("teamsnap.loadForecasts","must provide a teamId or query parameters");return this.loadItems("forecast",e,t)}}),e.register("collections/forumPosts.coffee",function(e,t,r){e.loadForumPosts=function(e,t){if(this.isId(e))e={teamId:e};else if(!e||"object"!=typeof e)throw new TSArgsError("teamsnap.loadForumPosts","must provide a teamId or query parameters");return this.loadItems("forumPost",e,t)},e.createForumPost=function(e){return this.createItem(e,{type:"forumPost"})},e.saveForumPost=function(e,t){var r;if(!e)throw new TSArgsError("teamsnap.saveForumPost","`forumPost` must be provided");if(!this.isItem(e,"forumPost"))throw new TSArgsError("teamsnap.saveForumPost","`type` must be 'forumPost'");return e.forumTopicId?e.memberId?(null!=(r=e.message)?r.trim():void 0)?this.saveItem(e,t):this.reject("You must provide a message for the forum post.","message",t):this.reject("You must provide a member id.","memberId",t):this.reject("You must provide a forum topic id.","forumTopicId",t)},e.deleteForumPost=function(e,t){if(!e)throw new TSArgsError("teamsnap.deleteForumPost","`forumPost` must be provided");return this.deleteItem(e,t)}}),e.register("collections/forumSubscriptions.coffee",function(e,t,r){e.loadForumSubscriptions=function(e,t){if(this.isId(e))e={teamId:e};else if(!e||"object"!=typeof e)throw new TSArgsError("teamsnap.loadForumSubscriptions","must provide a teamId or query parameters");return this.loadItems("forumSubscription",e,t)},e.createForumSubscription=function(e){return this.createItem(e,{type:"forumSubscription"})},e.saveForumSubscription=function(e,t){if(!e)throw new TSArgsError("teamsnap.saveForumSubscription","`forumSubscription` must be provided");if(!this.isItem(e,"forumSubscription"))throw new TSArgsError("teamsnap.saveForumSubscription","`type` must be 'forumSubscription'");
return e.forumTopicId?e.memberId?this.saveItem(e,t):this.reject("You must provide a member id.","memberId",t):this.reject("You must provide a forum topic id.","forumTopicId",t)},e.deleteForumSubscription=function(e,t){if(!e)throw new TSArgsError("teamsnap.deleteForumSubscription","`forumSubscription` must be provided");return this.deleteItem(e,t)}}),e.register("collections/forumTopics.coffee",function(e,t,r){e.loadForumTopics=function(e,t){if(this.isId(e))e={teamId:e};else if(!e||"object"!=typeof e)throw new TSArgsError("teamsnap.loadForumTopics","must provide a teamId or query parameters");return this.loadItems("forumTopic",e,t)},e.createForumTopic=function(e){return this.createItem(e,{type:"forumTopic"})},e.saveForumTopic=function(e,t){var r;if(!e)throw new TSArgsError("teamsnap.saveForumTopic","`forumTopic` must be provided");if(!this.isItem(e,"forumTopic"))throw new TSArgsError("teamsnap.saveForumTopic","`type` must be 'forumTopic'");return e.teamId?(null!=(r=e.title)?r.trim():void 0)?this.saveItem(e,t):this.reject("You must provide a title for the forum topic.","title",t):this.reject("You must choose a team.","teamId",t)},e.deleteForumTopic=function(e,t){if(!e)throw new TSArgsError("teamsnap.deleteForumTopic","`forumTopic` must be provided");return this.deleteItem(e,t)}}),e.register("collections/invoiceLineItems.coffee",function(e,t,r){e.loadInvoiceLineItems=function(e,t){if(!e||"object"!=typeof e)throw new TSArgsError("teamsnap.loadInvoiceLineItems","must provide query parameters");return this.loadItems("invoiceLineItem",e,t)},e.createInvoiceLineItem=function(e){return this.createItem(e,{type:"invoiceLineItem"})},e.saveInvoiceLineItem=function(e,t){if(!e)throw new TSArgsError("teamsnap.saveInvoiceLineItem","`invoiceLineItem` must be provided");if(!this.isItem(e,"invoiceLineItem"))throw new TSArgsError("teamsnap.saveInvoiceLineItem","`invoiceLineItem.type` must be 'invoiceLineItem'");return e.invoiceId?e.quantity?e.amount?this.saveItem(e,t):this.reject("You must provide an amount.","amount",t):this.reject("You must provide a quantity.","quantity",t):this.reject("You must choose an invoiceId.","invoiceId",t)},e.deleteInvoiceLineItem=function(e,t){if(!e)throw new TSArgsError("teamsnap.deleteInvoiceLineItem","`invoiceLineItem` must be provided");return this.deleteItem(e,t)}}),e.register("collections/invoiceTransactions.coffee",function(e,t,r){e.loadInvoiceTransactions=function(e,t){if(!e||"object"!=typeof e)throw new TSArgsError("teamsnap.loadInvoiceTransactions","must provide query parameters");return this.loadItems("invoiceTransaction",e,t)},e.createInvoiceTransaction=function(e){return this.createItem(e,{type:"invoiceTransaction"})},e.saveInvoiceTransaction=function(e,t){if(!e)throw new TSArgsError("teamsnap.saveInvoiceTransaction","`invoiceTransaction` must be provided");if(!this.isItem(e,"invoiceTransaction"))throw new TSArgsError("teamsnap.saveInvoiceTransaction","`invoiceTransaction.type` must be 'invoiceTransaction'");return e.invoiceId?e.kind?e.amount?this.saveItem(e,t):this.reject("You must provide an amount.","amount",t):this.reject("You must provide a kind of invoice.","kind",t):this.reject("You must provide an invoice.","invoiceId",t)}}),e.register("collections/invoices.coffee",function(e,t,r){e.loadInvoices=function(e,t){if(!e||"object"!=typeof e)throw new TSArgsError("teamsnap.loadInvoices","must provide query parameters");return this.loadItems("invoice",e,t)},e.createInvoice=function(e){return this.createItem(e,{type:"invoice"})},e.saveInvoice=function(e,t){if(!e)throw new TSArgsError("teamsnap.saveInvoice","`invoice` must be provided");if(!this.isItem(e,"invoice"))throw new TSArgsError("teamsnap.saveInvoice","`invoice.type` must be 'invoice'");return e.batchInvoiceId?e.memberId?this.saveItem(e,t):this.reject("You must choose a memberId.","memberId",t):this.reject("You must choose a batchInvoiceId.","batchInvoiceId",t)},e.deleteInvoice=function(e,t){if(!e)throw new TSArgsError("teamsnap.deleteInvoice","`invoice` must be provided");return this.deleteItem(e,t)}}),e.register("collections/leagueCustomData.coffee",function(e,t,r){e.loadLeagueCustomData=function(e,t){if(this.isId(e))e={teamId:e};else if(!e||"object"!=typeof e)throw new TSArgsError("teamsnap.loadLeagueCustomData","must provide a teamId or query parameters");return this.loadItems("leagueCustomDatum",e,t)},e.createLeagueCustomDatum=function(e,t){return this.createItem(e,{type:"leagueCustomDatum",leagueCustomFieldId:t.id,kind:t.kind,name:t.name,isPrivate:!1,value:null})},e.saveLeagueCustomDatum=function(e,t){if(!e)throw new TSArgsError("teamsnap.saveLeagueCustomDatum","`leagueCustomDatum` must be provided");if(!this.isItem(e,"leagueCustomDatum"))throw new TSArgsError("teamsnap.saveLeagueCustomDatum","`leagueCustomDatum.type` must be 'leagueCustomDatum'");return this.saveItem(e,t)}}),e.register("collections/leagueCustomFields.coffee",function(e,t,r){e.loadLeagueCustomFields=function(e,t){if(this.isId(e))e={teamId:e};else if(!e||"object"!=typeof e)throw new TSArgsError("teamsnap.loadLeagueCustomFields","must provide a teamId or query parameters");return this.loadItems("leagueCustomField",e,t)}}),e.register("collections/leagueRegistrantDocuments.coffee",function(e,t,r){e.loadLeagueRegistrantDocuments=function(e,t){if(this.isId(e))e={teamId:e};else if(!e||"object"!=typeof e)throw new TSArgsError("teamsnap.loadLeagueRegistrantDocuments","must provide a teamId or query parameters");return this.loadItems("leagueRegistrantDocument",e,t)}}),e.register("collections/locations.coffee",function(e,t,r){e.loadLocations=function(e,t){if(this.isId(e))e={teamId:e};else if(!e||"object"!=typeof e)throw new TSArgsError("teamsnap.loadLocations","must provide a teamId or query parameters");return this.loadItems("location",e,t)},e.createLocation=function(e){return this.createItem(e,{type:"location",name:""})},e.saveLocation=function(e,t){var r;if(!e)throw new TSArgsError("teamsnap.saveLocation","`location` must be provided");if(!this.isItem(e,"location"))throw new TSArgsError("teamsnap.saveLocation","`location.type` must be 'location'");return e.teamId?(null!=(r=e.name)?r.trim():void 0)?this.saveItem(e,t):this.reject("You must provide a name for the location.","name",t):this.reject("You must choose a team.","teamId",t)},e.deleteLocation=function(e,t){if(!e)throw new TSArgsError("teamsnap.deleteLocation","`location` must be provided");return this.deleteItem(e,t)}}),e.register("collections/memberAssignments.coffee",function(e,t,r){e.loadMemberAssignments=function(e,t){if(this.isId(e))e={teamId:e};else if(!e||"object"!=typeof e)throw new TSArgsError("teamsnap.loadMemberAssignments","must provide a teamId or query parameters");return this.loadItems("memberAssignment",e,t)},e.createMemberAssignment=function(e){return this.createItem(e,{type:"memberAssignment"})},e.saveMemberAssignment=function(e,t){if(!e)throw new TSArgsError("teamsnap.saveMemberAssignment","`memberAssignment` must be provided");if(!this.isItem(e,"memberAssignment"))throw new TSArgsError("teamsnap.saveMemberAssignment","`memberAssignment.type` must be 'memberAssignment'");return this.saveItem(e,t)},e.deleteMemberAssignment=function(e,t){if(!e)throw new TSArgsError("teamsnap.deleteMemberAssignment","`memberAssignment` must be provided");return this.deleteItem(e,t)}}),e.register("collections/memberBalances.coffee",function(e,t,r){e.loadMemberBalances=function(e,t){if(this.isId(e))e={teamId:e};else if(!e||"object"!=typeof e)throw new TSArgsError("teamsnap.loadMemberBalances","must provide a teamId or query parameters");return this.loadItems("memberBalance",e,t)}}),e.register("collections/memberEmailAddresses.coffee",function(e,t,r){e.INVITED_STATES=["new","new_user","existing_user"],e.loadMemberEmailAddresses=function(e,t){if(this.isId(e))e={teamId:e};else if(!e||"object"!=typeof e)throw new TSArgsError("teamsnap.loadMemberEmailAddresses","must provide a teamId or query parameters");return this.loadItems("memberEmailAddress",e,t)},e.createMemberEmailAddress=function(e){return this.createItem(e,{type:"memberEmailAddress",receivesTeamEmails:!0})},e.inviteMemberEmailAddresses=function(e,t){if(!e.memberEmailAddressIds)throw new TSArgsError("teamsnap.inviteMemberEmailAddresses","options.memberEmailAddressIds is required.");if(!e.memberId)throw new TSArgsError("teamsnap.inviteMemberEmailAddresses","options.memberId is required.");if(!e.teamId)throw new TSArgsError("teamsnap.inviteMemberEmailAddresses","options.teamId is required.");if(!e.notifyAsMemberId)throw new TSArgsError("teamsnap.inviteMemberEmailAddresses","options.notifyAsMemberId is required.");return this.collections.memberEmailAddresses.exec("invite",e).pop().callback(t)},e.saveMemberEmailAddress=function(e,t){if(!e)throw new TSArgsError("teamsnap.saveMemberEmailAddress","`memberEmailAddress` must be provided");if(!this.isItem(e,"memberEmailAddress"))throw new TSArgsError("teamsnap.saveMemberEmailAddress","`memberEmailAddress.type` must be 'memberEmailAddress'");return e.memberId?this.saveItem(e,t):this.reject("You must choose a member.","memberId",t)},e.deleteMemberEmailAddress=function(e,t){if(!e)throw new TSArgsError("teamsnap.deleteMemberEmailAddress","`memberEmailAddress` must be provided");return this.deleteItem(e,t)}}),e.register("collections/memberFiles.coffee",function(e,t,r){e.loadMemberFiles=function(e,t){if(this.isId(e))e={teamId:e};else if(!e||"object"!=typeof e)throw new TSArgsError("teamsnap.loadMemberFiles","must provide a teamId or query parameters");return this.loadItems("memberFile",e,t)},e.createMemberFile=function(e){return this.createItem(e,{type:"memberFile"})},e.saveMemberFile=function(e,t){if(!e)throw new TSArgsError("teamsnap.saveMemberFile","`memberFile` must be provided");if(!this.isItem(e,"memberFile"))throw new TSArgsError("teamsnap.saveMemberFile","`memberFile.type` must be 'memberFile'");return e.memberId?this.saveItem(e,t):this.reject("You must choose a member.","memberId",t)},e.deleteMemberFile=function(e,t){if(!e)throw new TSArgsError("teamsnap.deleteMemberFile","`memberFile` must be provided");return this.deleteItem(e,t)},e.uploadMemberFile=function(e,t,r){var n;if(this.isItem(e,"memberFile")&&(e=e.id),"undefined"==typeof FormData&&this.reject("Your browser does not support the new file upload APIs.","file",r),!this.isId(e))throw new TSArgsError("teamsnap.uploadMemberFile","must include `memberFileId`");if(!(t instanceof File))throw new TSArgsError("teamsnap.uploadMemberFile","must include `file` as type File");return n={memberFileId:e,file:t},this.collections.memberFiles.exec("uploadMemberFile",n).pop().callback(r)}}),e.register("collections/memberLinks.coffee",function(e,t,r){e.loadMemberLinks=function(e,t){if(this.isId(e))e={teamId:e};else if(!e||"object"!=typeof e)throw new TSArgsError("teamsnap.loadMemberLinks","must provide a teamId or query parameters");return this.loadItems("memberLink",e,t)},e.createMemberLink=function(e){return this.createItem(e,{type:"memberLink"})},e.saveMemberLink=function(e,t){if(!e)throw new TSArgsError("teamsnap.saveMemberLink","`memberLink` must be provided");if(!this.isItem(e,"memberLink"))throw new TSArgsError("teamsnap.saveMemberLink","`memberLink.type` must be 'memberLink'");return e.memberId?this.saveItem(e,t):this.reject("You must choose a member.","memberId",t)},e.deleteMemberLink=function(e,t){if(!e)throw new TSArgsError("teamsnap.deleteMemberLink","`memberLink` must be provided");return this.deleteItem(e,t)}}),e.register("collections/memberPayments.coffee",function(e,t,r){e.loadMemberPayments=function(e,t){if(this.isId(e))e={teamId:e};else if(!e||"object"!=typeof e)throw new TSArgsError("teamsnap.loadMemberPayments","must provide a teamId or query parameters");return this.loadItems("memberPayment",e,t)},e.saveMemberPayment=function(e,t){if(!e)throw new TSArgsError("teamsnap.saveMemberPayment","`memberPayment` must be provided");if(!this.isItem(e,"memberPayment"))throw new TSArgsError("teamsnap.saveMemberPayment","`memberPayment.type` must be 'memberPayment'");return e.memberId?this.saveItem(e,t):this.reject("You must choose a member.","memberId",t)},e.memberPaymentTransaction=function(e,t,r,n){var s;if(!this.isItem(e))throw new TSArgsError("teamsnap.memberPaymentTransaction","must provide a `memberPaymentId`");return this.isItem(e)&&(e=e.id),t?("function"==typeof r&&(n=r),s={memberPaymentId:e,amount:t,note:r},this.collections.memberPayments.exec("transaction",s).pop().callback(n)):this.reject("You must add an amount.","amount",n)}}),e.register("collections/memberPhoneNumbers.coffee",function(e,t,r){e.loadMemberPhoneNumbers=function(e,t){if(this.isId(e))e={teamId:e};else if(!e||"object"!=typeof e)throw new TSArgsError("teamsnap.loadMemberPhoneNumbers","must provide a teamId or query parameters");return this.loadItems("memberPhoneNumber",e,t)},e.createMemberPhoneNumber=function(e){return this.createItem(e,{type:"memberPhoneNumber"})},e.saveMemberPhoneNumber=function(e,t){if(!e)throw new TSArgsError("teamsnap.saveMemberPhoneNumber","`memberPhoneNumber` must be provided");if(!this.isItem(e,"memberPhoneNumber"))throw new TSArgsError("teamsnap.saveMemberPhoneNumber","`memberPhoneNumber.type` must be 'memberPhoneNumber'");return e.memberId?this.saveItem(e,t):this.reject("You must choose a member.","memberId",t)},e.deleteMemberPhoneNumber=function(e,t){if(!e)throw new TSArgsError("teamsnap.deleteMemberPhoneNumber","`memberPhoneNumber` must be provided");return this.deleteItem(e,t)}}),e.register("collections/memberPhotos.coffee",function(e,t,r){e.loadMemberPhotos=function(e,t){if(this.isId(e))e={teamId:e};else if(!e||"object"!=typeof e)throw new TSArgsError("teamsnap.loadMemberPhotos","must provide a `teamId` or query parameters");return this.loadItems("memberPhoto",e,t)},e.loadMemberPhoto=function(e,t){if(this.isId(e))e={id:e};else if(!e||"object"!=typeof e)throw new TSArgsError("teamsnap.loadMemberPhoto","must provide an `id` or query parameters");return this.loadItem("memberPhoto",e,t)}}),e.register("collections/memberRegistrationSignups.coffee",function(e,t,r){e.loadMemberRegistrationSignups=function(e,t){if(this.isId(e))e={id:e};else if(!e||"object"!=typeof e)throw new TSArgsError("teamsnap.loadMemberRegistrationSignups","must provide a id or query parameters");return this.loadItems("memberRegistrationSignup",e,t)}}),e.register("collections/memberStatistics.coffee",function(e,t,r){e.loadMemberStatistics=function(e,t){if(this.isId(e))e={teamId:e};else if(!e||"object"!=typeof e)throw new TSArgsError("teamsnap.loadMemberStatistics","must provide a teamId or query parameters");return this.loadItems("memberStatistic",e,t)}}),e.register("collections/members.coffee",function(e,t,r){e.loadMembers=function(e,t){if(this.isId(e))e={teamId:e};else if(!e||"object"!=typeof e)throw new TSArgsError("teamsnap.loadMembers","must provide a teamId or query parameters");return this.loadItems("member",e,t)},e.createMember=function(e){return this.createItem(e,{type:"member"})},e.saveMember=function(e,t){var r;if(!e)throw new TSArgsError("teamsnap.saveMember","`member` must be provided");if(!this.isItem(e,"member"))throw new TSArgsError("teamsnap.saveMember","`type` must be 'member'");return e.teamId?(null!=(r=e.firstName)?r.trim():void 0)?this.saveItem(e,t):this.reject("You must provide a first name for the member.","name",t):this.reject("You must choose a team.","teamId",t)},e.deleteMember=function(e,t){if(!e)throw new TSArgsError("teamsnap.deleteMember","`member` must be provided");return this.deleteItem(e,t)},e.loadPersonas=function(e,t){var r;if(this.isItem(e,"user")&&(e=e.id),!e)throw new TSArgsError("teamsnap.loadPersonas","`userId` must be provided");return r={userId:e},this.collections.members.queryItems("personas",r,t)},e.uploadMemberPhoto=function(e,t,r){var n;if(this.isItem(e,"member")&&(e=e.id),"undefined"==typeof FormData&&this.reject("Your browser does not support the new file upload APIs.","file",r),!this.isId(e))throw new TSArgsError("teamsnap.deleteMemberPhoto","`memberId` must be a valid id");if(!(t instanceof File))throw new TSArgsError("teamsnap.uploadMemberFile","must include `file` as type File");return n={memberId:e,file:t},this.collections.members.exec("uploadMemberPhoto",n).pop().callback(r)},e.removeMemberPhoto=function(e,t){var r;if(this.isItem(e,"member")&&(e=e.id),!this.isId(e))throw new TSArgsError("teamsnap.deleteMemberPhoto","`memberId` must be a valid id");return r={memberId:e},this.collections.members.exec("removeMemberPhoto",r).pop().callback(t)},e.generateMemberThumbnail=function(e,t,r,n,s,i){var o;if(this.isItem(e,"member")&&(e=e.id),null==e||null==t||null==r||null==n||null==s)throw new TSArgsError("teamsnap.generateThumbnail","`memberId`, `x`, `y`, `width`, and `height` are all required");if(!this.isId(e))throw new TSArgsError("teamsnap.generateMemberThumbnail","`memberId` must be a valid id");return o={memberId:e,x:t,y:r,width:n,height:s},this.collections.members.exec("generateMemberThumbnail",o).pop().callback(i)},e.disableMember=function(e,t){var r;if(this.isItem(e,"member")&&(e=e.id),!this.isId(e))throw new TSArgsError("teamsnap.disableMember","`memberId` must be a valid id");return r={memberId:e},this.collections.members.exec("disableMember",r).pop().callback(t)},e.divisionLoadMembers=function(e,t){if(!e.divisionId)throw new TSArgsError("teamsnap.divisionLoadMembers","`divisionId` must be provided");return this.collections.members.queryItems("divisionSearch",e,t)},e.divisionAdvancedLoadMembers=function(e,t){if(!e.divisionId)throw new TSArgsError("teamsnap.divisionAdvancedLoadMembers","`divisionId` must be provided");return this.collections.members.queryItems("advancedDivisionSearch",e,t)},e.memberName=function(e,t,r){return e?t&&(e.firstName&&e.lastName||r)?e.lastName+", "+e.firstName:[e.firstName||"",e.lastName||""].join(" ").trim():""},e.getMemberSort=function(e){return function(t){return function(r,n){var s,i;return t.isItem(r,"member")&&t.isItem(n,"member")?(s=t.memberName(r,e,!0).toLowerCase(),i=t.memberName(n,e,!0).toLowerCase()):(s=r.type,i=n.type),"function"==typeof(null!=s?s.localeCompare:void 0)?s.localeCompare(i):s===i?0:!s&&i?1:s&&!i?-1:s>i?1:s<i?-1:0}}(this)},e.canEditTeam=function(e,t){return!(!e||!t)&&((e.isManager||e.isOwner)&&(!t.isArchivedSeason||e.isOwner))},e.canEditItem=function(e,t,r){return!!(e&&t&&this.isItem(r))&&(!r.readOnly&&(!("member"===r.type&&r.isOwner&&!e.isOwner)&&(!!teamsnap.canEditTeam(e,t)||!t.isArchivedSeason&&(this.isItem(r,"member")?r.href===e.href:r.links.member.href===e.href))))},e.importMembersFromTeam=function(e,t,r,n){var s;if(!e)throw new TSArgsError("teamsnap.importMembersFromTeam","must include `memberIds`");if(!this.isItem(t))throw new TSArgsError("teamsnap.importMembersFromTeam","must provide a teamId");return this.isItem(t)&&(t=t.id),"function"==typeof r&&(n=r),s={sourceMemberIds:e,destinationTeamId:t,sendInvites:r},this.collections.members.exec("importFromTeam",s,n)},e.loadImportableMembers=function(e,t,r){var n;if(!e)throw new TSArgsError("teamsnap.loadImportableMembers","must provide a userId");return"function"==typeof t&&(r=t),n={userId:e,includeArchivedTeams:t},this.collections.members.queryItems("importableMembers",n,r)},e.bulkDeleteMembers=function(e,t){if(Array.isArray(e)){if(0===e.length)throw new TSArgsError("teamsnap.bulkDeleteMembers","The array of members to be deleted is empty.");if(!e.every(function(e){return function(t){return e.isItem(t,"member")}}(this)))throw new TSArgsError("teamsnap.bulkDeleteMembers","Must provide an `array` of member `ids` or `member` objects");e={memberId:e.map(function(e){return e.id})}}else{if("object"!=typeof e||!this.isItem(e,"member"))throw new TSArgsError("teamsnap.bulkDeleteMembers","Must provide an `array` of members, or a `member` object");e={memberId:e.id}}return this.collections.members.exec("bulkDelete",e).callback(t)},e.moveMemberToTeam=function(e,t){if(!e.member)throw new TSArgsError("teamsnap.moveMemberToTeam","params must include `member`");if(!e.divisionId)throw new TSArgsError("teamsnap.moveMemberToTeam","params must include `divisionId`");if(Array.isArray(e.member)){if(0===e.member.length)throw new TSArgsError("teamsnap.moveMemberToTeam","member in params is empty.");if(!e.member.every(function(e){return function(t){return e.isItem(t,"member")}}(this)))throw new TSArgsError("teamsnap.moveMemberToTeam","Must provide an `array` of member objects or a `member` object for member");e.memberId=e.member.map(function(e){return e.id})}else{if(!this.isItem(e.member,"member"))throw new TSArgsError("teamsnap.moveMemberToTeam","Must provide an `array` of member objects or `member` objects for member");e.memberId=e.member.id}return this.isItem(e.divisionId,"division")&&(e.divisionId=e.divisionId.id),this.isItem(e.teamId,"team")&&(e.teamId=e.teamId.id),this.collections.members.exec("moveMember",e).callback(t)}}),e.register("collections/membersPreferences.coffee",function(e,t,r){e.PREFS={SCHEDULE_SHOW:{ALL:1,GAMES:2,EVENTS:3}},e.loadMembersPreferences=function(e,t){if(this.isId(e))e={teamId:e};else if(!e||"object"!=typeof e)throw new TSArgsError("teamsnap.loadMembersPreferences","must provide a teamId or query parameters");return this.loadItems("memberPreferences",e,t)},e.loadMemberPreferences=function(e,t){if(this.isId(e))e={teamId:e};else if(!e||"object"!=typeof e)throw new TSArgsError("teamsnap.loadMemberPreferences","must provide a teamId or query parameters");return this.loadItem("memberPreferences",e,t)},e.saveMemberPreferences=function(e,t){if(!e)throw new TSArgsError("teamsnap.saveMemberPreferences","`memberPreferences` must be provided");if(!this.isItem(e,"memberPreferences"))throw new TSArgsError("teamsnap.saveMemberPreferences","`memberPreferences.type` must be 'memberPreferences'");return this.saveItem(e,t)}}),e.register("collections/messageData.coffee",function(e,t,r){e.loadMessageData=function(e,t){if(this.isId(e))e={teamId:e};else if(!e||"object"!=typeof e)throw new TSArgsError("teamsnap.loadMessageData","must provide a teamId or query parameters");return this.loadItems("messageDatum",e,t)}}),e.register("collections/messages.coffee",function(e,t,r){e.loadMessages=function(e,t){if(this.isId(e))e={teamId:e};else if(!e||"object"!=typeof e)throw new TSArgsError("teamsnap.loadMessages","must provide a teamId or query parameters");return this.loadItems("message",e,t)},e.markMessageAsRead=function(e,t){if("object"==typeof e)e={id:e.id};else{if(!this.isId(e))throw new TSArgsError("teamsnap.markMessageAsRead","a message `id` or `message` object must be provided");e={id:e}}return this.collections.messages.exec("markMessageAsRead",e).pop().callback(t)},e.bulkDeleteMessages=function(e,t){if(Array.isArray(e)){if(0===e.length)throw new TSArgsError("teamsnap.bulkDeleteMessages","The array of messages to be deleted is empty.");if(this.isItem(e[0],"message"))e={id:e.map(function(e){return e.id})};else{if(!this.isId(e[0]))throw new TSArgsError("teamsnap.bulkDeleteMessages","Must provide an `array` of message `ids` or `message` objects");e={id:e}}}else if("object"==typeof e&&this.isItem(e,"message"))e={id:e.id};else{if(!this.isId(e))throw new TSArgsError("teamsnap.bulkDeleteMessages","Must provide an `array` of message `ids`, an `id` or a `message` object");e={id:e}}return this.collections.messages.exec("bulkDelete",e).callback(t)}}),e.register("collections/opponents.coffee",function(e,t,r){e.loadOpponents=function(e,t){if(this.isId(e))e={teamId:e};else if(!e||"object"!=typeof e)throw new TSArgsError("teamsnap.loadOpponents","must provide a teamId or query parameters");return this.loadItems("opponent",e,t)},e.createOpponent=function(e){return this.createItem(e,{type:"opponent",name:""})},e.saveOpponent=function(e,t){var r;if(!e)throw new TSArgsError("teamsnap.saveOpponent","`opponent` must be provided");if(!this.isItem(e,"opponent"))throw new TSArgsError("teamsnap.saveOpponent","`opponent.type` must be 'opponent'");return e.teamId?(null!=(r=e.name)?r.trim():void 0)?this.saveItem(e,t):this.reject("You must provide a name for the opponent.","name",t):this.reject("You must choose a team.","teamId",t)},e.deleteOpponent=function(e,t){if(!e)throw new TSArgsError("teamsnap.deleteOpponent","`opponent` must be provided");return this.deleteItem(e,t)}}),e.register("collections/opponentsResults.coffee",function(e,t,r){e.loadOpponentsResults=function(e,t){if(!e||"object"!=typeof e)throw new TSArgsError("teamsnap.loadOpponentsResults","must provide query parameters");return this.loadItems("opponentResults",e,t)},e.loadOpponentResults=function(e,t){var r;if(!this.isId(e))throw new TSArgsError("teamsnap.loadOpponentResults","must provide an opponentId");return r={id:e},this.loadItem("opponentResults",r,t)}}),e.register("collections/partnerUserPreferences.coffee",function(e,t,r){e.createPartnerUserPreferences=function(e){return this.createItem(e,{type:"partnerUserPreferences"})},e.savePartnerUserPreferences=function(e,t){if(!e)throw new TSArgsError("teamsnap.savePartnerUserPreferences","`partnerUserPreferences` must be provided");if(!this.isItem(e,"partnerUserPreferences"))throw new TSArgsError("teamsnap.savePartnerUserPreferences","`partnerUserPreferences.type` must be 'partnerUserPreferences'");return e.userId?e.partnerPreferenceId?e.optionValue.trim()?this.saveItem(e,t):this.reject("You must provide an optionValue.","optionValue",t):this.reject("You must provide a partnerPreference.","partnerPreferenceId",t):this.reject("You must provide a user.","userId",t)}}),e.register("collections/partnersPreferences.coffee",function(e,t,r){e.loadPartnersPreferences=function(e,t){if(!e||"object"!=typeof e)throw new TSArgsError("teamsnap.loadPartnersPreferences","must provide query parameters");return this.loadItems("partnerPreferences",e,t)}}),e.register("collections/paymentNotes.coffee",function(e,t,r){e.loadPaymentNotes=function(e,t){if(this.isId(e))e={teamId:e};else if(!e||"object"!=typeof e)throw new TSArgsError("teamsnap.loadPaymentNotes","must provide a teamId or query parameters");return this.loadItems("paymentNote",e,t)},e.createPaymentNote=function(e){return this.createItem(e,{type:"paymentNote"})},e.savePaymentNote=function(e,t){if(!e)throw new TSArgsError("teamsnap.savePaymentNote","`paymentNote` must be provided");if(!this.isItem(e,"paymentNote"))throw new TSArgsError("teamsnap.savePaymentNote","`paymentNote.type` must be 'paymentNote'");return e.teamId?e.memberPaymentId?e.note?this.saveItem(e,t):this.reject("You must provide a note.","note",t):this.reject("You must specify a memberPaymentId.","memberPaymentId",t):this.reject("You must choose a team.","teamId",t)}}),e.register("collections/plans.coffee",function(e,t,r){e.loadPlans=function(e,t){if(!e||"object"!=typeof e)throw new TSArgsError("teamsnap.loadPlans","must provide query parameters");return this.loadItems("plan",e,t)},e.loadPlan=function(e,t){var r;if(!this.isId(e))throw new TSArgsError("teamsnap.loadPlan","must provide a teamId");return r={teamId:e},this.loadItem("plan",r,t)}}),e.register("collections/registrationFormLineItemOptions.coffee",function(e,t,r){e.loadRegistrationFormLineItemOptions=function(e,t){if(!e||"object"!=typeof e)throw new TSArgsError("teamsnap.loadRegistrationFormLineItemOptions","must provide query parameters");return this.loadItems("registrationFormLineItemOption",e,t)}}),e.register("collections/registrationFormLineItems.coffee",function(e,t,r){e.loadRegistrationFormLineItems=function(e,t){if(!e||"object"!=typeof e)throw new TSArgsError("teamsnap.loadRegistrationFormLineItems","must provide query parameters");return this.loadItems("registrationFormLineItem",e,t)}}),e.register("collections/registrationForms.coffee",function(e,t,r){e.loadRegistrationForms=function(e,t){if(this.isId(e))e={id:e};else if(!e||"object"!=typeof e)throw new TSArgsError("teamsnap.loadRegistrationForms","must provide a id or query parameters");return this.loadItems("registrationForm",e,t)}}),e.register("collections/sponsors.coffee",function(e,t,r){e.loadSponsors=function(e,t){if(this.isId(e))e={teamId:e};else if(!e||"object"!=typeof e)throw new TSArgsError("teamsnap.loadSponsors","must provide a teamId or query parameters");return this.loadItems("sponsor",e,t)},e.createSponsor=function(e){return this.createItem(e,{type:"sponsor",name:""})},e.saveSponsor=function(e,t){if(!e)throw new TSArgsError("teamsnap.saveSponsor","`sponsor` must be provided");if(!this.isItem(e,"sponsor"))throw new TSArgsError("teamsnap.saveSponsor","`sponsor.type` must be 'sponsor'");return this.saveItem(e,t)},e.deleteSponsor=function(e,t){if(!e)throw new TSArgsError("teamsnap.deleteSponsor","`sponsor` must be provided");return this.deleteItem(e,t)},e.uploadSponsorLogo=function(e,t,r){var n;if(this.isItem(e,"sponsor")&&(e=e.id),"undefined"==typeof FormData&&this.reject("Your browser does not support the new file upload APIs.","file",r),!this.isId(e))throw new TSArgsError("teamsnap.uploadSponsorLogo","must include `sponsorId`");if(!(t instanceof File))throw new TSArgsError("teamsnap.uploadSponsorLogo","must include `file` as type File");return n={sponsorId:e,file:t},this.collections.sponsors.exec("uploadSponsorLogo",n).pop().callback(r)},e.deleteSponsorLogo=function(e,t){var r;if(!e)throw new TSArgsError("teamsnap.deleteSponsorLogo","`sponsorId` must be provided");if(this.isItem(e,"sponsor")&&(e=e.id),!this.isId(e))throw new TSArgsError("teamsnap.deleteSponsorLogo","`sponsorId` must be a valid id");return r={sponsorId:e},this.collections.sponsors.exec("removeSponsorLogo",r).callback(t)}}),e.register("collections/sports.coffee",function(e,t,r){e.loadSports=function(e,t){if(!e||"object"!=typeof e)throw new TSArgsError("teamsnap.loadSports","must provide query parameters");return this.loadItems("sport",e,t)},e.loadSport=function(e,t){var r;if(!this.isId(e))throw new TSArgsError("teamsnap.loadSport","must provide a teamId");return r={teamId:e},this.loadItem("sport",r,t)}}),e.register("collections/statisticAggregates.coffee",function(e,t,r){e.loadStatisticAggregates=function(e,t){if(this.isId(e))e={teamId:e};else if(!e||"object"!=typeof e)throw new TSArgsError("teamsnap.loadStatisticAggregates","must provide a teamId or query parameters");return this.loadItems("statisticAggregate",e,t)}}),e.register("collections/statisticData.coffee",function(e,t,r){e.loadStatisticData=function(e,t){if(this.isId(e))e={teamId:e};else if(!e||"object"!=typeof e)throw new TSArgsError("teamsnap.loadStatisticData","must provide a teamId or query parameters");return this.loadItems("statisticDatum",e,t)},e.createStatisticDatum=function(e){return this.createItem(e,{type:"statisticDatum"})},e.saveStatisticDatum=function(e,t){if(!e)throw new TSArgsError("teamsnap.saveStatisticDatum","`statisticDatum` must be provided");if(!this.isItem(e,"statisticDatum"))throw new TSArgsError("teamsnap.saveStatisticDatum","`statisticDatum.type` must be 'statisticDatum'");return e.eventId?e.statisticId?e.teamId?this.saveItem(e,t):this.reject("You must choose a team.","teamId",t):this.reject("You must specify a statistic.","statisticId",t):this.reject("You must specify an event.","eventId",t)},e.deleteStatisticDatum=function(e,t){if(!e)throw new TSArgsError("teamsnap.deleteStatisticDatum","`statisticDatum` must be provided");return this.deleteItem(e,t)},e.bulkSaveStatisticData=function(e,t){var r;if(!e)throw new TSArgsError("teamsnap.bulkSaveStatisticData","`templates` must be provided");return r={templates:e},this.collections.statisticData.exec("bulkUpdateStatisticData",r).callback(t)},e.bulkDeleteStatisticData=function(e,t,r){var n;if(!e)throw new TSArgsError("teamsnap.bulkDeleteStatisticData","`member` must be provided");if(!this.isItem(e,"member"))throw new TSArgsError("teamsnap.bulkDeleteStatisticData","`member.type` must be 'member'");if(!t)throw new TSArgsError("teamsnap.bulkDeleteStatisticData","`event` must be provided");if(!this.isItem(t,"event"))throw new TSArgsError("teamsnap.bulkDeleteStatisticData","`event.type` must be 'event'");return n={memberId:e.id,eventId:t.id
},this.collections.statisticData.exec("bulkDeleteStatisticData",n).callback(r)}}),e.register("collections/statisticGroups.coffee",function(e,t,r){e.loadStatisticGroups=function(e,t){if(this.isId(e))e={teamId:e};else if(!e||"object"!=typeof e)throw new TSArgsError("teamsnap.loadStatisticGroups","you must provide a a teamId or query parameters");return this.loadItems("statisticGroup",e,t)},e.createStatisticGroup=function(e){return this.createItem(e,{type:"statisticGroup"})},e.saveStatisticGroup=function(e,t){if(!e)throw new TSArgsError("teamsnap.saveStatisticGroup","`statisticGroup` must be provided");if(!this.isItem(e,"statisticGroup"))throw new TSArgsError("teamsnap.saveStatisticGroup","`statisticGroup.type` must be 'statisticGroup'");return e.name?e.teamId?this.saveItem(e,t):this.reject("You must specify a team","teamId",t):this.reject("You must specify a name","name",t)},e.deleteStatisticGroup=function(e,t){if(!e)throw new TSArgsError("teamsnap.deleteStatisticGroup","`statisticGroup` must be provided");return this.deleteItem(e,t)},e.reorderStatisticGroups=function(e,t,r){var n;if(!this.isId(e))throw new TSArgsError("teamsnap.reorderStatisticGroups","`teamId` must be provided");if(!t||!Array.isArray(t))throw new TSArgsError("teamsnap.reorderStatisticGroups","You must provide an array of ordered Statistic Group IDs");return n={teamId:e,sortedIds:t},this.collections.statisticGroups.exec("reorderStatisticGroups",n).callback(r)}}),e.register("collections/statistics.coffee",function(e,t,r){e.loadStatistics=function(e,t){if(this.isId(e))e={teamId:e};else if(!e||"object"!=typeof e)throw new TSArgsError("teamsnap.loadStatistics","must provide a teamId or query parameters");return this.loadItems("statistic",e,t)},e.createStatistic=function(e){return this.createItem(e,{type:"statistic"})},e.saveStatistic=function(e,t){if(!e)throw new TSArgsError("teamsnap.saveStatistic","`statistic` must be provided");if(!this.isItem(e,"statistic"))throw new TSArgsError("teamsnap.saveStatistic","`statistic.type` must be 'statistic'");return e.name?e.acronym?e.teamId?this.saveItem(e,t):this.reject("You must choose a team.","teamId",t):this.reject("You must specify an acronym.","acronym",t):this.reject("You must specify a name.","name",t)},e.deleteStatistic=function(e,t){if(!e)throw new TSArgsError("teamsnap.deleteStatistic","`statistic` must be provided");return this.deleteItem(e,t)},e.reorderStatistics=function(e,t,r){var n;if(!this.isId(e))throw new TSArgsError("teamsnap.reorderStatistics","`teamId` must be provided");if(!t||!Array.isArray(t))throw new TSArgsError("teamsnap.reorderStatistics","You must provide an array of ordered Statistic IDs");return n={teamId:e,sortedIds:t},this.collections.statistics.exec("reorderStatistics",n).callback(r)}}),e.register("collections/teamFees.coffee",function(e,t,r){e.loadTeamFees=function(e,t){if(this.isId(e))e={teamId:e};else if(!e||"object"!=typeof e)throw new TSArgsError("teamsnap.loadTeamFees","must provide a teamId or query parameters");return this.loadItems("teamFee",e,t)},e.createTeamFee=function(e){return this.createItem(e,{type:"teamFee"})},e.saveTeamFee=function(e,t){if(!e)throw new TSArgsError("teamsnap.saveTeamFee","`teamFee` must be provided");if(!this.isItem(e,"teamFee"))throw new TSArgsError("teamsnap.saveTeamFee","`teamFee.type` must be 'teamFee'");return e.teamId?e.description?e.amount?this.saveItem(e,t):this.reject("You must provide a fee amount.","description",t):this.reject("You must provide a team fee description.","description",t):this.reject("You must choose a team.","teamId",t)},e.deleteTeamFee=function(e,t){if(!e)throw new TSArgsError("teamsnap.deleteTeamFee","`teamFee` must be provided");return this.deleteItem(e,t)}}),e.register("collections/teamMedia.coffee",function(e,t,r){e.ROTATION_DIRECTIONS={CLOCKWISE:"clockwise",COUNTERCLOCKWISE:"counterclockwise"},e.loadTeamMedia=function(e,t){if(this.isId(e))e={teamId:e};else if(!e||"object"!=typeof e)throw new TSArgsError("teamsnap.loadTeamMedia","must provide a teamId or query parameters");return this.loadItems("teamMedium",e,t)},e.createTeamMedium=function(e){return this.createItem(e,{type:"teamMedium"})},e.uploadTeamMedium=function(e,t,r){if(!e)throw new TSArgsError("teamsnap.uploadTeamMedium","`teamMedium` must be provided");if(!this.isItem(e,"teamMedium"))throw new TSArgsError("teamsnap.uploadTeamMedium","`type` must be 'teamMedium'");if(!this.isId(e.teamId))throw new TSArgsError("teamsnap.uploadTeamMedium","must include `teamId`");if(!this.isId(e.teamMediaGroupId))throw new TSArgsError("teamsnap.uploadTeamMedium","must include `teamMediaGroupId`");if(!(e.file instanceof File))throw new TSArgsError("teamsnap.uploadTeamMedium","must include `file` as type File");return this.collections.teamMedia.file("uploadTeamMedium",e,t).pop().callback(r)},e.deleteTeamMedium=function(e,t){if(!e)throw new TSArgsError("teamsnap.deleteTeamMedium","`teamMedium` must be provided");return this.deleteItem(e,t)},e.saveTeamMedium=function(e,t){if(!e)throw new TSArgsError("teamsnap.saveTeamMedium","`teamMedium` must be provided");if(!this.isItem(e,"teamMedium"))throw new TSArgsError("teamsnap.saveTeamMedium","`type` must be 'teamMedium'");if(!this.isId(e.teamId))throw new TSArgsError("teamsnap.saveTeamMedium","must include `teamId`");if(!this.isId(e.memberId))throw new TSArgsError("teamsnap.saveTeamMedium","must include `memberId`");if(!this.isId(e.teamMediaGroupId))throw new TSArgsError("teamsnap.saveTeamMedium","must include `teamMediaGroupId`");return this.saveItem(e,t)},e.saveTeamVideoLink=function(e,t){if(!e)throw new TSArgsError("teamsnap.createVideoLink","`teamMedium` must be provided");if(!this.isItem(e,"teamMedium"))throw new TSArgsError("teamsnap.createVideoLink","`type` must be 'teamMedium'");if(!this.isId(e.teamId))throw new TSArgsError("teamsnap.createVideoLink","must include `teamId`");if(!this.isId(e.teamMediaGroupId))throw new TSArgsError("teamsnap.createVideoLink","must include `teamMediaGroupId`");return this.collections.teamMedia.exec("createTeamVideoLink",e).pop().callback(t)},e.bulkDeleteTeamMedia=function(e,t){var r;if(!e)throw new TSArgsError("teamsnap.bulkDeleteTeamMedia","`teamMediumIds` must be provided");return r={teamMediumIds:e},this.collections.teamMedia.exec("bulkDeleteTeamMedia",r).callback(t)},e.assignMediaToGroup=function(e,t,r){var n;if(!e)throw new TSArgsError("teamsnap.assignMediaToGroup","must provide teamMediumIds");if(this.isItem(t,"teamMediaGroup")&&(t=t.id),!t||!this.isId(t))throw new TSArgsError("teamsnap.assignMediaToGroup","must provide a teamMediaGroupId");return n={teamMediumIds:e,teamMediaGroupId:t},this.collections.teamMedia.exec("assignMediaToGroup",n).callback(r)},e.rotateTeamMediumImage=function(e,t,r){var n;if(this.isItem(e,"teamMedium")&&(e=e.id),!e||!this.isId(e))throw new TSArgsError("teamsnap.rotateTeamMediumImage","must provide a teamMediumId");if(!t)throw new TSArgsError("teamsnap.rotateTeamMediumImage","must provide a rotateDirection");return n={teamMediumId:e,rotateDirection:t},this.collections.teamMedia.exec("rotateTeamMediumImage",n).pop().callback(r)},e.setMediumAsTeamPhoto=function(e,t){var r;if(this.isItem(e,"teamMedium")&&(e=e.id),!e||!this.isId(e))throw new TSArgsError("teamsnap.setMediumAsTeamPhoto","must include a teamMediumId");return r={teamMediumId:e},this.collections.teamMedia.exec("setMediumAsTeamPhoto",r).pop().callback(t)},e.setMediumAsMemberPhoto=function(e,t,r){var n;if(this.isItem(e,"teamMedium")&&(e=e.id),this.isItem(t,"member")&&(t=t.id),!e||!this.isId(e))throw new TSArgsError("teamsnap.setMediumAsMemberPhoto","must include a teamMediumId");if(!t||!this.isId(t))throw new TSArgsError("teamsnap.setMediumAsMemberPhoto","must include a memberId");return n={teamMediumId:e,memberId:t},this.collections.teamMedia.exec("setMediumAsMemberPhoto",n).pop().callback(r)},e.reorderTeamMedia=function(e,t,r){var n;if(!this.isId(e))throw new TSArgsError("teamsnap.reorderTeamMedia","`teamId` must be provided");if(!t||!Array.isArray(t))throw new TSArgsError("teamsnap.reorderTeamMedia","You must provide an array of ordered Team Medium IDs");return n={teamId:e,sortedIds:t},this.collections.teamMedia.exec("reorderTeamMedia",n).callback(r)},e.facebookShareTeamMedium=function(e,t,r,n,s){var i;if("boolean"==typeof t&&(s=n,n=r,r=t,t=null),"function"==typeof n&&(s=n),null!=t&&(t=parseInt(t)),this.isItem(e,"teamMedium")&&(e=e.id),null==r||"boolean"!=typeof r)throw new TSArgsError("teamsnap.facebookShareMedium","must include boolean isSuppressedFromFeed");return i={teamMediumId:e,facebookPageId:t,caption:n,isSuppressedFromFeed:r},this.collections.teamMedia.exec("facebookShareTeamMedium",i).pop().callback(s)}}),e.register("collections/teamMediaGroups.coffee",function(e,t,r){e.loadTeamMediaGroups=function(e,t){if(this.isId(e))e={teamId:e};else if(!e||"object"!=typeof e)throw new TSArgsError("teamsnap.loadTeamMediaGroups","must provide a teamId or query parameters");return this.loadItems("teamMediaGroup",e,t)},e.createTeamMediaGroup=function(e){return this.createItem(e,{type:"teamMediaGroup"})},e.saveTeamMediaGroup=function(e,t){if(!e)throw new TSArgsError("teamsnap.saveTeamMediaGroup","`teamMediaGroup` must be provided");if(!this.isItem(e,"teamMediaGroup"))throw new TSArgsError("teamsnap.saveTeamMediaGroup","`teamMediaGroup.type` must be 'teamMediaGroup'");return this.saveItem(e,t)},e.deleteTeamMediaGroup=function(e,t){if(!e)throw new TSArgsError("teamsnap.deleteTeamMediaGroup","`teamMediaGroup` must be provided");return this.deleteItem(e,t)},e.reorderTeamMediaGroups=function(e,t,r){var n;if(!this.isId(e))throw new TSArgsError("teamsnap.reorderTeamMediaGroups","`teamId` must be provided");if(!t||!Array.isArray(t))throw new TSArgsError("teamsnap.reorderTeamMediaGroups","You must provide an array of ordered Team Media Group IDs");return n={teamId:e,sortedIds:t},this.collections.teamMediaGroups.exec("reorderTeamMediaGroups",n).callback(r)},e.facebookShareTeamMediaGroup=function(e,t,r,n,s){var i;if("boolean"==typeof t&&(s=n,n=r,r=t,t=null),"function"==typeof n&&(s=n),null!=t&&(t=parseInt(t)),this.isItem(e,"teamMedium")&&(e=teamMediaGroup.id),null==r||"boolean"!=typeof r)throw new TSArgsError("teamsnap.facebookShareMediaGroup","must include boolean isSuppressedFromFeed");return i={teamMediaGroupId:e,facebookPageId:t,albumName:n,isSuppressedFromFeed:r},this.collections.teamMediaGroups.exec("facebookShareTeamMediaGroup",i).pop().callback(s)}}),e.register("collections/teamMediumComments.coffee",function(e,t,r){e.loadTeamMediumComments=function(e,t){if(this.isId(e))e={teamId:e};else if(!e||"object"!=typeof e)throw new TSArgsError("teamsnap.loadTeamMediumComments","must provide a teamId or query parameters");return this.loadItems("teamMediumComment",e,t)},e.createTeamMediumComment=function(e){return this.createItem(e,{type:"teamMediumComment"})},e.saveTeamMediumComment=function(e,t){if(!e)throw new TSArgsError("teamsnap.saveTeamMediumComment","`teamMediumComment` must be provided");if(!this.isItem(e,"teamMediumComment"))throw new TSArgsError("teamsnap.saveTeamMediumComment","`teamMediumComment.type` must be 'teamMediumComment'");return this.saveItem(e,t)},e.deleteTeamMediumComment=function(e,t){if(!e)throw new TSArgsError("teamsnap.deleteTeamMediumComment","`teamMediumComment` must be provided");return this.deleteItem(e,t)}}),e.register("collections/teamNames.coffee",function(e,t,r){e.loadTeamNames=function(e,t){if(this.isId(e))e={id:e};else if(!e||"object"!=typeof e)throw new TSArgsError("teamsnap.loadTeamNames","must provide a teamId or query parameters");return this.loadItems("teamName",e,t)}}),e.register("collections/teamPhotos.coffee",function(e,t,r){e.loadTeamPhotos=function(e,t){if(this.isId(e))e={teamId:e};else if(!e||"object"!=typeof e)throw new TSArgsError("teamsnap.loadTeamPhotos","must provide a `teamId` or query parameters");return this.loadItems("teamPhoto",e,t)},e.loadTeamPhoto=function(e,t){if(this.isId(e))e={id:e};else if(!e||"object"!=typeof e)throw new TSArgsError("teamsnap.loadTeamPhoto","must provide an `id` or query parameters");return this.loadItem("teamPhoto",e,t)}}),e.register("collections/teamPublicSites.coffee",function(e,t,r){e.loadTeamPublicSites=function(e,t){if(this.isId(e))e={teamId:e};else if(!e||"object"!=typeof e)throw new TSArgsError("teamsnap.loadTeamPublicSites","must provide a teamId or query parameters");return this.loadItems("teamPublicSite",e,t)},e.loadTeamPublicSite=function(e,t){if(this.isId(e))e={teamId:e};else if(!e||"object"!=typeof e)throw new TSArgsError("teamsnap.loadTeamPublicSite","must provide a teamId or query parameters");return this.loadItem("teamPublicSite",e,t)},e.saveTeamPublicSite=function(e,t){if(!e)throw new TSArgsError("teamsnap.saveTeamPublicSite","`teamPublicSite` must be provided");if(!this.isItem(e,"teamPublicSite"))throw new TSArgsError("teamsnap.saveTeamPublicSite","`teamPublicSite.type` must be 'teamPublicSite'");return this.saveItem(e,t)},e.uploadTeamPublicPhoto=function(e,t,r){var n;if(this.isItem(e,"teamPublicSite")&&(e=teamPublicSite.id),"undefined"==typeof FormData&&this.reject("Your browser does not support the new file upload APIs.","file",r),!this.isId(e))throw new TSArgsError("teamsnap.uploadTeamPublicPhoto","must include `teamPublicSiteId`");if(!(t instanceof File))throw new TSArgsError("teamsnap.uploadTeamPublicPhoto","must include `file` as type File");return n={teamPublicSiteId:e,file:t},this.collections.teamPublicSites.exec("uploadTeamPublicPhoto",n).pop().callback(r)},e.deleteTeamPublicPhoto=function(e,t){var r;if(!e)throw new TSArgsError("teamsnap.deleteTeamPublicPhoto","`teamPublicSiteId` must be provided");if(this.isItem(e,"teamPublicSite")&&(e=teamPublicSite.id),!this.isId(e))throw new TSArgsError("teamsnap.deleteTeamPublicPhoto","`teamPublicSiteId` must be a valid id");return r={teamPublicSiteId:e},this.collections.teamPublicSites.exec("removeTeamPublicPhoto",r).callback(t)},e.validateSubdomain=function(e,t){var r;if(!e)throw new TSArgsError("teamsnap.validateSubdomain","`subdomain` must be provided");return r={subdomain:e},this.collections.teamPublicSites.exec("validateSubdomain",r).callback(t)}}),e.register("collections/teamStatistics.coffee",function(e,t,r){e.loadTeamStatistics=function(e,t){if(this.isId(e))e={teamId:e};else if(!e||"object"!=typeof e)throw new TSArgsError("teamsnap.loadTeamStatistics","must provide a teamId or query parameters");return this.loadItems("teamStatistic",e,t)}}),e.register("collections/teamStores.coffee",function(e,t,r){e.loadTeamStores=function(e,t){if(this.isId(e))e={teamId:e};else if(!e||"object"!=typeof e)throw new TSArgsError("teamsnap.loadTeamStores","must provide a teamId or query parameters");return this.loadItems("teamStore",e,t)}}),e.register("collections/teams.coffee",function(e,t,r){var n;e.loadTeams=function(e,t){return null==e&&(e={}),"function"==typeof e&&(t=e,e={}),Object.keys(e).length?this.loadItems("team",e,t):this.loadMe().then(function(r){return function(n){return e.userId=n.id,r.loadItems("team",e,t)}}(this))},e.loadTeam=function(e,t){if(!this.isId(e))throw new TSArgsError("teamsnap.loadTeam","teamId must be provided");return this.loadItem("team",{teamId:e},t)},e.createTeam=function(e){return this.createItem(e,{type:"team",name:""})},e.saveTeam=function(e,t){var r;if(!e)throw new TSArgsError("teamsnap.saveTeam","`team` must be provided");if(!this.isItem(e,"team"))throw new TSArgsError("teamsnap.saveTeam","`type` must be 'team'");return(null!=(r=e.name)?r.trim():void 0)?this.saveItem(e,t):this.reject("You must provide a name for the team.","name",t)},e.deleteTeam=function(e,t){if(!e)throw new TSArgsError("teamsnap.deleteTeam","`team` must be provided");return this.deleteItem(e,t)},e.bulkLoad=function(e,t,r){var n,s,i,o;if("object"!=typeof e||Array.isArray(e)||(s=e,e=s.teamId,t=s.types),!(this.isId(e)||Array.isArray(e)&&this.isId(e[0])))throw new TSArgsError("teamsnap.bulkLoad","teamId must be provided");if(Array.isArray(t)||(t=this.getTeamTypes(),t.splice(t.indexOf("availability"),1)),i={teamId:e,types:t.map(this.underscoreType).join(",")},null!=s){null!=s.scopeTo&&(i.scopeTo=this.underscoreType(s.scopeTo));for(n in s)o=s[n],n.indexOf("__")!==-1&&(i[n]=o)}return this.collections.root.queryItems("bulkLoad",i,r)},e.invite=function(e){if(null==e&&(e={}),n(e,"memberId"),n(e,"contactId"),!e.memberId&&!e.contactId)throw new TSArgsError("teamsnap.invite","options.memberId or options.contactId is required.");if(!e.teamId)throw new TSArgsError("teamsnap.invite","options.teamId is required.");if(!e.notifyAsMemberId)throw new TSArgsError("teamsnap.invite","options.notifyAsMemberId is required.");return this.collections.teams.exec("invite",e)},e.updateTimeZone=function(e){if(null==e&&(e={}),!e.timeZone)throw new TSArgsError("teamsnap.updateTimeZone","options.timeZone is required.");if(!e.teamId)throw new TSArgsError("teamsnap.updateTimeZone","options.teamId is required.");if(!e.offsetTeamTimes)throw new TSArgsError("teamsnap.updateTimeZone","options.offsetTeamTimes is required");return this.collections.teams.exec("updateTimeZone",e)},e.resetStatistics=function(e,t){var r;if(!e)throw new TSArgsError("teamsnap.resetStatistics","`teamId` must be provided");if(this.isItem(e,"teamId")&&(e=e.id),!this.isId(e))throw new TSArgsError("teamsnap.resetStatistics","`teamId` must be a valid id");return r={teamId:e},this.collections.teams.exec("resetStatistics",r).callback(t)},e.divisionLoadTeams=function(e,t){if(!e.divisionId)throw new TSArgsError("teamsnap.divisionLoadTeams","`divisionId` must be provided");return this.collections.teams.queryItems("divisionSearch",e,t)},n=function(e,t){var r;return r=t+"s",e[r]&&(e[t]=e[r],delete e[r]),null==e[t]||Array.isArray(e[t])||(e[t]=[e[t]]),e}}),e.register("collections/teamsPaypalPreferences.coffee",function(e,t,r){e.loadTeamsPaypalPreferences=function(e,t){if(this.isId(e))e={teamId:e};else if(!e||"object"!=typeof e)throw new TSArgsError("teamsnap.loadTeamsPaypalPreferences","must provide a teamId or query parameters");return this.loadItems("teamPaypalPreferences",e,t)},e.loadTeamPaypalPreferences=function(e,t){if(this.isId(e))e={teamId:e};else if(!e||"object"!=typeof e)throw new TSArgsError("teamsnap.loadTeamPaypalPreferences","must provide a teamId or query parameters");return this.loadItem("teamPaypalPreferences",e,t)},e.saveTeamPaypalPreferences=function(e,t){if(!e)throw new TSArgsError("teamsnap.saveTeamPaypalPreferences","`teamPaypalPreferences` must be provided");if(!this.isItem(e,"teamPaypalPreferences"))throw new TSArgsError("teamsnap.saveTeamPaypalPreferences","`teamPaypalPreferences.type` must be 'teamPaypalPreferences'");return this.saveItem(e,t)}}),e.register("collections/teamsPreferences.coffee",function(e,t,r){e.ASSIGNMENTS_ENABLED_FOR_CODE={GamesAndEvents:0,Games:1,Events:2},e.loadTeamsPreferences=function(e,t){if(this.isId(e))e={teamId:e};else if(!e||"object"!=typeof e)throw new TSArgsError("teamsnap.loadTeamPreferences","must provide a teamId or query parameters");return this.loadItems("teamPreferences",e,t)},e.loadTeamPreferences=function(e,t){if(this.isId(e))e={teamId:e};else if(!e||"object"!=typeof e)throw new TSArgsError("teamsnap.loadTeamPreferences","must provide a teamId or query parameters");return this.loadItem("teamPreferences",e,t)},e.saveTeamPreferences=function(e,t){if(!e)throw new TSArgsError("teamsnap.saveTeamPreferences","`teamPreferences` must be provided");if(!this.isItem(e,"teamPreferences"))throw new TSArgsError("teamsnap.saveTeamPreferences","`teamPreferences.type` must be 'teamPreferences'");return this.saveItem(e,t)},e.uploadTeamPhoto=function(e,t,r){var n;if(this.isItem(e,"teamPreferences")&&(e=e.id),"undefined"==typeof FormData&&this.reject("Your browser does not support the new file upload APIs.","file",r),!this.isId(e))throw new TSArgsError("teamsnap.uploadTeamPhoto","must include `teamPreferencesId`");if(!(t instanceof File))throw new TSArgsError("teamsnap.uploadTeamPhoto","must include `file` as type File");return n={teamPreferencesId:e,file:t},this.collections.teamsPreferences.exec("uploadTeamPhoto",n).pop().callback(r)},e.deleteTeamPhoto=function(e,t){var r;if(!e)throw new TSArgsError("teamsnap.deleteTeamPhoto","`teamPreferencesId` must be provided");if(this.isItem(e,"teamPreferences")&&(e=teamPreferences.id),!this.isId(e))throw new TSArgsError("teamsnap.deleteTeamPhoto","`teamPreferencesId` must be a valid id");return r={teamPreferencesId:e},this.collections.teamsPreferences.exec("removeTeamPhoto",r).callback(t)},e.uploadTeamLogo=function(e,t,r){var n;if(this.isItem(e,"teamPreferences")&&(e=teamPreferences.id),"undefined"==typeof FormData&&this.reject("Your browser does not support the new file upload APIs.","file",r),!this.isId(e))throw new TSArgsError("teamsnap.uploadTeamLogo","must include `teamPreferencesId`");if(!(t instanceof File))throw new TSArgsError("teamsnap.uploadTeamLogo","must include `file` as type File");return n={teamPreferencesId:e,file:t},this.collections.teamsPreferences.exec("uploadTeamLogo",n).pop().callback(r)},e.deleteTeamLogo=function(e,t){var r;if(!e)throw new TSArgsError("teamsnap.deleteTeamLogo","`teamPreferencesId` must be provided");if(this.isItem(e,"teamPreferences")&&(e=teamPreferences.id),!this.isId(e))throw new TSArgsError("teamsnap.deleteTeamLogo","`teamPreferencesId` must be a valid id");return r={teamPreferencesId:e},this.collections.teamsPreferences.exec("removeTeamLogo",r).callback(t)}}),e.register("collections/teamsResults.coffee",function(e,t,r){e.loadTeamsResults=function(e,t){if(!e||"object"!=typeof e)throw new TSArgsError("teamsnap.loadTeamsResults","must provide query parameters");return this.loadItems("teamResults",e,t)},e.loadTeamResults=function(e,t){var r;if(!this.isId(e))throw new TSArgsError("teamsnap.loadTeamResults","must provide a teamId");return r={teamId:e},this.loadItem("teamResults",r,t)}}),e.register("collections/trackedItemStatuses.coffee",function(e,t,r){var n,s,i,o;e.TRACKING={NONE:0,CHECK:1,X:2},i={},s=e.TRACKING;for(n in s)o=s[n],i[o]=!0;e.loadTrackedItemStatuses=function(e,t){if(this.isId(e))e={teamId:e};else if(!e||"object"!=typeof e)throw new TSArgsError("teamsnap.loadTrackedItemStatuses","must provide a teamId or query parameters");return this.loadItems("trackedItemStatus",e,t)},e.saveTrackedItemStatus=function(e,t){if(!e)throw new TSArgsError("teamsnap.saveTrackedItemStatus","`trackedItemStatus` must be provided");if(!this.isItem(e,"trackedItemStatus"))throw new TSArgsError("teamsnap.saveTrackedItemStatus","`trackedItemStatus.type` must be 'trackedItemStatus'");return i[e.statusCode]?this.saveItem(e,t):this.reject("You must select a valid status","statusCode",t)}}),e.register("collections/trackedItems.coffee",function(e,t,r){e.loadTrackedItems=function(e,t){if(this.isId(e))e={teamId:e};else if(!e||"object"!=typeof e)throw new TSArgsError("teamsnap.loadTrackedItems","must provide a teamId or query parameters");return this.loadItems("trackedItem",e,t)},e.createTrackedItem=function(e){return this.createItem(e,{type:"trackedItem",name:""})},e.saveTrackedItem=function(e,t){var r;if(!e)throw new TSArgsError("teamsnap.saveTrackedItem","`trackedItem` must be provided");if(!this.isItem(e,"trackedItem"))throw new TSArgsError("teamsnap.saveTrackedItem","`trackedItem.type` must be 'trackedItem'");return e.teamId?(null!=(r=e.name)?r.trim():void 0)?this.saveItem(e,t):this.reject("You must provide a name for the tracked item.","name",t):this.reject("You must choose a team.","teamId",t)},e.deleteTrackedItem=function(e,t){if(!e)throw new TSArgsError("teamsnap.deleteTrackedItem","`trackedItem` must be provided");return this.deleteItem(e,t)}}),e.register("collections/users.coffee",function(e,t,r){e.loadUsers=function(e,t){if(this.isId(e))e={teamId:e};else if(!e||"object"!=typeof e)throw new TSArgsError("teamsnap.loadUsers","must provide a teamId or query parameters");return this.loadItems("user",e,t)},e.loadMe=function(e){return this.collections.root.queryItem("me",e)},e.saveUser=function(e,t){var r;if(!e)throw new TSArgsError("teamsnap.saveUser","`user` must be provided");if(!this.isItem(e,"user"))throw new TSArgsError("teamsnap.saveUser","`user.type` must be 'user'");return(null!=(r=e.email)?r.trim():void 0)?this.saveItem(e,t):this.reject("You must provide an email for the user.","email",t)},e.sendEmailValidation=function(e,t){if(null==e&&(e={}),Object.keys(e).length&&(null==e.teamId||!this.isId(e.teamId)))throw new TSArgsError("teamsnap.sendEmailValidation","if a params object is used, it must contain a teamId");return this.collections.users.exec("sendEmailValidation",e).pop().callback(t)}}),e.register("errors.coffee",function(e,t,r){var n,s,i,o,a=function(e,t){function r(){this.constructor=e}for(var n in t)m.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},m={}.hasOwnProperty;s=function(e){function t(e){t.__super__.constructor.call(this),this.name="TeamSnapError",this.message=e}return a(t,e),t}(Error),n=function(e){function t(e,r){t.__super__.constructor.call(this),this.name="TeamSnapArgumentError",this.message="Failed to execute `"+e+"`: "+r+"."}return a(t,e),t}(TypeError),o=function(e){function t(e,r){t.__super__.constructor.call(this),this.name="TeamSnapValidationError",this.message=e,this.field=r}return a(t,e),t}(RangeError),i=function(e){function t(e){t.__super__.constructor.call(this),this.name="TeamSnapServerError",this.message=e||"An unknown error occurred on TeamSnap's server."}return a(t,e),t.create=function(e,r){return new t(e,r)},t}(Error),global.TSError=s,global.TSArgsError=n,global.TSValidationError=o,global.TSServerError=i}),e.register("eventEmitter.coffee",function(e,t,r){var n,s,i,o,a,m,u,c,l,d,f;f=t("./types"),s=function(e){return e.replace(/[-_]+(\w)/g,function(e,t){return t.toUpperCase()})},m=function(){try{return new CustomEvent("test-support"),!0}catch(e){return!1}}(),o=function(e,t){var r;return m?r=new CustomEvent(e,{detail:t}):(r=document.createEvent("CustomEvent"),r.initCustomEvent(e,!0,!1,t)),document.dispatchEvent(r)},a=function(e){var t;return t=null,e.some(function(e){var r;return"id"===e.name&&(r=parseInt(e.value),r&&(t=r),!0)}),t},n=function(e,t,r){var n,i;return n=null,(null!=(i=e.items)?i.length:void 0)&&(r=e.items.map(function(e){return a(e.data)}),r=r.filter(function(e){return null!=e}),null!=r&&(Array.isArray(r)||(r=[r]),r.length&&(n={method:t,collection:s(e.rel),refIds:r}))),n},i=function(e,t){var r;return null==t&&(t="event"),r="teamsnap-sdk-"+t,o(r,e)},u=function(e,t,r,n,o){var a,m,u,c,l,d,p,h;return c="request-start",null!=o&&(c="request-error"),h=r.split("/"),d=h[h.length-1],"DELETE"===t.toUpperCase()?(l=parseInt(h[h.length-1]),a=h[h.length-2],u={requestId:e,method:t,collection:a,data:{id:l}},null!=o&&(u.error=o),i(u,c)):"search"!==d?(m=s(d),p=f.getSingularType(m),p&&(u={requestId:e,method:t,collection:m,data:n},null!=o&&(u.error=o)),i(u,c)):(m=s(h[h.length-2]),(p=f.getSingularType(m))?(u={requestId:e,method:t,collection:m,data:n},null!=o&&(u.error=o),i(u,c)):void 0)},d=function(e,t,r,n){return u(e,t,r,n)},c=function(e,t,r,n,s){return u(e,t,r,n,s)},l=function(e,t,r){var o,a,m,u,c,l,d,p,h,v;if(c=r.data,l=null,"DELETE"===t.toUpperCase()){if(v=r.responseURL.split("/"),p=[parseInt(v[v.length-1])],o=s(v[v.length-2]),h=f.getSingularType(o))return l={requestId:e,method:t,collection:o,refIds:p},i(l,"request-response")}else{if(Array.isArray(c))return c.forEach(function(r){var o;if(o=s(r.collection.rel),h=f.getSingularType(o),h&&(l=n(r.collection,t,p)))return l.requestId=e,i(l,"request-response")});if("bulk_load"===c.collection.rel){if(u={},a=null!=(d=c.collection)?d.items:void 0,null!=a?a.length:void 0)return a.forEach(function(e){var t,r;return r=null,e.data.some(function(e){return"type"===e.name&&(r=s(e.value),!0)}),t=f.getPluralType(r),u.hasOwnProperty(t)||(u[t]={items:[],rel:t}),u[t].items.push(e)}),Object.keys(u).forEach(function(r){if(o=u[r],h=f.getSingularType(r),h&&(l=n(o,t,p)))return l.requestId=e,i(l,"request-response")})}else if(l=n(c.collection,t,p),m=s(c.collection.rel),h=f.getSingularType(m),h&&l)return l.requestId=e,i(l,"request-response")}},r.exports={emit:i,requestStart:d,requestError:c,requestResponse:l}}),e.register("linking.coffee",function(e,t,r){var n,s,i,o,a,m,u,c;o=t("./types"),i=function(e,t){if(null==t&&(t={}),e)return Array.isArray(e)?(e.forEach(function(e){if(e.href)return t[e.href]=e}),e.forEach(function(e){return n(e,t)})):(e.href&&(t[e.href]=e),n(e,t)),e},u=function(e,t){if(null==t&&(t={}),e)return Array.isArray(e)?e.forEach(function(e){return a(e,t)}):a(e,t),e},n=function(e,t){if(!t)throw new TSArgsError("linkItem","lookup must be provided");return e.href&&(t[e.href]=e),e.links.each(function(r,n){var i;if(!o.isPluralType(r)){if(!(i=t[n]))return;return e[r]=i,s(e,i)}if(!e[r])return e[r]=[]})},s=function(e,t){var r,n,s;return s=o.getPluralType(e.type),r=function(t){var r;return r=-1,null!=e.href&&t.some(function(t,n){if(t.href===e.href)return r=n,!0}),r},s&&t.links.has(s)?(t[s]||(t[s]=[]),t[s].indexOf(e)===-1?(n=r(t[s]),n>-1?t[s][n]=e:t[s].push(e)):void 0):t.links.each(function(r,n){if(n===e.href)return t[r]=e})},a=function(e,t){if(e.href)return t[e.href]===e&&delete t[e.href],e.links.each(function(t,r){if(e[t])return o.isPluralType(t)?c(e[t],e):m(e,e[t]),delete e[t]})},m=function(e,t){var r,n;return n=o.getPluralType(e.type),n&&t.links.has(n)&&t[n]?(r=t[n].indexOf(e),r!==-1?t[n].splice(r,1):void 0):t.links.each(function(r,n){if(t[r]===e)return delete t[r]})},c=function(e,t){return e.forEach(function(e){return e.links.each(function(r,n){if(e[r]===t)return delete e[r]})})},e.linkItems=i,e.unlinkItems=u,e.linkItem=n,e.linkItemWith=s,e.unlinkItem=a,e.unlinkItemFrom=m,e.unlinkItemsFrom=c}),e.register("loadCollections.coffee",function(e,t,r){var n,s,i,o,a={}.hasOwnProperty;i=t("./promises"),o=t("./types"),n=t("./model").Collection,s=null,r.exports=function(e,t){return s&&"reject"!==s.getStatus()||(s=e.get(teamsnap.apiUrl).then(function(r){var m,u,c,l,d,f,p,h,v,I;if(m={},m.root=h=n.fromData(r.data),t&&t.root.version===h.version){m={};for(u in t)I=t[u],m[u]=new n(I);return s=i.resolve(m)}v={},c=[],l=m.root.links;for(u in l)a.call(l,u)&&(I=l[u],v[I.href]=u);return(null!=(d=m.root)&&null!=(f=d.links)&&null!=(p=f.schemas)?p.href:void 0)?c.push(e.get(m.root.links.schemas.href).then(function(e){return e.data.forEach(function(e){var t;if(t=v[e.collection.href],t&&"root"!==t)return m[t]=n.fromData(e)})})):o.getTypes().forEach(function(t){var r;if(r=o.getPluralType(t),h.links.has(r))return c.push(e.get(h.links.href(r)).then(function(e){return m[r]=n.fromData(e.data)}))}),i.when.apply(i,c).then(function(){return m})})),s},r.exports.clear=function(){return s=null}}),e.register("model.coffee",function(e,t,r){var n,s,i,o,a,m,u,c,l,d,f,p=function(e,t){function r(){this.constructor=e}for(var n in t)h.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},h={}.hasOwnProperty;d=t("./promises"),s=global.File||function(){},n=function(){function e(e){null==e&&(e={}),this.href=e.href,this.links=new o(e.links),this.queries=new o(e.queries),this.commands=new o(e.commands),this.template=e.template||[],e.version&&(this.version=e.version),e.items&&(this.items=e.items)}return e.fromData=function(t){return(new e).deserialize(t)},e.prototype.deserialize=function(e){var t,r;if(e.collection&&(e=e.collection),e)return this.href=e.href,this.links.deserialize(e.links),this.queries.deserialize(e.queries),this.commands.deserialize(e.commands),e.version&&(this.version=e.version),this.template=(null!=(t=e.template)?t.data:void 0)||[],(null!=(r=e.items)?r.length:void 0)&&(this.items=e.items),this},e}(),a=function(e){function t(e,t){this._request=e,this.href=t.href,this.links=t.links,this.queries=t.queries,this.commands=t.commands,this.template=t.template,this.version=t.version,t.items&&(this.items=i.fromArray(this._request,t.items))}return p(t,e),t.fromData=function(e,r){return new t(e,(new n).deserialize(r))},
t.prototype.save=function(e,t){var r,n;return e instanceof i||(e=i.create(this._request,e)),n=e.href?"put":"post",r=e.serialize(this.template),0===r.template.data.length?d.resolve(e).callback(t):this._request(n,e.href||this.href,r).then(function(t){return function(r){var n,s,o,a;if(s=null!=(o=r.data)&&null!=(a=o.collection)?a.items:void 0){if(s.length>1)return e.deserialize(s.shift()),n=i.fromArray(t._request,s),n.unshift(e),n;if(s.length)return e.deserialize(r.data)}}}(this)).callback(t)},t.prototype.loadItems=function(e,t){return this.links.loadItems(this._request,e,t)},t.prototype.loadItem=function(e,t){return this.links.loadItem(this._request,e,t)},t.prototype.queryItems=function(e,t,r){return this.queries.loadItems(this._request,e,t,r)},t.prototype.queryItem=function(e,t,r){return this.queries.loadItem(this._request,e,t,r)},t.prototype.exec=function(e,t,r){return this.commands.exec(this._request,e,t,r)},t.prototype.file=function(e,t,r,n){return this.commands.fileExec(this._request,e,t,r,n)},t}(n),i=function(){function e(e,t){this._request=e,"string"==typeof t?this.href=t:t&&"object"==typeof t&&u(t,this),this.links instanceof o||(this.links=new o(null!=t?t.links:void 0))}return e.create=function(t,r){return new e(t,r)},e.fromArray=function(t,r){return Array.isArray(r)?r.map(function(r){return e.fromData(t,r)}):r},e.fromData=function(e,t){return t.collection||t.data?this.create(e).deserialize(t):this.create(e,t)},e.prototype.deserialize=function(e){var t,r,n,s,i,o;if((null!=e?e.collection:void 0)&&(e=null!=(s=e.collection.items)?s[0]:void 0),e){for(this.href=e.href,this.links.deserialize(e.links),i=e.data,t=0,r=i.length;t<r;t++)n=i[t],o=n.value,"DateTime"===n.type&&o&&(o=new Date(o)),"type"===n.name&&(o=m(o)),this[m(n.name)]=o;return this}},e.prototype.serialize=function(e){var t,r;if(!(null!=e?e.length:void 0))throw new TSError("You must provide the collection's template");return t=[],r=this,e.forEach(function(e){var n;if(n=r[m(e.name)],"type"===e.name&&(n=f(n)),void 0!==n)return t.push({name:e.name,value:n})}),{template:{data:t}}},e.prototype.loadItems=function(e,t){return this.links.loadItems(this._request,e,t)},e.prototype.loadItem=function(e,t){return this.links.loadItem(this._request,e,t)},e.prototype["delete"]=function(e,t){var r,n,s,i;if("function"==typeof e&&(t=e,e=null),e){n=[];for(s in e)h.call(e,s)&&(i=e[s],n.push({name:f(s),value:i}));r={template:{data:n}}}return this._request["delete"](this.href,r).callback(t)},e.prototype.copy=function(t){var r;return r={},t?t.forEach(function(e){return function(t){var n;return n=m(t.name),r[n]=e[n]}}(this)):u(this,r),delete r.id,delete r.href,r.type=this.type,r.links=this.links.cloneEmpty(),new e(this._request,r)},e.prototype.toJSON=function(){var e;return e={},Object.keys(this).forEach(function(t){return function(r){var n;if(n=t[r],"function"!=typeof n&&"_"!==r.charAt(0)&&!t.links.has(r))return e[r]=t[r]}}(this)),e},e}(),o=function(){function e(e){e&&u(e,this)}return e.prototype.deserialize=function(e){var t,r,n,s,i,o,a,u,c,l,d,f;if(Array.isArray(e)){for(a={},Object.keys(this).forEach(function(e){return a[e]=!0}),r=0,s=e.length;r<s;r++){if(t=e[r],c={},Array.isArray(t.data))for(d=t.data,n=0,i=d.length;n<i;n++)u=d[n],c[m(u.name)]=u.value;l=m(t.rel),this[l]={href:t.href,params:c},delete a[l]}f=[];for(o in a)f.push(delete this[o]);return f}},e.prototype.has=function(e){return this.hasOwnProperty(e)},e.prototype.href=function(e){var t;return null!=(t=this[e])?t.href:void 0},e.prototype.each=function(e){var t,r,n,s;r=this,s=[];for(n in r)h.call(r,n)&&(t=r[n],s.push(e(n,t.href,t.params)));return s},e.prototype.loadItems=function(e,t,r,n){var s;return"function"==typeof r&&(n=r,r=void 0),s=r._teamsnapReturnCollection?"complete":"items",this._request(e,"get",t,r,s).callback(n)},e.prototype.loadItem=function(e,t,r,n){return"function"==typeof r&&(n=r,r=void 0),this._request(e,"get",t,r,"item").callback(n)},e.prototype["delete"]=function(e,t,r){return this._request(e,"delete",t,void 0,"item").callback(r)},e.prototype.exec=function(e,t,r,n){return"function"==typeof r&&(n=r,r=void 0),this._request(e,"post",t,r,"items").callback(n)},e.prototype.fileExec=function(e,t,r,n,s){var i;return"function"==typeof r&&(s=n,n=r,r=void 0),i=function(e,t){if(t instanceof FormData)return e.upload.onprogress=function(e){if(e.lengthComputable)return n({loaded:e.loaded,total:e.total})}},e.hook(i),this._request(e,"post",t,r,"items").callback(s)},e.prototype.cloneEmpty=function(){var t,r,n,s;t=new e,n=this;for(s in n)h.call(n,s)&&(r=n[s],r.href&&(t[s]={href:""}));return t},e.prototype._request=function(e,t,r,n,o){var a,m,u,c,l,d;if(!(m=this[r]))throw new TSError("Unable to find rel '"+r+"'");if(n){a={};for(l in n)if(h.call(n,l)){if(d=n[l],d instanceof s){a=new FormData;for(l in n)h.call(n,l)&&(d=n[l],a.append(f(l),d));break}m.params.hasOwnProperty(l)?a[f(l)]=d:l.indexOf("__")!==-1&&(u=l.split("__"),c=teamsnap.getCollectionForItem(u[0]),c.queries.search.params.hasOwnProperty(u[1])&&(a[f(l)]=d))}}return e(t,m.href,a).then(function(t){var r,n,s;return"complete"===o?t.data:(r=(null!=(n=t.data)&&null!=(s=n.collection)?s.items:void 0)?i.fromArray(e,t.data.collection.items):[],"item"===o?r.pop():r)})},e}(),c=/(At|Date)$/,l=/^\d{4}-/,u=function(e,t){return Object.keys(e).forEach(function(r){var n;if(n=e[r],"function"!=typeof n&&"_"!==r.charAt(0))return c.test(r)&&l.test(n)&&(n=new Date(n)),t[r]=n}),t},m=function(e){return e.replace(/[-_]+(\w)/g,function(e,t){return t.toUpperCase()})},f=function(e){return e.replace(/[A-Z]/g,function(e){return"_"+e.toLowerCase()})},e.Collection=n,e.ScopedCollection=a,e.Item=i,e.MetaList=o}),e.register("persistence.coffee",function(e,t,r){var n,s,i,o,a,m,u,c,l,d,f,p,h,v,I,b,g,y=[].indexOf||function(e){for(var t=0,r=this.length;t<r;t++)if(t in this&&this[t]===e)return t;return-1};d=t("./promises"),m=t("./linking"),I=t("./types"),n=t("./model").Item,f=t("./model"),i=f.ScopedCollection,n=f.Item,s=f.MetaList,u=null,e.enablePersistence=function(e){var t;if(!u){if(!this.collections)throw new TSError("You must auth() and loadCollections() before enabling persistence.");return this.persistenceEnabled=!0,u={},c(),l(this),t=[],t.push.apply(t,this.plans),t.push.apply(t,this.smsGateways),t.push.apply(t,this.sports),t.push.apply(t,this.timeZones),m.linkItems(this.plans.concat(this.sports),u),e?n.fromArray(this.request,e):void 0}},e.disablePersistence=function(){if(u)return this.persistenceEnabled=!1,m.unlinkItems(Object.keys(u).map(function(e){return u[e]}),u),u=null,p(),h(this),this},e.findItem=function(e){return null!=u?u[e]:void 0},e.getAllItems=function(){return Object.keys(u).map(function(e){return u[e]})},e.unlinkTeam=function(e){var t,r,n,s,i,o,a,m,u;for(r=[e],m=null!=(i=e.members)?i.filter(function(e){return e.user}).map(function(e){return e.user}):void 0,o=this.getTeamTypes(),t=0,n=o.length;t<n;t++)a=o[t],s=this.getPluralType(a),(u=e[s])&&u.length?r.push.apply(r,u):(u=e[a])&&r.push(u);return unlinkItems(r)},c=function(){return b(n,"fromArray",function(e){return function(t,r){var n;return n=e.call(this,t,r),m.linkItems(n,u).map(function(e){return e.saveState()})}}),b(i.prototype,"save",function(e){return function(t,r){return e.call(this,t).then(function(e){return Array.isArray(e)?e.map(function(e){return m.linkItem(e,u),e.saveState()}):(m.linkItem(e,u),e.saveState())}).callback(r)}}),b(n.prototype,"delete",function(e){return function(t,r){var n;return n=this,m.unlinkItem(n,u),e.call(this,t).fail(function(e){return m.linkItem(n,u),e}).callback(r)}}),b(n,"create",function(e){return function(t,r){var n;return n=e.call(this,t,r),m.linkItem(n,u),n}}),b(n.prototype,"deserialize",function(e){return function(t){var r,n;return(null!=t?t.collection:void 0)&&(t=null!=(n=t.collection.items)?n[0]:void 0),r=u[t.href]||this,e.call(r,t)}}),b(n.prototype,"serialize",function(e){return function(t){var r,n;return r=e.call(this,t),(n=this._state)&&(r.template.data=r.template.data.filter(function(e){var t,r,s;return r=n[o(e.name)],s=e.value,"type"===e.name&&(s=o(s)),t=s===r||s&&r&&s.valueOf()===r.valueOf(),!t})),r}}),n.prototype.saveState=function(){return this._state={_undos:[]},this.href&&a(this,this._state),this},n.prototype.rollback=function(){return this._state._undos.reverse().forEach(function(e){return e()}),this._state._undos.length=0,a(this._state,this)},n.prototype.link=function(e,t){var r,n;return this._state||this.saveState(),n=this._state._undos,this[e]&&(r=this[e],m.unlinkItemFrom(this,this[e]),n.push(function(t){return function(){return t[e]=r,t.links[e].href=r.href,t[e+"Id"]=r.id,m.linkItemWith(t,r)}}(this))),this[e]=t,t&&(this[e+"Id"]=t.id,this.links[e].href=t.href,m.linkItemWith(this,t),n.push(function(r){return function(){return delete r[e],delete r[e+"Id"],m.unlinkItemFrom(r,t)}}(this))),this}},p=function(){return v(s.prototype,"_request"),v(i.prototype,"save"),v(n.prototype,"delete"),v(n,"create"),v(n.prototype,"deserialize"),v(n.prototype,"serialize"),delete n.prototype.saveState,delete n.prototype.rollback,delete n.prototype.link},l=function(e){return g(e,"saveMember",function(t){return d.when(e.loadAvailabilities({memberId:t.id}),e.loadTrackedItemStatuses({memberId:t.id}),e.loadCustomData({memberId:t.id}),e.loadLeagueCustomData({memberId:t.id}),e.loadMemberPayments({memberId:t.id}),e.loadMemberBalances({memberId:t.id}),e.loadTeamFees({teamId:t.teamId}),e.loadContacts({memberId:t.id}),e.loadContactEmailAddresses({memberId:t.id}),e.loadContactPhoneNumbers({memberId:t.id}))}),b(e,"deleteMember",function(t){return function(r,n){var s;return s=[],s.push.apply(s,r.assignments),s.push.apply(s,r.availabilities),r.contacts.forEach(function(e){return s.push.apply(s,e.contactEmailAddresses),s.push.apply(s,e.contactPhoneNumbers),s.push(e)}),s.push.apply(s,r.trackedItemStatuses),s.push.apply(s,r.memberPayments),s.push.apply(s,r.memberStatistics),s.push.apply(s,r.statisticData),s.push.apply(s,r.memberAssignments),m.unlinkItems(s,u),t.call(this,r,n).then(function(t){return e.loadTeamFees(r.teamId),e.loadStatisticAggregates(r.teamId),t}).fail(function(e){return m.linkItems(s,u),e}).callback(n)}}),b(e,"deleteContact",function(t){return function(r,n){var s;return s=[],s.push.apply(s,r.contactEmailAddresses),s.push.apply(s,r.contactPhoneNumbers),m.unlinkItems(s,u),t.call(this,r,n).then(function(t){return e.loadMembers({memberId:r.memberId}).then(function(){return t})}).fail(function(e){return m.linkItems(s,u),e}).callback(n)}}),b(e,"saveMemberEmailAddress",function(t){return function(r,n){return t.call(this,r,n).then(function(t){return e.loadMembers({id:r.memberId}).then(function(){return t})}).callback(n)}}),b(e,"deleteMemberEmailAddress",function(t){return function(r,n){return t.call(this,r,n).then(function(t){return e.loadMembers({id:r.memberId}).then(function(){return t})}).callback(n)}}),b(e,"saveMemberPhoneNumber",function(t){return function(r,n){return t.call(this,r,n).then(function(t){return d.when(e.loadMembers({id:r.memberId}),e.loadContactPhoneNumbers({memberId:r.memberId})).then(function(){return t})}).callback(n)}}),b(e,"deleteMemberPhoneNumber",function(t){return function(r,n){return t.call(this,r,n).then(function(t){return e.loadMembers({id:r.memberId}).then(function(){return t})}).callback(n)}}),b(e,"saveContactEmailAddress",function(t){return function(r,n){return t.call(this,r,n).then(function(t){return d.when(e.loadMembers({id:r.memberId}),e.loadContacts({memberId:r.memberId})).then(function(){return t})}).callback(n)}}),b(e,"deleteContactEmailAddress",function(t){return function(r,n){return t.call(this,r,n).then(function(t){return d.when(e.loadMembers({id:r.memberId}),e.loadContacts({memberId:r.memberId})).then(function(){return t})}).callback(n)}}),b(e,"saveContactPhoneNumber",function(t){return function(r,n){return t.call(this,r,n).then(function(t){return d.when(e.loadMembers({id:r.memberId}),e.loadContacts({memberId:r.memberId})).then(function(){return t})}).callback(n)}}),b(e,"deleteContactPhoneNumber",function(t){return function(r,n){return t.call(this,r,n).then(function(t){return d.when(e.loadMembers({id:r.memberId}),e.loadContacts({memberId:r.memberId})).then(function(){return t})}).callback(n)}}),g(e,"saveEvent",function(t){var r;return r=Array.isArray(t)?t.map(function(e){return e.id}).join(","):t.id,e.loadAvailabilities({eventId:r})},function(t){var r,n,s,i,o,a;return t.isGame?d.when(e.loadTeamResults(t.teamId),e.loadOpponentResults(t.opponentId),e.loadEventStatistics({eventId:t.id})):Array.isArray(t)?(o=function(){var e,n,s;for(s=[],e=0,n=t.length;e<n;e++)r=t[e],s.push(r.id);return s}(),n=t.shift(),a=[],null!=(s=n.team)&&null!=(i=s.events)&&i.forEach(function(e){if(e.repeatingUuid===n.repeatingUuid)return a.push(e)}),a=a.filter(function(e){var t;return t=e.id,y.call(o,t)<0}),m.unlinkItems(a,u)):void 0}),b(e,"deleteEvent",function(t){return function(r,n,s,i,o){var a,c,l,f,p,h;return a=[],"string"==typeof n&&n!==e.EVENTS.NONE?(h=r.repeatingUuid,f=r.startDate,null!=(c=r.team)&&null!=(l=c.events)&&l.forEach(function(e){if(e.repeatingUuid===h)return a.push(e)}),n===e.EVENTS.FUTURE&&(a=a.filter(function(e){return e.startDate>=f}))):a.push(r),p=a.slice(),a.forEach(function(e){return p.push.apply(p,e.assignments),p.push.apply(p,e.availabilities),p.push.apply(p,e.eventStatistics)}),r.assignments.forEach(function(e){if(e.memberAssignments.length)return e.memberAssignments.forEach(function(e){return p.push.apply(p,e)})}),m.unlinkItems(p,u),t.call(this,r,n,s,i,o).then(function(t){return r.isGame?d.when(e.loadTeamResults(r.teamId),e.loadOpponentResults(r.opponentId)).then(function(){return t}):t},function(e){return m.linkItems(p,u),e}).callback(o)}}),g(e,"saveTrackedItem",function(t){return e.loadTrackedItemStatuses({trackedItemId:t.id})}),b(e,"deleteTrackedItem",function(e){return function(t,r){var n;return n=t.trackedItemStatuses.slice(),m.unlinkItems(n,u),e.call(this,t).fail(function(e){return m.linkItems(n,u),e}).callback(r)}}),b(e,"deleteStatistic",function(t){return function(r,n){var s;return s=r.statisticData.slice(),s.push.apply(s,r.eventStatistics),s.push.apply(s,r.memberStatistics),s.push.apply(s,r.teamStatistics),s.push.apply(s,r.statisticAggregates),m.unlinkItems(s,u),t.call(this,r).then(function(t){var n,s,i;return i=r.teamId,s=t.id,n=["memberStatistic","teamStatistic","statisticAggregate","eventStatistic"],e.bulkLoad(i,n).then(function(){return t})}).fail(function(e){return m.linkItems(s,u),e}).callback(n)}}),b(e,"saveStatistic",function(t){return function(r,n){return null==r.statisticGroupId&&null!=r.statisticGroup&&m.unlinkItems(r.statisticGroup,r),t.call(this,r,n).then(function(t){var n,s,i;return i=r.teamId,s=t.id,n=["memberStatistic","teamStatistic","statisticAggregate","statistic","statisticGroup","eventStatistic"],e.bulkLoad(i,n).then(function(){return t})}).callback(n)}}),b(e,"bulkSaveStatisticData",function(t){return function(r,n){return t.call(this,r,n).then(function(t){var r,n;if(null!=t[0]&&null!=t[0].teamId)return n=t[0].teamId,r=["memberStatistic","statisticAggregate","eventStatistic"],e.bulkLoad(n,r).then(function(){return t})}).callback(n)}}),b(e,"saveStatisticDatum",function(t){return function(r,n){return t.call(this,r,n).then(function(t){var r,n,s;return s=t.teamId,n=t.statisticId,r=["memberStatistic","statisticAggregate","eventStatistic"],e.bulkLoad(s,r).then(function(){return t})}).callback(n)}}),b(e,"bulkDeleteStatisticData",function(t){return function(r,n,s){var i,o;return o=[],o.push(n.eventStatistics),null!=(i=r.statisticData)&&i.forEach(function(e){if(e.event===n)return o.push(e)}),m.unlinkItems(o,u),t.call(this,r,n).then(function(t){var n,s;return s=r.teamId,n=["memberStatistic","statisticAggregate","eventStatistic"],e.bulkLoad(s,n).then(function(){return t})}).fail(function(e){return m.linkItems(o,u),e}).callback(s)}}),b(e,"saveMemberPayment",function(t){return function(r,n){return t.call(this,r).then(function(t){var n,s;return n=t.memberId,s=t.teamFeeId,d.when(e.loadMemberBalances({memberId:n}),e.loadTeamFees({id:s}),e.loadPaymentNotes({memberPaymentId:r.id})).then(function(){return t})}).callback(n)}}),b(e,"saveTeamFee",function(t){return function(r,n){return t.call(this,r).then(function(t){var r;return r=t.teamId,e.loadMemberBalances({teamId:r}).then(function(){return t})}).callback(n)}}),b(e,"deleteTeamFee",function(t){return function(r,n){return t.call(this,r).then(function(t){var n;return n=r.teamId,e.loadMemberBalances({teamId:n}).then(function(){return t})}).callback(n)}}),b(e,"assignMediaToGroup",function(t){return function(r,n,s){return t.call(this,r,n).then(function(t){var r,n;return n=t[0].teamId,r=["teamMediaGroup","teamMedium"],e.bulkLoad(n,r).then(function(){return t})}).callback(s)}}),b(e,"setMediumAsTeamPhoto",function(t){return function(r,n){return t.call(this,r).then(function(t){var r;return r=t.teamId,e.loadTeamPreferences(r).then(function(){return t})}).callback(n)}}),b(e,"setMediumAsMemberPhoto",function(t){return function(r,n,s){return t.call(this,r,n).then(function(t){if(null!=n.id)return e.loadMembers({id:n.id}).then(function(){return t})}).callback(s)}}),b(e,"uploadTeamMedium",function(t){return function(r,n,s){return t.call(this,r,n).then(function(t){return d.when(e.loadTeam(r.teamId),e.loadTeamMediaGroups({id:r.teamMediaGroupId})).then(function(){return t})}).callback(s)}}),b(e,"saveTeamMedium",function(t){return function(r,n){var s,i;return i=[r.teamMediaGroupId],null!=(null!=(s=r._state)?s.teamMediaGroupId:void 0)!==r.teamMediaGroupId&&i.push(r._state.teamMediaGroupId),t.call(this,r).then(function(t){var n;return n=r.teamId,e.loadTeamMediaGroups({id:i})}).callback(n)}}),b(e,"saveTeamVideoLink",function(t){return function(r,n){return t.call(this,r).then(function(t){return e.loadTeamMediaGroups({id:r.teamMediaGroupId})}).callback(n)}}),b(e,"deleteTeamMedium",function(t){return function(r,n){var s;return s=r.teamMediumComments.slice(),m.unlinkItems(s,u),t.call(this,r).then(function(t){return d.when(e.loadTeam(r.teamId),e.loadTeamMediaGroups({id:r.teamMediaGroupId})).then(function(){return t})},function(e){return m.linkItems(s,u),e}).callback(n)}}),b(e,"bulkDeleteTeamMedia",function(t){return function(r,n,s){return"function"==typeof n&&(s=n),t.call(this,r,s).then(function(t){return"string"==typeof n||"number"==typeof n?d.when(e.loadTeam(n),e.loadTeamMediaGroups({teamId:n})).then(function(){return t}):t}).callback(s)}}),b(e,"reorderTeamMedia",function(t){return function(r,n,s,i){var o;return o={teamId:r},"function"==typeof s&&(i=s),"string"!=typeof s&&"number"!=typeof s||(o={id:s}),t.call(this,r,n).then(function(t){return e.loadTeamMediaGroups(o).then(function(){return t})}).callback(i)}}),b(e,"deleteTeam",function(e){return function(t,r){var n;return n=[],t.links.each(function(e){var r;if(r=t[name],I.getType(e)&&"sport"!==e&&"plan"!==e)return Array.isArray(r)?n.push.apply(n,r):n.push(r)}),e.call(this,t).then(function(e){return m.unlinkItems(n,u),e}).callback(r)}}),b(e,"deleteForumTopic",function(e){return function(t,r){var n;return n=[],n.push.apply(n,t.forumPosts),m.unlinkItems(n,u),e.call(this,t,r).fail(function(e){return m.linkItems(n,u),e}).callback(r)}}),b(e,"invite",function(t){return function(r,n){return t.call(this,r).then(function(t){var n,s;return r.hasOwnProperty("memberId")?(s=r.memberId,d.when(e.loadContactEmailAddresses({memberId:s}),e.loadContactPhoneNumbers({memberId:s}),e.loadMembersPreferences({memberId:s}),e.features.combinedContactCards!==!0?(e.loadMemberEmailAddresses({memberId:s}),e.loadMemberPhoneNumbers({memberId:s})):void 0).then(function(){return t})):r.hasOwnProperty("contactId")?(n=r.contactId,e.loadContactEmailAddresses({contactId:n}).then(function(){return t})):void 0}).callback(n)}}),b(e,"memberPaymentTransaction",function(t){return function(r,n,s,i){return t.call(this,r,n,s).then(function(t){var n,s;return n=t.memberId,s=t.teamFeeId,d.when(e.loadMemberBalances({memberId:n}),e.loadTeamFees({id:s}),e.loadPaymentNotes({memberPaymentId:r})).then(function(){return t})}).callback(i)}}),b(e,"importMembersFromTeam",function(t){return function(r,n,s,i){return t.call(this,r,n,s).then(function(t){return r=t.map(function(e){return e.id}),d.when(e.loadMembers({id:r}),e.loadContacts({memberId:r}),e.loadContactEmailAddresses({memberId:r}),e.loadContactPhoneNumbers({memberId:r}),e.features.combinedContactCards?void 0:(e.loadMemberEmailAddresses({memberId:r}),e.loadMemberPhoneNumbers({memberId:r}))).then(function(){return t})}).callback(i)}}),b(e,"saveBroadcastAlert",function(t){return function(r,n){return t.call(this,r).then(function(t){var r;return r=null!=t.member||null!=t.divisionMember?{memberId:t.memberId}:{contactId:t.contactId},e.loadMessageData(r),e.loadMessages({messageSourceId:t.id})}).callback(n)}}),b(e,"saveBroadcastEmail",function(t){return function(r,n){return t.call(this,r).then(function(t){var r;return r=null!=t.member||null!=t.divisionMember?{memberId:t.memberId}:{contactId:t.contactId},e.loadMessageData(r),e.loadMessages({messageSourceId:t.id})}).callback(n)}}),b(e,"saveAssignment",function(t){return function(r,n){return t.call(this,r,n).then(function(t){return e.loadMemberAssignments({assignmentId:t.id})}).callback(n)}}),b(e,"deleteAssignment",function(t){return function(r,n){var s;return r.memberAssignments.length&&(s=r.memberAssignments,m.unlinkItems(s,u)),t.call(this,r).then(function(t){return e.loadEvents({eventId:r.eventId}).then(function(){return t})}).callback(n)}}),b(e,"saveMemberAssignment",function(t){return function(r,n){return t.call(this,r).then(function(t){return e.loadAssignments({id:t.assignmentId})}).callback(n)}}),b(e,"deleteMemberAssignment",function(t){return function(r,n){return t.call(this,r,n).then(function(t){return e.loadAssignments({id:r.assignmentId}).then(function(e){return e[0].member=null,t})}).callback(n)}}),b(e,"markMessageAsRead",function(t){return function(r,n){return t.call(this,r,n).then(function(t){var r;return r=null!=t.member||null!=t.divisionMember?{memberId:t.memberId}:{contactId:t.contactId},r.messageType="alert,email",e.loadMessages({id:t.messageId}),e.loadMessageData(r)}).callback(n)}}),b(e,"bulkDeleteMessages",function(t){return function(r,n){var s,i,o,a;return Array.isArray(r)&&r.length&&this.isItem(r[0],"message")?a=r:"object"==typeof r&&this.isItem(r,"message")&&(a=[r]),null!=a&&(null!=a[0].contactId?s=a[0].contactId:null!=a[0].memberId&&(i=a[0].memberId),o=a[0].teamId,m.unlinkItems(a,u)),t.call(this,r).then(function(t){var r;return null!=a?(r={},null!=s?r.contactId=s:null!=i&&(r.memberId=i),r.messageType="alert,email",r.teamId=o,e.loadMessageData(r).then(function(e){return e}).fail(function(e){return e})):t}).fail(function(e){return null!=a&&m.linkItems(a,u),e}).callback(n)}}),b(e,"createBulkAssignments",function(t){return function(r,n,s,i,o){return t.call(this,r,n,s,i,o).then(function(t){var r;return r=t.map(function(e){return e.id}),e.loadAssignments({id:r}).then(function(){return t})}).callback(o)}}),b(e,"bulkDeleteMembers",function(e){return function(t,r){var n;return n=[],t.forEach(function(e){return n.push.apply(n,e.assignments),n.push.apply(n,e.availabilities),e.contacts.forEach(function(e){return n.push.apply(n,e.contactEmailAddresses),n.push.apply(n,e.contactPhoneNumbers),n.push(e)}),n.push.apply(n,e.trackedItemStatuses),n.push.apply(n,e.memberPayments),n.push.apply(n,e.memberStatistics),n.push.apply(n,e.statisticData),n.push.apply(n,e.memberAssignments)}),m.unlinkItems(n,u),e.call(this,t,r).then(function(e){return e}).fail(function(e){return m.linkItems(n,u),e}).callback(r)}}),b(e,"disableMember",function(t){return function(r,n){return t.call(this,r,n).then(function(t){return r=t.id,d.when(e.loadContactEmailAddresses({memberId:r}),e.loadContactPhoneNumbers({memberId:r}),e.loadMembersPreferences({memberId:r}),e.loadContacts({memberId:r}),e.features.combinedContactCards?void 0:(e.loadMemberEmailAddresses({memberId:r}),e.loadMemberPhoneNumbers({memberId:r}))).then(function(){return t})}).callback(n)}}),b(e,"inviteContactEmailAddresses",function(t){return function(r,n){return t.call(this,r,n).then(function(t){var n;return n=r.memberId,d.when(e.loadMembers({id:n}),e.loadContacts({memberId:n}),e.loadContactEmailAddresses({memberId:n}),e.loadContactPhoneNumbers({memberId:n})).then(function(){return t})}).callback(n)}}),b(e,"saveContact",function(t){return function(r,n){return t.call(this,r,n).then(function(t){var n;return n=r.id,d.when(e.loadMembers({id:r.memberId}),e.loadContacts({memberId:r.memberId}),e.loadContactEmailAddresses({contactId:n}),e.loadContactPhoneNumbers({contactId:n})).then(function(){return t})}).callback(n)}})},h=function(e){return v(e,"saveMember"),v(e,"deleteMember"),v(e,"deleteContact"),v(e,"saveEvent"),v(e,"deleteEvent"),v(e,"saveTrackedItem"),v(e,"deleteTrackedItem"),v(e,"deleteTeam")},b=function(e,t,r){var n;return n=e[t],e[t]=r(n),e[t].oldMethod=n,e},v=function(e,t){var r;return r=e[t].oldMethod,e[t]=r},g=function(e,t,r,n){return b(e,t,function(e){return function(t,s){var i;return t.id&&n?(i=null,e.call(this,t).then(function(e){return i=e}).then(n).then(function(){return i}).callback(s)):!t.id&&r?(i=null,e.call(this,t).then(function(e){return i=e}).then(r).then(function(){return i}).callback(s)):e.call(this,t,s)}})},a=function(e,t){return Object.keys(e).forEach(function(r){if("function"!=typeof value&&"_"!==r.charAt(0))return t[r]=e[r]}),t},o=function(e){return e.replace(/[-_]+(\w)/g,function(e,t){return t.toUpperCase()})}}),e.register("promises.coffee",function(e,t,r){var n,s,i,o,a=function(e,t){return function(){return e.apply(t,arguments)}},m=[].slice,u={}.hasOwnProperty;o="undefined"!=typeof e?e:this,s=function(){function e(){this.call=a(this.call,this)}return e.prototype.then=function(e,t,r,n){throw new TypeError("The Promise base class is abstract, this function is overwritten by the promise's deferred object")},e.prototype.callback=function(e){return e&&"function"==typeof e&&this.then(function(){var t;return t=1<=arguments.length?m.call(arguments,0):[],e.apply(null,[null].concat(m.call(t)))},function(t){return e(t)}),this},e.prototype.resolved=function(e){return this.then(e)},e.prototype.done=function(e){return this.then(e)},e.prototype.rejected=function(e){return this.then(null,e)},e.prototype.fail=function(e){return this.then(null,e)},e.prototype.always=function(e){var t,r;return r=function(t){return e(null,t)},t=function(t){return e(t)},this.then(r,t)},e.prototype.progress=function(e){return this.then(null,null,e)},e.prototype.canceled=function(e){return this.then(null,null,null,e)},e.prototype.apply=function(e,t){return this.then(function(r){if(!(r instanceof Array)(e.apply(t||this,r)))return e.call(t||this,r)})},e.prototype.cancel=function(){throw new TypeError("The Promise base class is abstract, this function is overwritten by the promise's deferred object")},e.prototype.get=function(e){return this.then(function(t){return null!=t?t[e]:void 0})},e.prototype.set=function(e,t){return this.then(function(r){return null!=r&&(r[e]=t),r})},e.prototype.put=function(e,t){return this.then(function(r){return null!=r?r[e]=t:void 0})},e.prototype.run=function(){var e,t;return e=arguments[0],t=2<=arguments.length?m.call(arguments,1):[],this.then(function(r){return null!=r&&r[e].apply(r,t),r})},e.prototype.call=function(){var e,t;return e=arguments[0],t=2<=arguments.length?m.call(arguments,1):[],this.then(function(r){return r[e].apply(r,t)})},e}(),["pop","shift","splice","filter","every","map","some"].forEach(function(e){return s.prototype[e]=function(){var t;return t=1<=arguments.length?m.call(arguments,0):[],this.then(function(r){return null!=r&&"function"==typeof r[e]?r[e].apply(r,t):void 0})}}),["push","reverse","sort","unshift","forEach"].forEach(function(e){return s.prototype[e]=function(){var t;return t=1<=arguments.length?m.call(arguments,0):[],this.then(function(r){return r instanceof Array&&r[e].apply(r,t),r})}}),s.extend=function(e){var t,r,n;if(t=function(){},t.extend=this.extend,t.prototype=new this,e)for(r in e)u.call(e,r)&&(n=e[r],t.prototype[r]=n);return t},o.when=function(){var e,t,r,n,s,i,a,u,c,l,d,f;for(c=1<=arguments.length?m.call(arguments,0):[],n=o.defer(),t=c.length,l=!1,f=function(){},d=function(e){return l=!0,e},r=function(e){return function(){var r;if(r=1<=arguments.length?m.call(arguments,0):[],c[e]=r.length>1?r:r[0],0===--t)return l?n.reject.apply(n,c):n.resolve.apply(n,c)}},a=s=0,i=c.length;s<i;a=++s)u=c[a],u&&"function"==typeof u.then?(e=r(a),u.then(f,d),u.then(e,e)):--t;return 0===t&&n.resolve.apply(n,c),n.promise},i=function(){var e;return e=1<=arguments.length?m.call(arguments,0):[],e.isArgs=!0,e},n=function(){function e(e){null==e&&(e=new o.Promise),this.progress=a(this.progress,this),this.cancel=a(this.cancel,this),this.reject=a(this.reject,this),this.resolve=a(this.resolve,this),this.finished=a(this.finished,this),this.then=a(this.then,this),this.promise=e,this.status="pending",this.progressHandlers=[],this.handlers=[],e.then=this.then,e.cancel=this.cancel,e.getStatus=function(e){return function(){return e.status}}(this)}return e.prototype.then=function(e,t,r,n){var s,i,a,m,u,c,l;for(a=0,m=arguments.length;a<m;a++)if(i=arguments[a],null!=i&&"function"!=typeof i)throw new Error("Promise handlers must be functions");return r&&this.progressHandlers.push(r),c=o.defer(),c.promise.prev=this.promise,this._addHandler(e,t,n).nextDeferred=c,this.finished()&&(i=this.handlers.pop(),u=i[this.status],s=i.nextDeferred,u?(l=u.apply(null,this.results),l&&"function"==typeof l.then?l.then(s.resolve,s.reject):s[this.status](l)):s[this.status].apply(s,this.results)),c.promise},e.prototype.finished=function(){return"pending"!==this.status},e.prototype.resolve=function(){var e,t,r,n,s,i;if(i=1<=arguments.length?m.call(arguments,0):[],"pending"===this.status)for((null!=(s=i[0])?s.isArgs:void 0)&&(i=i[0]),clearTimeout(this._timeout),this.status="resolve",this.results=i;t=this.handlers.shift();)r=t[this.status],e=t.nextDeferred,r?(n=r.apply(null,this.results),n&&"function"==typeof n.then?n.then(e.resolve,e.reject):e[this.status](n)):e[this.status].apply(e,this.results)},e.prototype.reject=function(){var e,t,r,n,s,i;if(i=1<=arguments.length?m.call(arguments,0):[],"pending"===this.status)for((null!=(s=i[0])?s.isArgs:void 0)&&(i=i[0]),clearTimeout(this._timeout),this.status="reject",this.results=i;t=this.handlers.shift();)r=t[this.status],e=t.nextDeferred,r?(n=r.apply(null,this.results),n&&"function"==typeof n.then?n.then(e.resolve,e.reject):e[this.status](n)):e[this.status].apply(e,this.results)},e.prototype.cancel=function(){var e,t,r,n,s,i,o;if(o=1<=arguments.length?m.call(arguments,0):[],"pending"===this.status){for((null!=(s=o[0])?s.isArgs:void 0)&&(o=o[0]),clearTimeout(this._timeout),this.status="cancel",this.results=o;t=this.handlers.shift();)r=t[this.status],e=t.nextDeferred,r?(n=r.apply(null,this.results),n&&"function"==typeof n.then?n.then(e.resolve,e.reject):e[this.status](n)):e[this.status].apply(e,this.results);null!=(i=this.promise.prev)&&i.cancel()}},e.prototype.progress=function(){var e,t,r,n,s,i;for(r=1<=arguments.length?m.call(arguments,0):[],s=this.progressHandlers,i=[],e=0,t=s.length;e<t;e++)n=s[e],i.push(n.apply(null,r));return i},e.prototype.timeout=function(e,t){return clearTimeout(this._timeout),this._timeout=setTimeout(function(e){return function(){return e.reject(null!=t?t:new Error("Operation timed out"))}}(this),e)},e.prototype.reset=function(){return this.status="pending",this.progressHandlers=[],this.handlers=[]},e.prototype._addHandler=function(e,t,r){var n;return n={resolve:e,reject:t,cancel:r},this.handlers.push(n),n},e}(),o.Deferred=n,o.Promise=s,o.args=i,o.defer=function(e){return new o.Deferred(e)},o.wrap=function(e,t){return function(){var r,n,s,i;return r=1<=arguments.length?m.call(arguments,0):[],i=t?new t:void 0,s=o.defer(i),"function"==typeof r[r.length-1]&&(n=r.pop()),r.push(function(e,t){var r;return r=Array.prototype.slice.call(arguments,2),n&&n.apply(null,[e,t].concat(m.call(r))),e?s.reject(e):s.resolve.apply(s,[t].concat(m.call(r)));
}),e.apply(this,r),s.promise}},o.resolve=function(){var e,t;return e=1<=arguments.length?m.call(arguments,0):[],t=o.defer(),t.resolve.apply(t,e),t.promise},o.reject=function(){var e,t;return e=1<=arguments.length?m.call(arguments,0):[],t=o.defer(),t.reject.apply(t,e),t.promise}}),e.register("request.coffee",function(e,t,r){var n,s,i,o,a,m,u,c,l=function(e,t){function r(){this.constructor=e}for(var n in t)d.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},d={}.hasOwnProperty;"undefined"==typeof XMLHttpRequest&&(global.XMLHttpRequest=t("xmlhttprequest").XMLHttpRequest),n=global.FormData||function(){},a=t("./promises"),u=t("./stringent"),o=t("./eventEmitter"),m=function(e,t,r,i,m){var l,d,f,p,h,v,I,b,g;if(("undefined"!=typeof teamsnap&&null!==teamsnap?teamsnap.useEventEmitter:void 0)&&(I=e+(new Date).getTime(),o.requestStart(I,e,t,r)),r&&"GET"===e.toUpperCase()){v=[];for(p in r)b=r[p],v.push(encodeURIComponent(p)+"="+encodeURIComponent(b));v.length&&(t+=t.indexOf("?")===-1?"?":"&",t+=v.join("&"))}else"object"!=typeof r||r instanceof n||(r=JSON.stringify(r));if(g=new XMLHttpRequest,g.open(e.toUpperCase(),t),i)for(f=0,h=i.length;f<h;f++)(d=i[f])(g,r);return l=a.defer(),g.onreadystatechange=function(){var n,i,m,d;switch(g.readyState){case 3:return l.progress(g);case 4:try{g.data=JSON.parse(u(g.responseText))}catch(f){g.data=null}if(g.status>=400&&(n=(null!=(i=g.data)&&null!=(m=i.collection)&&null!=(d=m.error)?d.message:void 0)||"",("undefined"!=typeof teamsnap&&null!==teamsnap?teamsnap.useEventEmitter:void 0)&&o.requestError(I,e,t,r,n)),0===g.status)return c?a.defer().promise:l.reject(new s(s.CONNECTION_ERROR,"Could not connect to the server"),g,n);if(g.status>=500)return global.console&&console.error("TeamSnap API error: "+n),l.reject(new s(s.SERVER_ERROR,"Error with the server"),g,n);if(g.status>400)return l.reject(new s(s.CLIENT_ERROR,"There was an error with the request"),g,n);if(400===g.status)return l.reject(new s(s.VALIDATION_ERROR,n||"The data was invalid"),g);if(l.resolve(g),"undefined"!=typeof teamsnap&&null!==teamsnap?teamsnap.useEventEmitter:void 0)return o.requestResponse(I,e,g)}},g.send(r||null),l.promise.callback(m)},i=function(e){var t;return null==e&&(e=[]),t=function(t,r,n,s){return"function"==typeof n&&(s=n,n=null),m(t,r,n,e,s)},t.get=function(e,r,n){return t("get",e,r,n)},t.post=function(e,r,n){return t("post",e,r,n)},t.put=function(e,r,n){return t("put",e,r,n)},t["delete"]=function(e,r,n){return t("delete",e,r,n)},t.create=function(){return i()},t.clone=function(){return i(e.slice())},t.reset=function(){return e=[],this},t.hook=function(t){return e.push(t),this},t.removeHook=function(t){var r;return r=e.indexOf(t),r!==-1&&e.splice(r,1),this},t},r.exports=i(),s=function(e){function t(e,r){this.code=e,this.message=r,t.__super__.constructor.call(this),this.name="RequestError"}return l(t,e),t.CONNECTION_ERROR=1,t.SERVER_ERROR=2,t.CLIENT_ERROR=3,t.VALIDATION_ERROR=4,t}(Error),"undefined"!=typeof window&&(c=!1,window.addEventListener("beforeunload",function(){c=!0}))}),e.register("sdk.coffee",function(e,t,r){var n,s,i,o,a,m,u,c,l,d,f={}.hasOwnProperty;i=t("./teamsnap").TeamSnap,c=t("./promises"),m=t("./loadCollections"),l=t("./model"),n=l.Item,s=l.ScopedCollection,d=/^https?:\/\//,i.prototype.loadCollections=function(e,t){return"function"==typeof e&&(t=e,e=null),m(this.request,e).then(function(e){return function(t){var r,i,o,a;return e.collections={},Object.keys(t).forEach(function(r){return e.collections[r]=new s(e.request,t[r])}),e.apiVersion=t.root.version,e.plans=n.fromArray(e.request,(null!=(r=t.plans.items)?r.slice():void 0)||[]),e.smsGateways=n.fromArray(e.request,(null!=(i=t.smsGateways.items)?i.slice():void 0)||[]),e.sports=n.fromArray(e.request,(null!=(o=t.sports.items)?o.slice():void 0)||[]),e.timeZones=n.fromArray(e.request,(null!=(a=t.timeZones.items)?a.slice():void 0)||[]),e}}(this)).callback(t)},i.prototype.reloadCollections=function(e){return m.clear(),this.loadCollections(e)},i.prototype.loadItems=function(e,t,r){var n;if(!this.hasType(e))throw new TSArgsError("teamsnap.load*","must provide a valid `type`");return n=this.getCollectionForItem(e),n.queryItems("search",t,r)},i.prototype.loadItem=function(e,t,r){var n;if(!this.hasType(e))throw new TSArgsError("teamsnap.load*","must provide a valid `type`");return n=this.getCollectionForItem(e),n.queryItem("search",t,r)},i.prototype.createItem=function(e,t){var r;if(e||(e=t,t=null),t&&(e=u(e,t)),!this.isItem(e))throw new TSArgsError("teamsnap.create*","must include a valid `type`");return e.links||(r=this.getCollectionForItem(e.type),e.links=r.links.cloneEmpty()),n.create(this.request,e)},i.prototype.saveItem=function(e,t){var r;if(!this.isItem(e))throw new TSArgsError("teamsnap.save*","must include a valid `type`");return r=this.getCollectionForItem(e),r.save(e,t)},i.prototype.deleteItem=function(e,t,r){if("string"==typeof e&&d.test(e)&&(e={href:e}),"string"!=typeof(null!=e?e.href:void 0)||!d.test(e.href))throw new TSArgsError("teamsnap.delete*","item must have a valid href to delete");return e instanceof n||(e=n.create(this.request,e)),e["delete"](t,r)},i.prototype.copyItem=function(e){var t;return t=this.getCollectionForItem(e),e.copy(t.template)},i.prototype.getNameSort=function(){return function(e,t){var r,n;return e.type!==t.type?(r=e.type,n=t.type):"string"==typeof e.name&&"string"==typeof t.name?(r=e.name.toLowerCase(),n=t.name.toLowerCase()):e.createdAt&&t.createdAt?(r=e.createdAt,n=t.createdAt):(r=e.id,n=t.id),"function"==typeof(null!=r?r.localeCompare:void 0)?r.localeCompare(n):r===n?0:!r&&n?1:r&&!n?-1:r>n?1:r<n?-1:0}},i.prototype.getDefaultSort=function(){return function(e,t){var r,n;return e.type!==t.type?(r=e.type,n=t.type):e.createdAt&&t.createdAt?(r=e.createdAt,n=t.createdAt):(r=e.id,n=t.id),"function"==typeof(null!=r?r.localeCompare:void 0)?r.localeCompare(n):r===n?0:!r&&n?1:r&&!n?-1:r>n?1:r<n?-1:0}},i.prototype.getCollectionForItem=function(e){var t,r;if(!this.collections)throw new TSError("You must auth() and loadCollections() before using any load*, save*, create*, or delete* methods.");return r="string"==typeof e?e:e.type,t=this.getPluralType(r),this.collections[t]},i.prototype.isId=function(e){return"string"==typeof e||"number"==typeof e},i.prototype.isItem=function(e,t){return this.hasType(null!=e?e.type:void 0)&&(!t||e.type===t)},i.prototype.reject=function(e,t,r){return c.reject(new TSValidationError(e,t)).callback(r)},o=function(e){var t,r,n;r=[];for(t in e)n=e[t],r.push(i.prototype[t]=n);return r},o(t("./types")),a=t("./linking"),i.prototype.linkItems=a.linkItems,i.prototype.unlinkItems=a.unlinkItems,o(t("./persistence")),o(t("./collections/teams")),o(t("./collections/advertisements")),o(t("./collections/assignments")),o(t("./collections/availabilities")),o(t("./collections/batchInvoices")),o(t("./collections/broadcastAlerts")),o(t("./collections/broadcastEmails")),o(t("./collections/broadcastEmailAttachments")),o(t("./collections/contactEmailAddresses")),o(t("./collections/contactPhoneNumbers")),o(t("./collections/contacts")),o(t("./collections/customData")),o(t("./collections/customFields")),o(t("./collections/leagueCustomData")),o(t("./collections/leagueCustomFields")),o(t("./collections/divisionAggregates")),o(t("./collections/divisionEvents")),o(t("./collections/divisionLocations")),o(t("./collections/divisionMembers")),o(t("./collections/divisionMembersPreferences")),o(t("./collections/divisionTeamStandings")),o(t("./collections/divisions")),o(t("./collections/divisionsPreferences")),o(t("./collections/events")),o(t("./collections/eventStatistics")),o(t("./collections/facebookPages")),o(t("./collections/forecasts")),o(t("./collections/forumPosts")),o(t("./collections/forumSubscriptions")),o(t("./collections/forumTopics")),o(t("./collections/invoices")),o(t("./collections/invoiceLineItems")),o(t("./collections/invoiceTransactions")),o(t("./collections/leagueRegistrantDocuments")),o(t("./collections/locations")),o(t("./collections/memberAssignments")),o(t("./collections/memberBalances")),o(t("./collections/memberEmailAddresses")),o(t("./collections/memberFiles")),o(t("./collections/memberLinks")),o(t("./collections/memberPayments")),o(t("./collections/memberPhoneNumbers")),o(t("./collections/memberPhotos")),o(t("./collections/membersPreferences")),o(t("./collections/memberStatistics")),o(t("./collections/memberRegistrationSignups")),o(t("./collections/members")),o(t("./collections/messageData")),o(t("./collections/messages")),o(t("./collections/opponents")),o(t("./collections/opponentsResults")),o(t("./collections/partnerUserPreferences")),o(t("./collections/partnersPreferences")),o(t("./collections/paymentNotes")),o(t("./collections/plans")),o(t("./collections/sponsors")),o(t("./collections/sports")),o(t("./collections/registrationFormLineItemOptions")),o(t("./collections/registrationFormLineItems")),o(t("./collections/registrationForms")),o(t("./collections/statisticAggregates")),o(t("./collections/statistics")),o(t("./collections/statisticData")),o(t("./collections/statisticGroups")),o(t("./collections/teamFees")),o(t("./collections/teamMedia")),o(t("./collections/teamMediumComments")),o(t("./collections/teamMediaGroups")),o(t("./collections/teamNames")),o(t("./collections/teamPublicSites")),o(t("./collections/teamsPaypalPreferences")),o(t("./collections/teamPhotos")),o(t("./collections/teamsPreferences")),o(t("./collections/teamsResults")),o(t("./collections/teamStatistics")),o(t("./collections/teamStores")),o(t("./collections/trackedItems")),o(t("./collections/trackedItemStatuses")),o(t("./collections/users")),u=function(e,t){var r,n,s;n={};for(r in e)f.call(e,r)&&(s=e[r],"function"!=typeof s&&"_"!==r.charAt(0)&&(n[r]=s));for(r in t)f.call(t,r)&&(s=t[r],"function"==typeof s||e.hasOwnProperty(r)||(n[r]=s));return n}}),e.register("stringent.coffee",function(e,t,r){r.exports=function(e){var t;return t=/\"name\"\:\"persistent_uuid\"\,\"value\"\:(\d+)/g,e.replace(t,'"name":"persistent_uuid","value":"$1"')}}),e.register("teamsnap.coffee",function(e,t,r){var n,s,i,o,a;o=t("./promises"),a=t("./model"),n=a.Collection,s=a.Item,t("./errors"),i=function(){function e(e,t){this.apiUrl=null!=e?e:"https://apiv3.teamsnap.com",this.authUrl=null!=t?t:"https://auth.teamsnap.com"}return e.prototype.version="1.57.0",e.prototype.promises=o,e.prototype.when=o.when,e.prototype.TeamSnap=e,e.prototype.Collection=n,e.prototype.Item=s,e.prototype.useEventEmitter=!1,e}(),r.exports=new i,t("./auth"),t("./sdk"),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")})}),e.register("types.coffee",function(e,t,r){var n,s,i,o,a,m,u,c,l,d;for(u=e,d=["user","advertisement","assignment","availability","batchInvoice","batchInvoiceLineItem","broadcastAlert","broadcastEmail","broadcastEmailAttachment","contact","contactEmailAddress","contactPhoneNumber","customDatum","customField","divisionAggregate","leagueCustomDatum","leagueCustomField","divisionContact","divisionContactEmailAddress","divisionContactPhoneNumber","divisionEvent","divisionLocation","divisionMember","divisionMemberEmailAddress","divisionMemberPhoneNumber","divisionMemberPreferences","divisionTeamStanding","divisionPreferences","division","event","eventStatistic","forecast","forumPost","forumSubscription","forumTopic","leagueRegistrantDocument","invoice","invoiceLineItem","invoiceTransaction","location","member","memberAssignment","memberBalance","memberEmailAddress","memberFile","memberLink","memberPayment","memberPhoneNumber","memberPhoto","memberPreferences","memberStatistic","memberRegistrationSignup","message","messageDatum","opponent","opponentResults","partnerPreferences","partnerUserPreferences","paymentNote","plan","registrationForm","registrationFormLineItemOption","registrationFormLineItem","smsGateway","sponsor","statistic","statisticAggregate","statisticDatum","statisticGroup","sport","team","teamFee","teamMedium","teamMediumComment","teamMediaGroup","teamName","teamPaypalPreferences","teamPhoto","teamPreferences","teamPublicSite","teamResults","teamStatistic","teamStore","timeZone","trackedItem","trackedItemStatus"],m=d.slice(),m.remove=function(e){var t;return t=this.indexOf(e),t!==-1&&this.splice(t,1),this},m.remove("user").remove("plan").remove("smsGateway").remove("sport").remove("timeZone"),l={},a={},o={memberPreferences:"membersPreferences",divisionMemberPreferences:"divisionMembersPreferences",divisionPreferences:"divisionsPreferences",opponentResults:"opponentsResults",partnerPreferences:"partnersPreferences",statisticDatum:"statisticData",messageDatum:"messageData",teamMedium:"teamMedia",teamPaypalPreferences:"teamsPaypalPreferences",teamPreferences:"teamsPreferences",teamResults:"teamsResults",customDatum:"customData",leagueCustomDatum:"leagueCustomData",smsGateway:"smsGateways",partnerUserPreferences:"partnersUserPreferences"},n=0,s=d.length;n<s;n++)c=d[n],i=o[c]||function(){switch(c.slice(-1)){case"y":return c.slice(0,-1)+"ies";case"s":return c+"es";default:return c+"s"}}(),l[c]=c,l[i]=c,a[i]=c,o[c]=i;u.isPluralType=function(e){return a.hasOwnProperty(e)},u.isSingularType=function(e){return o.hasOwnProperty(e)},u.hasType=function(e){return void 0!==l[e]},u.getTypes=function(){return d.slice()},u.getTeamTypes=function(){return m.slice()},u.getPluralType=function(e){return o[e]},u.getSingularType=function(e){return a[e]},u.getType=function(e){return l[e]},u.camelcaseType=function(e){return e.replace(/[-_]+(\w)/g,function(e,t){return t.toUpperCase()})},u.underscoreType=function(e){return e.replace(/[A-Z]/g,function(e){return"_"+e.toLowerCase()})}}),global.teamsnap=e("teamsnap")}();